#component "M_MNPLAN"

VipInterface AlgoritmSetup_5110 Implements oAlgoritmSetup;
Interface AlgoritmSetup_5110 '' (,hcNoContext,) EscClose, DoAccept;
show(,,34,5);

create view
var
  _formplNrec: comp;
as select *
from formpl
where ((
  _formplNrec == formpl.nrec
))
;

parameters _formplNrec;

screen sc1;
fields
  formpl.resword[1]: [list coKatsopr 'Накладные', coBasedoc 'ДО'];
buttons
  cmDoOk, default;
  cmCancel;
<<

`Документ` .@@@@@@@@@@@@@@@@@@@@

   <. Продолжить .> <. Отмена .>
>>
end;

Function asInitInter(p_cFormPl: comp): boolean;
{
  _formplNrec := p_cFormPl;
  asInitInter := getfirst formpl = tsOk;
}

Function asDoneInter: boolean;
{
  result := update current formpl = tsOk;
}

Procedure asOnCmSetDefault;
{
  formpl.resword[1] := coKatsopr;
}

Procedure asOnSetWayAccou(p_cWayAccou: comp);
{
  p_cWayAccou := p_cWayAccou;
}

handleevent
cmDoOk: asDoneInter;
cmInit:
  {
    if (getfirst formpl <> tsOk)
    {
      Message('Не найдены настройки пользовательского алгоритма',Error+CancelButton);
      Abort;
      Exit;
    }
    asOnCmSetDefault;
  }
end;
end.

