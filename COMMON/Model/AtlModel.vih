#ifndef __AtlModel__
#define __AtlModel__

#include IManualIndex.vih
#include IModify.vih

#component "System"

objinterface IAtlTable;
  property TableCode: word read;
end;

objinterface IAtlModify;
  function UpdateEntity: word;
  function InsertEntity: word;
  function DeleteEntity: word;
end;

extensionPoint epBeforeInsertAtlEntity(atlTable: IAtlTable);
extensionPoint epBeforeUpdateAtlEntity(atlTable: IAtlTable);
extensionPoint epBeforeDeleteAtlEntity(atlTable: IAtlTable);
extensionPoint epAfterInsertAtlEntity (atlTable: IAtlTable);
extensionPoint epAfterUpdateAtlEntity (atlTable: IAtlTable);
extensionPoint epAfterDeleteAtlEntity (atlTable: IAtlTable);

vipinterface AtlTableBase implements IAtlTable, IAtlModify, IModify;
  public: procedure SetTableCode(aTableCode: word);
end;

objinterface IAtlEntity(IAtlTable);
  property Nrec: comp;
  index iByNrec = Nrec (unique, primary);
end;

objinterface IAtlJournalizedEntity(IAtlEntity);
  property ATL_LASTUSER: comp;
  property ATL_LASTDATE: date;
  property ATL_LASTTIME: time;
  index iByLastUser = ATL_LASTUSER;
  index iByLastDateTime = ATL_LASTDATE, ATL_LASTTIME;
end;

#end
