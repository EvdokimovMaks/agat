//------------------------------------------------------------------------------
//                                                      (c) Корпорация Галактика
// Галактика ERP 8.1
// Процедура обработки Checkbox - фильтр по работникам и сотрудникам
//------------------------------------------------------------------------------

procedure ProcessCheck;
{
  case Zar_User.GrupStN xor PAF.GetFilterState of   // какой фильтр изменился ?
    1: // по подразделению
      if (Zar_User.GrupStN and 1) > 0
      {
        SelectField(#FiltrPodr);
        putcommand(cmPick);
      }
      else
      {
#ifdef NewCheckBox
        IPAFilterExtOption2(PAF).ClearDepFilterByMode(
                                    DepartmentValidator, cexozDate1, cexozDate2, PAFExtOption);
#else
  #ifdef AdvancedDepartmentFilterExtOptions
        IPAFilterExtOption(PAF).ClearDepartmentFilterExtOptions(
                                    DepartmentValidator, cexozDate1, cexozDate2, PAFExtOption);
  #else

    #ifdef AdvancedDepartmentFilter
        ITraditionalPersonalAccountFilterExt(PAF).ClearDepartmentFilterExt(DepartmentFilterDate);
    #else
        PAF.ClearDepartmentFilter;
    #end
  #end
#end
        ReReadRecord(#ZAR_USER);
      };

    2: // по работникам
      if (Zar_User.GrupStN and 2) > 0
      {
        SelectField(#FiltrPublic);
        putcommand(cmPick);
      }
      else
      {
#ifdef NewCheckBox
        ClearMarksFull;
#else
        PAF.ClearPersonalAccountFilter;
        ReReadRecord(#ZAR_USER);
#end
      }

  end; // case
}
