//------------------------------------------------------------------------------
//                                                      (c) корпорация Галактика
// Галактика 5.80 - модуль "Платежный календарь"
// общая часть для интерфейсов настройки интерактивных отчетов
//------------------------------------------------------------------------------

// в интерфейсе написать ф. RunTreeSeeInterface();
// подключить ofpflag.vpp

Procedure OnDefault;
{
!  SetModified(True); // нельзя - ошибка м б
  if UpdateTable
    if piTuneIer.SetLastFlagok(UserDeskRep.nRec)  // флажок последнего отчета
    {
      ReScanPanel(#UserDeskRep); // покажет флажок

      if ( BuildNewTree)
        RunTreeSeeInterface;
    }
}

Procedure OnAttrib;
{
  var rec: comp;
  rec    := piTuneIer.CheckLastFlagok( UserDeskRep.nRep);

  if UpdateTable
    if getfirst UserDeskRep where (( rec == UserDeskRep.nRec)) = tsOk
    {
      ReScanPanel( #UserDeskRep); // покажет, что перешли на новую запись

      If Not isBuild
        If ( BuildNewTree)
        {}

      RunTreeSeeInterface;
    }
}
