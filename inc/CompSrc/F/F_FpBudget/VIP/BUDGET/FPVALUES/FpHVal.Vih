//------------------------------------------------------------------------------
//                                                      (c) корпорация Галактика
// Галактика 5.80 - модуль "Управление бюджетом"
// Сервис работы с FpValues
//------------------------------------------------------------------------------

#include FpTypes.inc

#ifdef  ComponentVersion
#component "F_FpBudget"
#endif //ComponentVersion

//------------------------------------------------------------------------------
#doc
Cервис работы с FpValues, позволяет определить изменялась ли данная запись
FpValues в конкретном программном блоке, поиск ведется по полям
cBudVar + KodReg + cStBud + cPeriod
<b>Использование:</b><br>
если модифицируем FpValues (импорт, копирование, агрегация и т.д.), и надо
удалять старые значения, то перед тем как сделать AddSum
делаем:<br>
 if not(FindInFirstValuesTbl(FpValues.Buffer))<br>
   SetFpValuesToNul(FpValues.Buffer)<br>
Грузить всегда через LoadVipRef!<br>

<b>Внимание!</b> Интерфейс предназначен только для внутреннего использования<br>

#end
ObjInterface iObjLibHistModifFpValues;

//------------------------------------------------------------------------------
#doc
   Очистить временную таблицу хранения уже измененных записей<br>
#end
Procedure ClearFirstValuesTbl;

//------------------------------------------------------------------------------
#doc
   Поиск записи во временной таблице, если не найдена возвращается False и запись
   добавляется во временную таблицу<br>
#end
Function FindInFirstValuesTbl(tFpValuesBuf : TFpValues) : boolean;

//------------------------------------------------------------------------------
#doc
   Обнуляет суммы всех записей FpValues с данными cBudVar + KodReg + cStBud + cPeriod<br>
#end
Procedure SetFpValuesToNul(tFpValuesBuf : TFpValues);

//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
end;

VipInterface LibHistModifFpValues implements iObjLibHistModifFpValues
#Licensed_Free
;
