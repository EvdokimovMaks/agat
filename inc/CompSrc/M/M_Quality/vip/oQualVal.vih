/*
 ╔═════════════════════════════════════════════════════════════════════════════╗
 ║                     (c) 2004 корпорация ГАЛАКТИКА                           ║
 ║ Проект        : ГАЛАКТИКА                                                   ║
 ║ Система       : Учет материалов в производстве                              ║
 ║ Версия        : 7.11                                                        ║
 ║ Назначение    : Сигнатуры функций                                           ║
 ║                 для работы со значениями показателей качества.              ║
 ║ Ответственный : Жилко Дмитрий Витальевич (HATTER)                           ║
 ║ Система       : В разработке- макет!!!!!!                                   ║
 ╚═════════════════════════════════════════════════════════════════════════════╝
*/
#ifdef ComponentVersion
#component "M_Quality"
#endif

#ifndef __QUALVAL_REC
#define __QUALVAL_REC

/*
#define OBJINT_ALGORITM
//#define OBJINT_SETGETVID
//#define OBJINT_ACCOUNT
#include objintpl.vin
*/
// таблица результатов
table struct tmQualValue
(
  nRec        : tnRec,
  Npp         : string[10],
  cKatPokaz   : comp,
  wTypeOwn  : word,
  cOwner    : comp,
  wTypeOwn1 : word,
  cOwner1   : comp,
  wTypeOwn2 : word,
  cOwner2   : comp,
  wTypeOwn3 : word,
  cOwner3   : comp,
  wKodGr1  : word,
  cAnVal1  : comp,
  wKodGr2  : word,
  cAnVal2  : comp,
  wKodGr3  : word,
  cAnVal3  : comp,
  wKodGr4  : word,
  cAnVal4  : comp,
  dValueTest    : double,
  dValueMinTest : double,
  dValueMaxTest : double,
  cKatKauTest   : comp,
  KodGrKauTest  : word,
  cKauTest      : comp,
  KodGrKauMinTest : word,
  cKauMinTest     : comp,
  KodGrKauMaxTest : word,
  cKauMaxTest     : comp,
  dValueRez     : double,
  dValueMinRez  : double,
  dValueMaxRez  : double,
  KodGrKauRez   : word,
  cKatKauRez    : comp,
  cKauRez       : comp,
  dtKontr       : _datetime
)
with index
(
  tmQualValue_01 = nRec(Unique,AutoInc),
  tmQualValue_02 = cKatPokaz,
  tmQualValue_03 = wTypeOwn + cOwner +
                   wTypeOwn1 + cOwner1 +
                   wTypeOwn2 + cOwner2 +
                   wTypeOwn3 + cOwner3 +
                   cKatPokaz,
  tmQualValue_04 = wTypeOwn + cOwner + cKatPokaz,
  tmQualValue_05 = wTypeOwn + cOwner + Npp
);
type ttmQualValue = record as table tmQualValue;

type tKatPokaz = record as table KatPokaz;
type tValPokaz = record as table ValPokaz;
type tPrKachvo = record as table PrKachvo;
type tSpProbe  = record as table SpProbe;
type tTsKachvo = record as table TsKachvo;
type tValTest  = record as table ValTest;
type tRezKontr = record as table RezKontr;
type tValKontr = record as table ValKontr;

#doc
Значения показателей качества для объектов<br>
<b>Внимание!</b> Интерфейс предназначен только для внутреннего использования<br>
#end

ObjInterface oQualVal;

#doc
Вернуть нормативное значение из теста<br>
для заданной позиции документа и показателя качества<br>
#end
Function GetValueTest (wTypeObj: word; cObject: comp; cPokaz: comp; wFlag: word; dEnd: date): string;

#doc
Вернуть максимальное нормативное значение из теста<br>
для заданной позиции документа и показателя качества<br>
#end
Function GetValueMaxTest (wTypeObj: word; cObject: comp; cPokaz: comp; wFlag: word; dEnd: date): string;

#doc
Вернуть минимальное нормативное значение из теста<br>
для заданной позиции документа и показателя качества<br>
#end
Function GetValueMinTest (wTypeObj: word; cObject: comp; cPokaz: comp; wFlag: word; dEnd: date): string;

#doc
Вернуть фактическое значение из привязанных проб<br>
для заданной позиции документа и показателя качества<br>
#end
Function GetValueRez (wTypeObj: word; cObject: comp; cPokaz: comp; wFlag: word; dEnd: date): string;

/*
// возвращает максимальное фактическое значение из теста
// для заданной позиции документа и показателя качества
Function GetValueMaxRez (wTypeObj: word; cObject: comp; cPokaz: comp; wFlag: word; dEnd: date): string;

// возвращает минимальное фактическое значение из теста
// для заданной позиции документа и показателя качества
Function GetValueMinRez (wTypeObj: word; cObject: comp; cPokaz: comp; wFlag: word; dEnd: date): string;
*/

//******************************************************************************
// возвращает последнюю (?) пробу, связанную с объектом
#doc
Вернуть последнюю по времени пробу, связанную с объектом<br>
#end
Function GetProbeProp ( pwVidAtt: word
                       ;pwTypeOwn: word
                       ;pcOwner: comp
                       ;var ptPrKachvo: type$PrKachvo
                      ): boolean;

#doc
Вернуть во временную таблицу перечень значений показателей качества<br>
согласно переданным условиям<br>
#end
Function RunInter ( pt: tRecAcc ): boolean;

end; // ObjInterface oQualVal

#end // #ifndef __QUALVAL_REC

VipInterface iQualVal implements oQualVal
#ifdef ATL51
  Licensed (FREE)
#endif
;
