#ifndef _MOV_DS_VPP
#define _MOV_DS_VPP

#ifdef ComponentVersion
#component "M_Dvs"
#end


Table struct TAgrInfo_MCParty
(
 nRec          : tNrec,

 cMC           : tNrec,
 cParty        : tNrec,
 c_KitKau      : tNrec,
 BarKod        : tBarKod,

 Otpusk        : double,
 Per           : double,
 Vozv          : double,
 OstVh         : double,
 OstIsh        : double,

 Otpusk_Sum    : double,
 Per_Sum       : double,
 Vozv_Sum      : double,
 OstVh_Sum     : double,
 OstIsh_Sum    : double
)
With index
(
 TAgrInfo_MCParty01  =  nRec(Unique, Autoinc),
 TAgrInfo_MCParty02  =  cMC + cParty + c_KitKau,
 TAgrInfo_MCParty03  =  BarKod + cMC + cParty
);

/*


table struct tDvDS
(
//Движение   (tDvDS)
   nRec       :  TNrec,
   WtypeRes   :  Word     "Тип ресурса     Пока всегда cgKaU_KatMc",
   Cres       :  TNrec    "Ссылка на ресурс Пока всегда МЦ",
   cStrItog   :  tNrec,
   cSect      :  tNrec,
   CotpEd     :  TNrec    "Единица измерения",
   CGrMC      :  TNrec    "Ссылка на групу (не обязательное поле)",
   StartDate  :  Date     "Начало интервала",
   EndDate    :  Date     "Окончание интервала",
   DostVh     :  Double   "Входящий остаток",
   Dotpusk    :  Double   "Отпущено",
   DPer       :  Double   "Переработано",
   DVozv      :  Double   "Возвращено",
   DostIsh    :  Double   "Исходящий  остаток",
   DostVh_Sum :  Double   "Сумма  вх. Остатка",
   Dotpusk_Sum:  Double   "Сумма  отпуска",
   DPer_Sum   :  Double   "Сумма  переработаного",
   DVozv_Sum  :  Double   "Сумма возвращеного",
   DostIsh_Sum:  Double   "Сумма исходящего остатка",
   cVal       :  TNrec    "Cсылка на валюту",
   CKatOrg    :  TNrec    "Ссылка на контрагента",
   CDogovor   :  TNrec    "Ссылка на договор",
   CAppDog    :  TNrec    "Ссылка на приложение",
   CCalPlan   :  TNrec    "Ссылка на календарный план",
   CBaseDoc   :  TNrec    "Ссылка на ДО",
   cSpSopr    :  TNrec    "Ссылка на спецификацию",
   cSpSoprPr  :  TNrec    "Ссылка на спецификацию",

   CParty     :  TNrec    "Ссылка на партию",
   cKatDsNor  :  TNrec    "ссылка на норму (на будущее)",
   CClone     :  TNrec    "Закодированный разрез(На будущее)"
)
With Index
(
  tDvDS001  =  Nrec(Unique, Surrogate, Journal),
  tDvDS002  =  WtypeRes + Cres + CDogovor + CAppDog + CCalPlan + CBaseDoc + CKatOrg,
  tDvDS003  =  cStrItog + CDogovor + CAppDog + CCalPlan + CBaseDoc + CKatOrg,
  tDvDS004  =  CKatOrg + WtypeRes + Cres + cStrItog,
  tDvDS005  =  CDogovor + WtypeRes + Cres + cStrItog,
  tDvDS006  =  CAppDog + WtypeRes + Cres + cStrItog,
  tDvDS007  =  CCalPlan + WtypeRes + Cres + cStrItog,
  tDvDS008  =  CBaseDoc + WtypeRes + Cres + cStrItog,
  tDvDS009  =  CSpSopr + WtypeRes + Cres  + cStrItog,
  tDvDS010  =  CSpSoprPr + WtypeRes + Cres  + cStrItog,

  tDvDS011  =  CParty,
  tDvDS012  =  cKatDsNor,
  tDvDS013  =  CClone
)
;

table struct tDvDSDet   //Детализация  движения
(
      nRec      : TNrec,
      WtypeRes  :  Word    "Тип ресурса     Пока всегда cgKaU_KatMc",
      Cres      :  TNrec   "Ссылка на ресурс Пока всегда МЦ",
      CtDvDc    : TNrec   "Ссылка на таблицу движения",
      TypeDv    : Word    "Тип", //1- входящий остаток 2- отпущено
                                 //3- переработано 4- возвращено
                                 //5- исходящий  остаток
      VidSopr   : Word    "Тип накладной",
      cSopr     : TNrec   "Накладная",
      cSoprPr   : TNrec   "Накладная отпуска",
      cSpSopr   : TNrec   "Спецификация наклад-ной  отпуска",
      cSpSoprPr : TNrec   "Спецификация наклад-ной  отпуска",
      cSoprIn   : TNrec   "Спецификация наклад-ной  отпуска",
      cDsIo     : TNrec   "Ссылка на таблицу движения модуля ДС",
      Kol       : Double  "Количество",
      Price     : Double  "Цена",
      CVal      : Double  "Ссылка на валюту",
      dDS       : Date,
      BarKod    : tBarKod,
      cKatDsNor : TNrec   "Ссылка на норму",
      cTmpKatDsNor : TNrec   "Ссылка на норму"
)
With Index
(
  tFDvDSDet001  =  Nrec(Unique, Surrogate, Journal),
  tFDvDSDet002  =  CtDvDc + TypeDv,
  tFDvDSDet003  =  cTmpKatDsNor
);

table struct tRaspGPDet   //Детализация  движения
(
      nRec      : TNrec,
      TypeStruct : TNrec,
      ctDvDSDet : TNrec,
      cMC_S     : TNrec,
      cMC_GP    : TNrec,
      Kol       : Double   "Ссылка на таблицу движения"
)
With Index
(
  tRaspGPDet0001  =  Nrec(Unique, Surrogate, Journal),
  tRaspGPDet0002  =  ctDvDSDet + TypeStruct,
  tRaspGPDet0003  =  TypeStruct + cMC_S + cMC_GP
);


table struct tSctDvDS
(
  nRec     : TNrec,
  NumCon   : word,
  wFlag    : word,
  TabNrec  : comp,
  TabNrec1 : comp,
  TabNrec2 : comp
//  StrItog  : tNRec
)
With Index
(
  tSctDvDS001  =  Nrec(Unique, Surrogate, Journal),
  tSctDvDS002  =  NumCon + TabNrec + TabNrec1 + TabNrec2,
  tSctDvDS003  =  wFlag + NumCon + TabNrec + TabNrec1 + TabNrec2
//  tSctDvDS003  =  StrItog + NumCon + TabNrec + TabNrec1 + TabNrec2
);
*/

#endif
