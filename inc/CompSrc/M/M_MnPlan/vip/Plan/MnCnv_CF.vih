// =============================================================================
//                                                     (c)  корпорация Галактика
// Галактика 7.11 - Производственный контур
// Описание интерфейса-объекта "Общие функции для конвертации данных"
// =============================================================================

#component "M_MnPlan"

#ifndef __Def_oMnCnv_CF__
#define __Def_oMnCnv_CF__

//==============================================================================
// Таблицы в памяти

//------------------------------------------------------------------------------
// Связь между MnDocTmpl и WayAccou
Table STRUCT Rlt_MnDocTmpl_WA
(
  cMnDocTmpl: comp, // Ссылка на запись MnDocTmpl
  cWayAccou : comp  // Ссылка на запись WayAccou
)
With Index
(
  Rlt_MnDocTmpl_WA01 = cMnDocTmpl + cWayAccou,
  Rlt_MnDocTmpl_WA02 = cWayAccou + cMnDocTmpl
);

//------------------------------------------------------------------------------
// Связь между MnDoc и MnPlan
Table STRUCT Rlt_MnDoc_MnPlan
(
  cMnDoc : comp, // Ссылка на запись MnDoc
  cMnPlan: comp  // Ссылка на запись MnPlan
)
With Index
(
  Rlt_MnDoc_MnPlan01 = cMnDoc + cMnPlan,
  Rlt_MnDoc_MnPlan02 = cMnPlan + cMnDoc
);

//------------------------------------------------------------------------------
// Связь между MnCell и SpMnPl
Table STRUCT Rlt_MnCell_SpMnPl
(
  cMnCell: comp, // Ссылка на запись MnCell
  cSpMnPl: comp  // Ссылка на запись SpMnPl
)
With Index
(
  Rlt_MnCell_SpMnPl01 = cMnCell + cSpMnPl,
  Rlt_MnCell_SpMnPl02 = cSpMnPl + cMnCell
);

//******************************************************************************
// ObjInterface oMnCnv_CF
#doc
 Описание интерфейса-объекта "Общие функции для конвертации данных"</brief>
#end
ObjInterface oMnCnv_CF;

//------------------------------------------------------------------------------
#doc
 Очистка всех таблиц</brief> <br>
#end
Procedure ClearAllMnTables;

//------------------------------------------------------------------------------
#doc
 Конвертация WayAccou в MnDocTmpl</brief> <br>
 Параметры: <br>
   acWayAccou - Ссылка на запись WayAccou <br>
 Результат: <br>
   Ссылка на запись MnDocTmpl <br>
#end
Function Cnv_WayAccou_MnDocTmpl(acWayAccou: comp): comp;

//------------------------------------------------------------------------------
#doc
 Конвертация MnPlan в MnDoc</brief> <br>
 Параметры: <br>
   acMnPlan - Ссылка на запись MnPlan <br>
 Результат: <br>
   Ссылка на запись MnDoc <br>
#end
Function Cnv_MnPlan_MnDoc(acMnPlan: comp): comp;

//------------------------------------------------------------------------------
#doc
 Конвертация SpMnPl в MnCell</brief> <br>
 Параметры: <br>
   acSpMnPl - Ссылка на запись SpMnPl <br>
 Результат: <br>
   Ссылка на запись MnCell <br>
#end
Function Cnv_SpMnPl_MnCell(acSpMnPl: comp): comp;

//------------------------------------------------------------------------------
#doc
 Конвертация ObjAcct в MnObjRlt</brief> <br>
 Параметры: <br>
  awTypeRlt  - Тип связи между объектами (1-входящие/исходящие) <br>
  awTypeObj1 - Тип объекта 1 <br>
  acObj1     - Ссылка на объект 1 <br>
  awTypeObj2 - Тип объекта 2 <br>
  acObj2     - Ссылка на объект 2 <br>
  acParent   - Ссылка на родителя <br>
  abChild    - True - включая дочерние записи <br>
 Результат: <br>
   True - если успешно <br>
#end
Function Cnv_ObjAcct_MnObjRlt(awTypeRlt: word; awTypeObj1: word; acObj1: comp;
  awTypeObj2: word; acObj2: comp; acParent: comp; abChild: boolean): boolean;

//------------------------------------------------------------------------------
#doc
 Конвертация MnDocTmpl в WayAccou</brief> <br>
 Параметры: <br>
   acMnDocTmpl - Ссылка на запись MnDocTmpl <br>
 Результат: <br>
   Ссылка на запись MnPlan <br>
#end
Function Cnv_MnDocTmpl_WayAccou(acMnDocTmpl: comp): comp;

//------------------------------------------------------------------------------
#doc
 Конвертация MnDoc в MnPlan</brief> <br>
 Параметры: <br>
   acMnDoc - Ссылка на запись MnDoc <br>
 Результат: <br>
   Ссылка на запись MnPlan <br>
#end
Function Cnv_MnDoc_MnPlan(acMnDoc: comp): comp;

//------------------------------------------------------------------------------
#doc
 Конвертация MnCell в SpMnPl</brief> <br>
 Параметры: <br>
   acMnCell - Ссылка на запись MnCell <br>
 Результат: <br>
   Ссылка на запись SpMnPl <br>
#end
Function Cnv_MnCell_SpMnPl(acMnCell: comp): comp;

End; // ObjInterface oMnCnv_CF

VipInterface iMnCnv_CF implements oMnCnv_CF Licensed(Free);

#endif
