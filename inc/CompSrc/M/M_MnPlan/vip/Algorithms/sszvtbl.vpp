// =============================================================================
//                                                     (c)  корпорация Галактика
// Галактика 8.1 - Производственный контур
// Таблицы для работы с ССЗ и списанием материалов
// =============================================================================


#ifndef __SSZVTBL_VPP
#define __SSZVTBL_VPP


table struct tmIzdSSZ
(
  Nrec        : comp,
  Num         : word,
  wTypeSpMnPl : word,
  cSpMnPl     : comp,
  TypeIzd     : word,     // код группы КАU
  cIzd        : comp,     // ссылка на изделие
  cOper       : comp,     // ссылка на позицию МК
  cOperVar    : comp,     // ссылка на позицию МК вариантную
  VidOper     : word,     // вид операции
  dKolFact    : double,   // выпуск
  dKolBrak    : double,   // брак
  dKolOstPP   : double,   // покрыто остаток
  cOtpEd      : comp,     // ссылка на отпускные единицы измерения
  cPodr       : comp,     // ссылка на подр.
  cMOL        : comp,     // ссылка на MOL
  cPodrTo     : comp,     // ссылка на подр. куда
  cMOLTo      : comp,     // ссылка на MOL кому
  cParty      : comp,     // ссылка на партию
  cCardSN     : comp,     // ссылка на серийный номер
  Level       : word,     // уровень планирования
  cIzdSSZ     : comp,     // ссылка на основной продукт для продуктов выхода
  cIzdSSZNrec : comp,     // ссылка на основной продукт NRec
  cRoleOtk    : comp,
  wKodGrOtk   : word,
  cAnalOtk    : comp,
  cRoleOtkMK  : comp,
  wKodGrOtkMK : word,
  cAnalOtkMK  : comp,
  wKodGrOtkMKOt: word,
  cAnalOtkMKOt : comp,
  cSpObjAcc   : comp,
  DDate       : date,
  ctmInp      : comp,
  wFlOk       : word,     // флаг определения всех
  ctmOut      : comp,
  cKatSopr    : comp,     // ссылка на накладную
  wFlag       : word,      // флаг для признака обработки накладной
  wUslNakl    : word,
  cUnicMCOperITD: comp,
  sComment    : string,
  sZakaz      : string,
  sNumPosDoc  : s20,
  dPrice      : double,
  cIzdEtalon  : comp,
  cOtpEdEtalon: comp,
  cAnalEx0    : comp,
  cAnalEx1    : comp,
  cAnalEx2    : comp,
  cAnalEx3    : comp,
  cAnalEx4    : comp,
  cAnalEx5    : comp,
  cAnalEx6    : comp,
  cAnalEx7    : comp,
  cAnalEx8    : comp,
  cSaldTune   : comp

)
with Index
(
 tmIzdSSZ00  =  Nrec(Unique, Surrogate),
 tmIzdSSZ01  =  Num,
// tmIzdSSZ02  =  TypeIzd + cIzd + cOper + cCardSN + cPodr + cMOL + cParty ,
 tmIzdSSZ02  =  TypeIzd + cIzd + cOper + cCardSN + cPodr + cParty + cMOL,
 tmIzdSSZ03  =  ctmInp,
 tmIzdSSZ04  =  ctmOut,
 tmIzdSSZ05  =  Level(desc),
 tmIzdSSZ06  =  cIzdSSZNrec,
 tmIzdSSZ07  =  cCardSN + cIzd + cPodr + cMOL + cParty,
 tmIzdSSZ08  =  cSpMnpl,
 tmIzdSSZ09  =  wFlOk,
 tmIzdSSZ10  =  sNumPosDoc,
 tmIzdSSZ11  =  TypeIzd + cIzd + cOper + cAnalEx0 + cAnalEx1 + cAnalEx2 + cAnalEx3 + cAnalEx4 +
                        cAnalEx5 + cAnalEx6 + cAnalEx7 + cAnalEx8
);



table struct tmSyrSSZ
(
  Nrec       : comp,
  cIzdSSZ     : comp,     // ссылка на tmIzdSSZ
  wTypeSpMnPl : word,
  cSpMnPl     : comp,
  Num         : word,     // номер по порядку
  TypeSyr     : word,     // код группы КАU тип сырья
  cSyr        : comp,     // ссылка на сырье
  cOperPrev   : comp,     // ссылка на позицию МК (ссылка на предыдущую операции)

  dKolNorm    : double,   // кол-во по норме
  dKolFact    : double,   // кол-во по факту
  dKolPodr    : double,   // кол-во в цехе
  dKolManuf   : double,   // кол-во в других подр.
  dKolFactDop : double,   // кол-во по факту дополнительное
  cPodr       : comp,     // ссылка на подр.
  cMOL        : comp,     // ссылка на MOL
  cParty      : comp,     // ссылка на партию
  cSyrSrc     : comp,     // ссылка на заменяемое сырье
  dKolNormSrc : double,   // кол-во заменяемого сырья по норме
  cOtpEd      : comp,     // ссылка на отпускные единицы измерения
  cCardSN     : comp,     // ссылка на серийный номер  // временно для показа
  ctmInp      : comp,
  ctmOut      : comp,
  wTypeGP     : word,
  cNrecGP     : comp,
  wUslNakl    : word,
  SP          : word,
  cSpMnPlDop  : comp,
  cAnalEx0    : comp,
  cAnalEx1    : comp,
  cAnalEx2    : comp,
  cAnalEx3    : comp,
  cAnalEx4    : comp,
  cAnalEx5    : comp,
  cAnalEx6    : comp,
  cAnalEx7    : comp,
  cAnalEx8    : comp,
  cSaldTune   : comp,
  cPartyOch   : comp,
  cKompVed    : comp

)
with Index
(
 tmSyrSSZ00  =  cIzdSSZ + Num,
 tmSyrSSZ01  =  Nrec(Unique, Surrogate),
 tmSyrSSZ02  =  TypeSyr + cSyr + cOperPrev,
 tmSyrSSZ03  =  ctmInp,
 tmSyrSSZ04  =  ctmOut,
 tmSyrSSZ05  =  TypeSyr + cPodr,
 tmSyrSSZ06  =  cCardSN + cIzdSSZ + cSyr + cPodr + cMOL + cParty,
 tmSyrSSZ07  =  cSpMnpl,
 tmSyrSSZ08  =  TypeSyr + cSyr + cOperPrev + cAnalEx0 + cAnalEx1 + cAnalEx2 + cAnalEx3 + cAnalEx4 +
                        cAnalEx5 + cAnalEx6 + cAnalEx7 + cAnalEx8

);

table struct tmSyrSSZOst
(
  Nrec        : comp,
  cIzdSSZ     : comp,     // ссылка на tmIzdSSZ
  cSyrSSZ     : comp,     // ссылка на норму
  wTypeSpMnPl : word,
  cSpMnPl     : comp,
  Num         : word,     // номер по порядку
  TypeSyr     : word,     // код группы КАU тип сырья
  cSyr        : comp,     // ссылка на сырье
  cOperPrev   : comp,     // ссылка на позицию МК (ссылка на предыдущую операции)

  dKolNorm    : double,   // кол-во по норме
  dKolFact    : double,   // кол-во по факту
  dKolPodr    : double,   // кол-во в цехе
  dKolManuf   : double,   // кол-во в других подр.
  dKolFactDop : double,   // кол-во по факту (дополнительное поле для разных режимов)
  cPodr       : comp,     // ссылка на подр.
  cMOL        : comp,     // ссылка на MOL
  cParty      : comp,     // ссылка на партию
  cSyrSrc     : comp,     // ссылка на заменяемое сырье
  dKolNormSrc : double,   // кол-во заменяемого сырья по норме
  cOtpEd      : comp,     // ссылка на отпускные единицы измерения
  cCardSN     : comp,     // ссылка на серийный номер  // временно для показа
  wFlOk       : word,     // флаг определения всех
  wFlOkDop    : word,     // флаг определения всех
  wKolSerNum  : word,
  ctmInp      : comp,
  ctmOut      : comp,
  wVidSopr    : word,
  cKatSopr    : comp,     // ссылка на накладную
  cSpSopr     : comp,     // ссылка на позицию накладной/акта
  wFlag       : word,     // флаг для признака обработки накладной
  cKolSSZ     : comp,      // Ссылка на таблицу остатков
  wUslNakl    : word,
  cUnicMCOperITD  : comp,
  wTypeGP     : word,
  cNrecGP     : comp,
  wFlagBy     : word,
  cRoleDop    : comp,
  wKodGrKAUDop: word,
  cAnalDop    : comp,
  wPriznPrice : word,
  wUslFormNakl: word,  // будем использовать как битовую маску
  wFlagZamen  : word,
  ctmDocZamen : comp,
  wTypeDZamen : word,
  cDocZamen   : comp,
  cVarZamen   : comp,
  wWarActZam  : word,
  SP          : word,
  cSpMnPlDop  : comp

)
with Index
(
 tmSyrSSZOst00  =  cIzdSSZ + Num,
 tmSyrSSZOst01  =  Nrec(Unique, Surrogate),
 tmSyrSSZOst02  =  TypeSyr + cSyr +cOperPrev,
 tmSyrSSZOst03  =  ctmInp,
 tmSyrSSZOst04  =  ctmOut,
 tmSyrSSZOst05  =  TypeSyr + cPodr,
 tmSyrSSZOst06  =  wFlOk + cIzdSSZ,
 tmSyrSSZOst07  =  cSyrSSZ + cSyrSrc + cPodr + cParty + cMOL,
 tmSyrSSZOst08  =  cSyrSSZ + TypeSyr + cSyr + cPodr + cOperPrev + cParty + cMOL + cSyrSrc,
 tmSyrSSZOst09  =  cCardSN + cIzdSSZ + cSyr + cPodr + cMOL + cParty,
 tmSyrSSZOst10  =  cKolSSZ,
 tmSyrSSZOst11  =  cSyrSrc,
 tmSyrSSZOst12  =  cSpMnpl,
 tmSyrSSZOst13  =  cIzdSSZ + TypeSyr + cSyr + cOperPrev,
 tmSyrSSZOst14  =  wFlOkDop,
 tmSyrSSZOst15  =  cCardSN + cOperPrev,
 tmSyrSSZOst16  =  wFlagZamen + cIzdSSZ

);


table struct tmUnicMCOperITD
(
  Nrec        : comp,
  TypeIzd     : word,     // код группы КАU МЦ/Усл
  cIzd        : comp,     // ссылка на МЦ
  cRole1      : comp,     // роли
  TypeAnal1   : word,     // код группы КАU для начала поз.МК
  cAnal1      : comp,     // для начала поз.МК
  cRole2      : comp,     // роли
  TypeAnal2   : word,     // и т.д
  cAnal2      : comp,     // и т.д
  dKolUchEd   : double,   // количество в учетных единицах для без ЦУ
  dKolUchEdRas: double,   // количество в учетных распределено
  LevelPlanIn : word,
  wKolSSZOst  : word,       // количество записей по остаткам
  dKolSSZOst  : double,     // сумма всех остатков в учетных единицах
  dKolSSZOstRas: double,     // сумма всех остатков в учетных единицах распределено
  wUslCelUch  : word,      // условие поиска остатков
  cAnalOperPV    : comp,
  cAnalPartyPV   : comp,
  cAnalSerialPV  : comp,
  cAnalOperSyr   : comp,
  cAnalPartySyr  : comp,
  cAnalSerialSyr : comp,
  cAnalEx0    : comp,
  cAnalEx1    : comp,
  cAnalEx2    : comp,
  cAnalEx3    : comp,
  cAnalEx4    : comp,
  cAnalEx5    : comp,
  cAnalEx6    : comp,
  cAnalEx7    : comp,
  cAnalEx8    : comp,
  cSaldTune   : comp,
  wFlagBit    : word,
  dPrihod     : double,
  dRashod     : double,
  cPodr       : comp

)
with Index
(
  tmUnicMCOperITD00  =  Nrec(Unique, Surrogate),
  tmUnicMCOperITD01  =  TypeIzd + cIzd + TypeAnal1 + cAnal1 + TypeAnal2 + cAnal2,
  tmUnicMCOperITD02  =  TypeAnal1 + cAnal1 + TypeIzd + cIzd,
  tmUnicMCOperITD03  =  TypeAnal1 + cAnal1 + cAnalOperPV + cAnalSerialPV + cAnalOperSyr +
      cAnalSerialSyr + cAnalPartyPV + cAnalPartySyr + TypeIzd + cIzd,
  tmUnicMCOperITD04  =  TypeIzd + cIzd + cAnal1 + cAnalEx0 + cAnalEx1 + cAnalEx2 + cAnalEx3 + cAnalEx4 +
                        cAnalEx5 + cAnalEx6 + cAnalEx7 + cAnalEx8

);

table struct tmGP_for_UnicMC
(
  Nrec              : comp,
  cUnicMCOperITD    : comp,
  TypeIzd           : word,     // код группы КАU МЦ/Усл
  cIzd              : comp      // ссылка на МЦ
)
with Index
(
  tmGP_for_UnicMC00  =  Nrec(Unique, Surrogate),
  tmGP_for_UnicMC01  =  cUnicMCOperITD + TypeIzd + cIzd
);

table struct tmLevelPlan1
(
  Nrec            : comp,
  cUnicMCOperITD  : comp,
  cUnicITD        : comp,
  cSpObAccIst     : comp,
  cSpObjAccPriem  : comp
)
with Index
(
  tmLevelPlan100  =  Nrec(Unique, Surrogate),
  tmLevelPlan101  =  cUnicMCOperITD + cUnicITD,
  tmLevelPlan102  =  cUnicITD + cUnicMCOperITD
//  tmLevelPlan103  =  cUnicMCOperITD + cUnicITD //,
//  tmLevelPlan104  =  cSpObAccIst,
//  tmLevelPlan105  =  cSpObjAccPriem

);


table struct tmKolSSZ
(
  Nrec             : comp,
  cSyrSSZ           : comp,     // ссылка на tmSyrSSZ
  cUnicMCOperITD    : comp,
  cPodr             : comp,     // ссылка на подр.
  cMOL              : comp,     // ссылка на MOL
  cParty            : comp,     // ссылка на партию
  wTypeGP           : word,     // тип МЦ Услуга
  cGP               : comp,     // ссылка на готовую продукции
  cMC               : comp,     // ссылка на заменяемую МЦ
  dKolManuf         : double,   // кол-во в других подр.
  SP                : word,
  SvOst             : double,   // свободные осатки
  Raspr             : double,   // распределено
  ZamenaOst         : double,   // замена в учетных
  ZamenaCeh         : double,   // сколько передано в цех
  ZamenaSk          : double,   // сколько заменено
  ZamenaNaSK        : double,   // на сколько заменено в учетных
  cOtpEd            : comp,     // ссылка на отпускные единицы измерения
  flag              : word,     // для замен (пока на всякий случай)
  wPrior            : word,      // приоритет
  cIzdSSZ           : comp,      // ссылка на tmIzdSSZ
  cSpObjAccPr       : comp,
  DatePrich         : date,
  dCenaPart         : double,
  cDocZamen         : comp,
  cAnalEx0    : comp,
  cAnalEx1    : comp,
  cAnalEx2    : comp,
  cAnalEx3    : comp,
  cAnalEx4    : comp,
  cAnalEx5    : comp,
  cAnalEx6    : comp,
  cAnalEx7    : comp,
  cAnalEx8    : comp,
  cSaldTune   : comp

)
with Index
(
 tmKolSSZ00  =  cUnicMCOperITD + cPodr + cMOL + cParty + cSaldTune + cAnalEx0 + cAnalEx1 + cAnalEx2 + cAnalEx3 + cAnalEx4 + cAnalEx5 + cAnalEx6 + cAnalEx7 + cAnalEx8,
 tmKolSSZ01  =  cSyrSSZ,
 tmKolSSZ02  =  Nrec(Unique, Surrogate),
 tmKolSSZ03  =  cUnicMCOperITD + wPrior + DatePrich,
 tmKolSSZ04  =  cMC + cPodr + cMOL + cParty,
 tmKolSSZ05  =  cIzdSSZ,
 tmKolSSZ06  =  cUnicMCOperITD + DatePrich + cParty + cPodr + cMOL,
 tmKolSSZ07  =  cDocZamen

);

table struct tmRazrezSSZ
(
  Nrec             : comp,
  cUnicMCOperITD    : comp,
  cPodr             : comp,     // ссылка на подр.
  wPodr             : word,
  cParty            : comp,     // ссылка на партию
  wParty            : word,     // 0 - не агрегируем, иначе - агрегируем
  cMOL              : comp,     // ссылка на MOL
  wMOL              : word,      // 0 - не агрегируем, иначе - агрегируем
  wPrior            : word,      // приоритет
  wFlagZamen        : word
)
with Index
(
 tmRazrezSSZ00  =  cUnicMCOperITD + cPodr + cParty + cMOL,
 tmRazrezSSZ01  =  Nrec(Unique, Surrogate),
 tmRazrezSSZ02  =  cUnicMCOperITD + wFlagZamen
);

table struct tmSerialSSZ
(
//  cNrec       : comp,
  cSyrSSZ     : comp,     // ссылка на tmSyrSSZ

  cMC         : comp,
  cPodr       : comp,     // с сылка на подр.
  cMOL        : comp,     // ссылка на MOL
  cParty      : comp,     // ссылка на партию
  cCardSN     : comp,     // ссылка на серийный номер
  isMark      : word      // пометка
)
with Index
(
 tmSerialSSZ00  =  cSyrSSZ,
 tmSerialSSZ01  =  cCardSN
);

table struct tmSerialOstSSZ
(
//  cNrec       : comp,
  cSyrSSZOst     : comp,     // ссылка на tmSyrSSZ

  cCardSN     : comp,     // ссылка на серийный номер
  isMark      : word      // пометка
)
with Index
(
 tmSerialOstSSZ00  =  cSyrSSZOst + cCardSN,
 tmSerialOstSSZ01  =  cCardSN
);


table struct tmPodrSSZ
(
//  cNrec       : comp,
  cSyrSSZ     : comp,     // ссылка на tmSyrSSZ

  cPodr       : comp,     // ссылка на подразделение
  cMOL        : comp,     // ссылка на MOL
  cPodrManuf  : comp,     // ссылка на кладовку
  cMOLManuf   : comp      // ссылка на MOL кладовку
)
with Index
(
 tmPodrSSZ00  =  cSyrSSZ
);

table struct tmPerSSZ
(
  cSaldTune     : comp,
  cRoleOtk      : comp,
  wKodGrOtk     : word,
  cAnalOTK      : comp,
  cAnalPodbOst  : comp,
  cRoleOtkMK    : comp,
  wKodGrOtkMK   : word,
  cAnalOTKMK    : comp,
  wOtobrAnal    : word,
  cRoleOtkMKOt  : comp,
  wKodGrOtkMKOt : word,
  wKategor      : word,
  FlBy          : word,
  cMolGlCeh     : comp,
  cCeh          : comp,
  cMol          : comp,
  cCehTo        : comp,
  cMolTo        : comp,
  wMode         : word,
  wFlByDop      : word,
  wKolPrice     : word,
  wNaborSyr     : word,
  cNaborSyr     : comp,
  wHaraktPok    : word,
  wHaraktSobPr  : word,
  wHaraktSubP   : word,
  wHaraktFant   : word,
  cAttrShetSub  : comp,
  cShetSubPok   : comp,
  cShetSubSobPr : comp,
  cShetSubFant  : comp,
  cShetSubSubP  : comp,
  FlagByteNew   : word,
  dChasyDney    : double,
  wFlSaldTune   : word,
  cAccKompVed   : comp,
  cStatusKompVed: comp,
  cRoleKompVed  : comp,

  cRoleKomplInKV: comp,
  cRoleIzgotInKV: comp,

  wRolZakazEx   : word,
  wRolGoIzdEx   : word,
  wRolWorkEx    : word,
  wRolKompVedEx : word,
  wRolKomplectEx: word,
  wRolGRKomplEx : word,
  wRolOcheredEx : word,
  wRolSostEx    : word,
  wRolSerNumEx  : word,
  cRoleOcher_Doc: comp,
  cRoleOcherSpKom: comp,
  cAttrZakaz    : comp,
  cAttrKomplect : comp

)
with Index
(
 tmPerSSZ00  =  cRoleOtk
);

table struct tmVarOperSSZ
(
  cUnicMCOperITD : comp,
  cUnicMCDop     : comp,
  wVarOper       : word
)
with Index
(
 tmVarOperSSZ00  =  cUnicMCOperITD + cUnicMCDop,
 tmVarOperSSZ01  =  cUnicMCDop
);


table struct tmProfilirSSZ
(
  cNrec          : comp,
  Num            : word,
  NumDop         : word,
  NameFunct      : string,
  cStart         : _DateTime,
  cEnd           : _DateTime,
  cDlit          : comp,
  cDlitDop       : double,
  Coment         : string
)
with Index
(
 tmProfilirSSZ00  =  cNrec(Unique, Surrogate),
 tmProfilirSSZ01  =  Num + NumDop
);

table struct tmRazrezSerialSSZ
(
  Nrec              : comp,
  wSP               : word,     // признак склад-производство 0 - склад, 1 - производство
  dRest             : date,
  cMC               : comp,     // ссылка на МЦ
  cCardSN           : comp,     // ссылка на серийный номер
  cUnicMCOperITD    : comp,
  cPodr             : comp,     // ссылка на подр.
  wPodr             : word,
  cParty            : comp,     // ссылка на партию
  wParty            : word,     // 0 - не агрегируем, иначе - агрегируем
  cMOL              : comp,     // ссылка на MOL
  wMOL              : word,      // 0 - не агрегируем, иначе - агрегируем
  wKauOper          : word,
  cRoleOper         : comp,
  cAnalOper         : comp,
  VidOper           : word
)
with Index
(
  tmRazrezSerialSSZ00  =  cUnicMCOperITD + cPodr + cParty + cMOL,
  tmRazrezSerialSSZ01  =  Nrec(Unique, Surrogate),
  tmRazrezSerialSSZ02  =  cMC + cAnalOper + cPodr + cParty + cMOL + cCardSN,
  tmRazrezSerialSSZ03  =  cMC + cAnalOper + cCardSN + cPodr + cParty + cMOL
);


table struct tmRestSerialSSZ
(
  //cnRec          : comp,
  wSP            : word,     // признак склад-производство
  dRest          : date,
  cMC            : comp,     // ссылка на МЦ
  cCardSN        : comp,     // ссылка на серийный номер
  cOper          : comp,
  cUnicMCOperITD : comp,
  cPodr          : comp,     // ссылка на подр.
  cParty         : comp,     // ссылка на партию
  cMOL           : comp,     // ссылка на MOL
  dKol           : double,   // остаток
  dKolIn         : double,   // приход
  dKolOut        : double    // расход
)
with Index
(
  tmRestSerialSSZ01  = wSP + dRest + cMc + cPodr + cMol + cParty + cUnicMCOperITD,
  tmRestSerialSSZ02  = cUnicMCOperITD + cCardSN + cPodr + cMol + cParty,
  tmRestSerialSSZ03  = cMC + cOper + cCardSN + cPodr + cMol + cParty
);


table struct tmForSpisSerialSSZ
(
  Nrec              : comp,
  wSP               : word,     // признак склад-производство 0 - склад, 1 - производство
  cMC               : comp,     // ссылка на МЦ
  cCardSN           : comp,     // ссылка на серийный номер
  cOper             : comp,
  cUnicMCOperITD    : comp,
  cPodr             : comp,     // ссылка на подр.
  cParty            : comp,     // ссылка на партию
  cMOL              : comp,     // ссылка на MOL
  dKol              : double,   // остаток
  dKolSpis          : double,   // списано
  wFlagBit          : word
)
with Index
(
  tmForSpisSerialSSZ00  =  cUnicMCOperITD + cCardSN + cPodr + cParty + cMOL,
  tmForSpisSerialSSZ01  =  cMC + cCardSN + cOper + cPodr + cMOL + cParty,
  tmForSpisSerialSSZ02  =  Nrec(Unique, Surrogate)
);

table struct tmForSpisSerialEx
(
  Nrec              : comp,
  wSP               : word,     // признак склад-производство 0 - склад, 1 - производство
  cMC               : comp,     // ссылка на МЦ
  cCardSN           : comp,     // ссылка на серийный номер
  cOper             : comp,
  cUnicMCOperITD    : comp,
  cPodr             : comp,     // ссылка на подр.
  cParty            : comp,     // ссылка на партию
  cMOL              : comp,     // ссылка на MOL
  dKol              : double,   // остаток
  dKolSpis          : double,   // списано
  wFlagBit          : word
)
with Index
(
  tmForSpisSerialEx00  =  cUnicMCOperITD + cCardSN + cPodr + cParty + cMOL,
  tmForSpisSerialEx01  =  cMC + cCardSN + cOper + cPodr + cMOL + cParty,
  tmForSpisSerialEX02  =  Nrec(Unique, Surrogate)
);


table struct tmPriceDoc
(
  cKLPrice          : comp,     // признак склад-производство 0 - склад, 1 - производство
  cOrg              : comp,     // ссылка на МЦ
  dPrice            : Date,     // "дата формирования прайс-листа"
  cStatus           : comp,     // "Статус прайс-листа"
  dBeg              : Date,     // "Начало периода действия прайс-листа"
  dEnd              : Date      // "Окончание периода действия прайс-листа"
)
with Index
(
  tmPriceDoc00  =  cKLPrice,
  tmPriceDoc01  =  dPrice
);

table struct tmOtrOstSSZ
(
  Nrec             : comp,
  cUnicMCOperITD    : comp,
  cIzd              : comp,
  wTypeIzd          : word,
  cPodr             : comp,     // ссылка на подр.
  cOper             : comp,
  wPodr             : word,
  cParty            : comp,     // ссылка на партию
  cMOL              : comp,     // ссылка на MOL
  SP                : word,
  dKolOtr           : double
)
with Index
(
 tmOtrOstSSZ01  =  cIzd + wTypeIzd + cOper + cPodr + cParty + cMOL,
 tmOtrOstSSZ02  =  cUnicMCOperITD
);


table struct tmGlOtrOstSSZ
(
  Nrec             : comp,
  cIzd              : comp,
  cSaldTune         : comp,
  cKitKau           : comp,
  cPodr             : comp,     // ссылка на подр.
  cRole             : comp,
  wKauOper          : word,
  cOper             : comp,
  wPodr             : word,
  cParty            : comp,     // ссылка на партию
  cMOL              : comp,     // ссылка на MOL
  cRoleOtk          : comp,
  wKodKauOtk        : word,
  cAnalOstOtk       : comp,
  dKolOtr           : double
)
with Index
(
 tmGlOtrOstSSZ01  =  cIzd + cOper + cPodr + cParty + cMOL
);


table struct tmDocZamen
(
  Nrec             : comp,
  wTypeDocZam      : word,
  cUnicMCOperITD   : comp,
  wTypeSpMnPl      : word,
  cSpMnPl          : comp,
  cIzd             : comp,
  cOtpEd           : comp,
  cIzdZamen        : comp,
  cGP              : comp,
  cPodr            : comp,
  cDopAn           : comp,
  cStatus          : comp,
  dKolIzd          : double,
  dKolZamen        : double,
  dKolZamenNew     : double,
  dKolLimit        : double,
  dKoef            : double,
  wTypeDoc         : word,
  cDoc             : comp,
  NumField         : word,
  NumFieldZamen    : word,
  wWarActZam       : word,
  cNBSIzm          : comp,
  cNBSIzmZam       : comp,
  cAnalEx0    : comp,
  cAnalEx1    : comp,
  cAnalEx2    : comp,
  cAnalEx3    : comp,
  cAnalEx4    : comp,
  cAnalEx5    : comp,
  cAnalEx6    : comp,
  cAnalEx7    : comp,
  cAnalEx8    : comp,
  cSaldTune   : comp

)
with Index
(
 tmDocZamen00  =  Nrec(Unique, Surrogate),
 tmDocZamen01  =  cIzd + cIzdZamen + cPodr,
 tmDocZamen02  =  wTypeSpMnPl + cSpMnPl,
 tmDocZamen03  =  cUnicMCOperITD + wTypeDocZam,// + cPodr,
 tmDocZamen04  =  wTypeDocZam + cIzd + cIzdZamen + cPodr + cGP,
 tmDocZamen05  =  wTypeDocZam + cIzd + cIzdZamen + cGP + cPodr,
 tmDocZamen06  =  wTypeDoc + cDoc + cSpMnPl + cUnicMCOperITD

);

table struct tmStatusSp
(
  wType            : word,
  cStatus          : comp
)
with Index
(
 tmStatusSp01  =  wType + cStatus

);


table struct tmCardSNForError
(
  cSpMnPlan     : comp,
  cSpMnPl       : comp,
  cSpMnPlCardSN : comp,
  cCardSN       : comp,
  wPrizn        : word
)
with Index
(
 tmCardSNForError00  =  cSpMnPlan + cSpMnPl + cSpMnPlCardSN + wPrizn,
 tmCardSNForError01  =  cSpMnPl + wPrizn

);

table struct tmRazSaldTune
(
  Nrec          : comp,
  cSaldTune     : comp,
  cRole         : comp,
  wKau          : word,
  wNum          : word
)
with Index
(
 tmRazSaldTune00  =  Nrec(Unique, Surrogate),
 tmRazSaldTune01  =  cRole + wKau,
 tmRazSaldTune02  =  wNum
);


table struct tmPodrListIn
(
  cPodr       : comp,     // ссылка на подразделение
  cMOL        : comp
)
with Index
(
 tmPodrListIn00  =  cPodr + cMOL
);

table struct tmGrafObLs
(
  wKod       : word,     // ссылка на подразделение
  cAnal      : comp,
  cZnach     : comp
)
with Index
(
 tmGrafObLs00  =  wKod + cAnal + cZnach,
 tmGrafObLs01  =  cZnach+ wKod + cAnal
);



#endif //__SSZVTBL_VPP
