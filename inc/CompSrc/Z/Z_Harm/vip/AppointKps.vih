//------------------------------------------------------------------------------
//                                                      (c) корпорация Галактика
// Галактика ERP 8.1 - Управление персоналом
// Работа со списками условий труда на рабочем месте
//------------------------------------------------------------------------------

#component "Z_Harm"

#include AppointKps.inc

#doc
Работа со списками условий труда на рабочем месте
#end
ObjInterface IAppointKps;

  procedure UpdateKps(app_Nrec, advises_nrec, inf_nrec: comp);

end;

#doc
Расширение №1 интерфейса IAppointKps
#end
ObjInterface IAppointKps1;

  procedure CopyKPS(NrecFrom, NrecTo: comp; KPStypeFrom, KPSTypeTo: integer);

end;

#doc
Расширение №2 интерфейса IAppointKps
#end
ObjInterface IAppointKps2;

  #doc
  Код особых условий "основных" условий работы заданного назначения
  #end
  function GetOU(_Appoint: comp): string;

  #doc
  Код КПС "основных" условий работы заданного назначения
  #end
  function GetKPS(_Appoint: comp): string;

  #doc
  Код территориальных условий "основных" условий работы заданного назначения
  #end
  function GetTU(_Appoint: comp): string;

  #doc
  Список всех особых условий заданного назначения
  #end
  function GetAllOU(_Appoint: comp): string;

  #doc
  Список всех КПС заданного назначения
  #end
  function GetAllKPS(_Appoint: comp): string;

  #doc
  Инициализация условий работы при выборе должности или подразделения в назначении
  #end
  procedure InitKPS(_Appoint, _Dept, _Post: comp);

  #doc
  Ссылка на "основные" условия работы для заданного назначения
  #end
  function GetMainKPS(_Appoint: comp // #docl Ссылка на назначение (Appointments.Nrec)
                     ): comp; // #docl Возвращает ссылку на Advises
  #doc
  Выбор условий работы для заданного назначения
  #end
  procedure PickMainKPS(_Appoint: comp // #docl Ссылка на назначение (Appointments.Nrec)
                       );
  #doc
  Удаление "основных" условий работы назначения
  #end
  procedure DeleteMainKPS(_Appoint: comp // #docl Ссылка на назначение (Appointments.Nrec)
                         );
  #doc
  Удаление всех условий работы ставки штатного расписания или назначения
  #end
  procedure DeleteAllKPS(KPSType: integer // #docl Константа cgKpsType_Staff или cgKpsType_Appoint
                       ; app_Nrec: comp // #docl Ссылка на ставку ШР (StaffStruct.Nrec) или на назначение (Appointments.Nrec)
                        );
end;

#doc
Расширение №3 интерфейса IAppointKps
#end
ObjInterface IAppointKps3;
  #doc
  Код подкласса условий труда заданного назначения
  #end
  function GetKlassPost(_Appoint: comp): string;
end;

#doc
Расширение №4 интерфейса IAppointKps
#end
ObjInterface IAppointKps4;
  #doc
  Код особых условий труда
  #end
  function GetAdvOU(_Advises: comp): string;

  #doc
  Код КПС
  #end
  function GetAdvKPS(_Advises: comp): string;

  #doc
  Код подкласса условий труда
  #end
  function GetAdvKlass(_Advises: comp): string;

  #doc
  Код территориальных условий
  #end
  function GetAdvTU(_Advises: comp): string;

  #doc
  Выбор ссылки на Advises из условий труда по назначению
  #end
  function PickNRecKPS(_Appoint, _Advises: comp): comp;

  #doc
  Замена "основных" условий работы назначения
  #end
  procedure ChangeMainKPS(_Appoint, _NewAdvises: comp);
end;

#doc
Расширение №5 интерфейса IAppointKps
#end
ObjInterface IAppointKps5;
  #doc
  Выбор ссылки на Advises из условий труда по подразделению и должности
  (для новой записи в БД, когда ее вставка еще не произошла)
  #end
  function PickNRecKPSByDepAndPost(_Appoint, _Department, _Post, _Advises: comp): comp;
end;

VipInterface AppointKps
  implements IAppointKps, IAppointKps1, IAppointKps2, IAppointKps3, IAppointKps4, IAppointKps5
  licensed(free)
  parameters(AppNrec: comp; kps_readonly: boolean);
