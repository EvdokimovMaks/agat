//******************************************************************************
//                                                      (с) корпорация Галактика
// Галактика 8.1 - Заработная плата
// Менеджер дополнительной аналитики для платежных документов.
//******************************************************************************
//==============================================================================
// Префиксы:
//  f_  - ([f]ields) переменные-поля скринов
//  m_  - ([m]embers) интерфейсные переменные
//  o_  - ([o]bj) ссылки на obj-интерфейсы
//  i_  - (v[i]p) ссылки на vip-интерфейсы
//  cf_ - ([c]alculated [f]ield) вычисляемые поля (выражения)
//==============================================================================

#ifndef _PaymentDocsAdditionalAnaliticsManager_obj_INCLUDED_
#define _PaymentDocsAdditionalAnaliticsManager_obj_INCLUDED_

#ifdef ComponentVersion
#component "Z_PAYREP"
#end
  #doc
    Менеджер дополнительной аналитики для платежных документов. </brief>
    Дополнительно осуществляет "Фильтрацию" данных о выплатах по аналитике КБК, ТXО, Группам и Категориям работников.
    Информацию о заданных "группировках" aka "фильтрах" по аналитике и проч. Реализация получает через DSK.
    Из DSK поднимаются следующие настройки:
      Выбранный фильтр:     'PDAAM_SelectedFilter': word;
      Значения фильтров:
      Фильтр по КБК:        'PDAAM_KBK' - маркер (:longint)
      Дебит/кредит КБК:     'PDAAM_DebitCredit': word;
      Фильтр по TXO:        'PDAAM_TXO' - tParam (s20)
      Фильтр по Группам:    'PDAAM_Group' - маркер (:longint)
      Фильтр по Категориям: 'PDAAM_Category' - маркер (:longint)

  #end
  objinterface IPaymentDocsAdditionalAnaliticsManager;

    #doc
      Формирует дополнительную аналитику по реестру </brief>
      typeOfPaymentDoc - тип платежного документа (ведомость - coSPPLVED; реестр - coSPPLBAN)
      refToPaymentDoc - ссылка на платежный документ (ведомость/реестр) (spplban.nrec, spplved.nrec)
    #end
    public function InsertPayment( typeOfPaymentDoc: longint; refToPaymentDoc: tNrec; percent: double; sum: double ): boolean;

    #doc
      Удаляет дополнительную аналитику по реестру </brief>
      typeOfPaymentDoc - тип платежного документа (ведомость - coSPPLVED; реестр - coSPPLBAN)
      refToPaymentDoc - ссылка на платежный документ (ведомость/реестр) (spplban.nrec, spplved.nrec)
    #end
    public function DeletePayment( typeOfPaymentDoc: longint; refToPaymentDoc: tNrec ): boolean;

    #doc
      Обновляет дополнительную аналитику по реестру </brief>
      typeOfPaymentDoc - тип платежного документа (ведомость - coSPPLVED; реестр - coSPPLBAN)
      refToPaymentDoc - ссылка на платежный документ (ведомость/реестр) (spplban.nrec, spplved.nrec)
    #end
    public function UpdatePayment( typeOfPaymentDoc: longint; refToPaymentDoc: tNrec; percent: double; sum: double ): boolean;

    #doc
      Обновляет данные в "Шапке" (SBBAN/PLATVED);
      typeOfPaymentDoc - тип платежного документа (ведомость - coSPPLVED; реестр - coSPPLBAN)
      refToHeadTable - ссылка на шапку платежного документа (ведомость/реестр) (SBBAN.nrec, PLATVED.nrec)
    #end
    public function UpdateHeadData( typeOfPaymentDoc: longint; refToHeadTable: tNrec ): boolean;

  end; //objinterface IPaymentDocsAdditionalAnaliticsManager
#end
