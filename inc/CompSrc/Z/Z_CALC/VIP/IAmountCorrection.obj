//------------------------------------------------------------------------------
//                                                     (c) корпорация ГАЛАКТИКА
// Галактика 8.1 - Заработная плата
// Объект для вычисления и уточнения величин (сумм, сбора, округлений...)
//------------------------------------------------------------------------------

#ifndef _IAMOUNTCORRECTION_OBJ_INCLUDED_
#define _IAMOUNTCORRECTION_OBJ_INCLUDED_

#ifdef ComponentVersion
  #component "Z_CALC"
#end

//------------------------------------------------------------------------------
objinterface IAmountCorrection;
  #doc
    производит перечитывание значений настроек
  #end
  procedure ReLoad;
  #doc
    для кода удержания возвращает связанный с ним код вида удержания сбора
  #end
  function GetFeeCode(SysCode: word): word;

  #doc
    возвращает ссылку на шкалу расчета для вида удержания с кодом SysCode
  #end
  function GetDefScale(SysCode: word): comp;

  #doc
    возвращает персональную ссылку на шкалу расчета для вида удержания с кодом SysCode
  #end
  function GetLscScale(SysCode: word; RefLsch: comp): comp;

  #doc
    возвращает неокругленную сумму сбора с суммы с учетом персональной шкалы
  #end
  function GetDueScaleSum(SysCode: word; Sum: double; Scale: comp): double;

  #doc
    возвращает процент сбора для вида удержания с кодом SysCode
  #end
  function GetDefDuePerc(SysCode: word): double;

  #doc
    возвращает персональный процент сбора для вида удержания с кодом SysCode
  #end
  function GetLscDuePerc(SysCode: word; RefLsch: comp): double;

  #doc
    возвращает неокругленную сумму сбора с суммы с учетом переданного процента
  #end
  function GetDuePercSum(SysCode: word; Sum, Percent: double): double;

  #doc
    возвращает величину усечения, заданную для вида удержания
  #end
  function GetTrim(SysCode: word): longint;

  #doc
    возвращает величину округления, используемую для округления сумм этого
    вида удержания SysCode с учетом правил округления для подразделения
  #end
  function GetDepTrim(SysCode: word; Dep: comp): longint;

  #doc
    возвращает величину округления для вида удержания SysCode, с учетом настроек
    и правил округления для лицевого счета
  #end
  function GetLscTrim(SysCode: word; RefLsch: comp): longint;

  #doc
    возвращает величину округления для данного вида удержания, с учетом настроек
    и правил округления для лицевого счета и подразделения
  #end
  function GetLscDepTrim(SysCode: word; Dep, RefLsch: comp): longint;

  #doc
    возвращает округленное значение суммы с учетом величины округления Size
  #end
  function GetTrimd(SysCode: word; Size: longint; Sum: double): double;

  #doc
    возвращает округленное значение суммы сбора с учетом величины округления Size
  #end
  function GetDueTrimd(SysCode: word; Size: longint; Sum: double): double;
end;

/*
  #doc
    возвращает величину округления, заданную для сбора с вида удержания
  #end
  function GetDueTrim(SysCode: word): longint;
  #doc
    возвращает величину округления, используемую для округления сумм сбора с
    вида удержания SysCode с учетом правил округления для подразделения
  #end
  function GetDepDueTrim(SysCode: word; Dep: comp): longint;
  #doc
    возвращает величину округления сбора с вида удержания SysCode, с учетом
    настроек и правил округления для лицевого счета
  #end
  function GetLscDueTrim(SysCode: word; RefLsch: comp): longint;
  #doc
    возвращает величину округления сбора с вида удержания SysCode, с учетом
    настроек и правил округления для лицевого счета и подразделения
  #end
  function GetLscDepDueTrim(SysCode: word; Dep, RefLsch: comp): longint;
*/

#end
