//------------------------------------------------------------------------------
//                                                      (c) корпорация Галактика
// Галактика 8.1 - Управление персоналом
// Работа с доплатами и рабочей корзиной
//------------------------------------------------------------------------------

#ifndef _SetRR_INCLUDED_
#define _SetRR_INCLUDED_

#ifdef ComponentVersion
#component "z_Staff"
#end

#doc
Работа с доплатами и рабочей корзиной
#end
objinterface ISetRR;

#doc
Перенос доплат по человеку из ставки
#end
Function SetRR (cApp: comp; // #docl ссылка на запись Appointments
                cOldRec: comp; // #docl ссылка на измененную ставку
                cContDoc: comp // #docl ссылка на содержимое приказа
                ): boolean;

#doc
Закрыть доплаты
#end
Function CloseRR(cPers : comp; cApp : comp; cStfStr : comp; cContDoc : comp) : boolean;

#doc
Закрываем надбавки по ШР для предыдущего назначения
#end
function SetEndRR (cPers: comp; cApp: comp; cStfStr: comp;
                   dd: date; sOrderNmb: string[20]; dOrderDate: date;
                   cContDoc: comp) : boolean;

#doc
Восстановление закрытых надбавок для предыдущего назначения
#end
procedure SetNoEndRR (cPers: comp; cApp : comp; cContDoc: comp; cOldEndDate : date);

#doc
Сообщения в корзину об удалении доплат
#end
procedure DelRaiseMsg(cRaise: comp; cPers: comp; cApp: comp);

#doc
Сообщения в корзину о добавлении доплаты
#end
procedure MadeMsg(cRaise: comp; cPers: comp; cApp: comp);

#doc
Модификация либо открытие нового сообщения в РК <brief>
Получаем в качестве параметров флаги, что и как менять
#end
Procedure UpdRaiseZarSignal(cRaise: comp; cPers: comp; cApp: comp; bDataOkMod: boolean;
                            bSummaMod: boolean; bDataNMod: boolean;
                            bVidOplMod: boolean; bCurrMod: boolean);

#doc
Модификация либо открытие нового сообщения в РК о том, что снизили на некий процент доплату <brief>
Получаем в качестве параметров флаги, что и как менять
#end
Procedure ReductionRaise(cRaise: comp; cPers: comp; cApp: comp; bDataOkMod: boolean;
                         bSummaMod: boolean; bDataNMod: boolean;
                         bVidOplMod: boolean; bCurrMod: boolean);

end;

objinterface ISetRR1;

#doc
Сообщения в корзину об изменении доплаты
#end
procedure UpdRaiseMsg(cHRaise: comp; // #docl Nrec записи из истории доплаты
                      cPers: comp;   // #docl Nrec сотрудника
                      cApp: comp;    // #docl Nrec назначения
                      wSignal: word  // #docl флаг, отвечающий за то, какие данные изменились
                     );

end;

objinterface ISetRR2;

#doc
Сообщения в корзину о добавлении доплаты c днями и часами
#end
procedure MadeMsgDayHour(cRaise: comp; cPers: comp; cApp: comp);

end;

objinterface ISetRR3;

#doc
Сообщения в корзину о изменении доплаты при изменении тарифа с изменением данных о приказе
#end
procedure UpdRaiseZarSignalAndModify(cRaise: comp; cPers: comp; cApp: comp; OrdDate: date; OrdNmb : string);

end;


vipinterface SetRR
  implements ISetRR, ISetRR1, ISetRR2, ISetRR3
  Licensed (free);

#end
