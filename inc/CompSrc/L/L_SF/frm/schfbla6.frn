/*
╔═══════════════════════════════════════════════════════════════════════════╗
║                     (c) 1994,2000 корпорация ГАЛАКТИКА                    ║
║ Проект        : ГАЛАКТИКА                                                 ║
║ Система       : Оперативный контур                                        ║
║ Версия        : 5.73                                                      ║
║ Назначение    : Печать счетов-фактур (бланки СФ, с 01.01.2001)            ║
║ Ответственный : Полежай Алексей Геннадьевич                               ║
║ Параметры     : нет                                                       ║
╚═══════════════════════════════════════════════════════════════════════════╝
*/

#doc
Счет-фактура (формат A4)
#end
.linkform 'Schfrees_71' prototype is 'Schfrees'
.NameInList 'Счет-фактура (формат A4), с 2006г.'
.Group 'Бланки счетов-фактур (с 11.05.2006)'
.Group 'Country' subGroup 'Russia'
.set filler '-'
!-------------------------------------------------------------------
.create view vSchf
From
  SchFact
where
((
  nSchFact == SchFact.nRec
));
!-------------------------------------------------------------------
.var
  StrPrim1, StrPrim2 : String;
  is2004 : boolean;
  EmptyField : string;

  NumSigner  : word;
  KolSigners : word;
  arrFIO_Dir      : array[1..10] of string;
  arrPosition_Dir : array[1..10] of string;
  arrDover_Dir    : array[1..10] of string;
  arrFIO_Buh      : array[1..10] of string;
  arrPosition_Buh : array[1..10] of string;
  arrDover_Buh    : array[1..10] of string;
  isDirector      : boolean;
  isBuh           : boolean;
  wTipUser        : word;
.endvar
.begin
  is2004 := (ppPrintParam and 64) <> 0;
  EmptyField := if(wCountry=0,'-','');
end.
!-------------------------------------------------------------------
.if SetDateRange
.end
.{CheckEnter Schf
.if HeaderGroup
.end
.begin
  if (vSchf.GetFirst SchFact = 0)
    wTipUser := SchFact.TipUser;

  for (NumSigner := 1; NumSigner <= 10; NumSigner++)
  {
    arrFIO_Dir      [NumSigner] := '';
    arrPosition_Dir [NumSigner] := '';
  }

  for (NumSigner := 1; NumSigner <= 10; NumSigner++)
  {
    arrFIO_Buh      [NumSigner] := '';
    arrPosition_Buh [NumSigner] := '';
  }

  NumSigner := 0;
end.
.fields
  NSF
  if (longint(dFact)<>0, DateToStr(dFact, '"DD" Mon YYYY г.'), '')

  if (Direct = 1,
      #f_(MyOrgName),
      #f_(OrgName))

  if (Direct = 1,
      #f_(MyOrgAddr),
      #f_(OrgAddr))

  if (Direct = 1, UnnORInn, OrgUnnORInn) + if (is2004, '/КПП', '') + ' продавца'
  if (Direct = 1,
      #f_(MyOrgINN + if (is2004 and (trim(MyOrgKPP) <> ''), ' / ' + MyOrgKPP, '')),
      #f_(OrgINN   + if (is2004 and (trim(OrgKPP)   <> ''), ' / ' + OrgKPP  , '')))

  #f_(GruzFrom)
  #f_(GruzTo)
!  #f_(if(InStr('№',PlatNo)<>0,PlatNo,if(Trim(PlatNo)<>'','№ '+PlatNo,'')))+
!  if (longint(PlatDat) <> 0, ' от '+DateToStr(PlatDat, '"DD" Mon YYYY г.'), '')

  #f_(PlatNo_Date)

  if (Direct <> 1,
      #f_(MyOrgName),
      #f_(OrgName))

  if (Direct <> 1,
      #f_(MyOrgAddr),
      #f_(OrgAddr))

  if (Direct <> 1, UnnORInn, OrgUnnORInn) + if (is2004, '/КПП', '') + ' покупателя'
  if (Direct <> 1,
      #f_(MyOrgINN + if (is2004 and (trim(MyOrgKPP) <> ''), ' / ' + MyOrgKPP, '')),
      #f_(OrgINN   + if (is2004 and (trim(OrgKPP)   <> ''), ' / ' + OrgKPP  , '')))

.endfields
.{?internal; is2004
 Ш                                                                                                                                        Приложение № 1 Ш
 Ш                                                                                                                     к Правилам ведения журналов учета Ш
 Ш                                                                                                              полученных и выставленных счетов-фактур, Ш
 Ш                                                                                                               книг покупок и книг продаж при расчетах Ш
 Ш                                                                                                                   по налогу на добавленную стоимость, Ш
 Ш                                                                                                             утвержденным постановлением Правительства Ш
 Ш                                                                                                       Российской Федерации от 2 декабря 2000 г. № 914 Ш
 Ш                                                                                                  (в ред. Постановлений Правительства РФ от 15.03.2001 Ш
 Ш                                                                                                       № 189, от 27.07.2002 № 575, от 16.02.2004 № 84, Ш
 Ш                                                                                                             от 11.05.2006 № 283, от 26.05.2009 № 451) Ш
.}

 Й                 Счет-фактура № @~@@@@@@@@@@@@@@@@@@@@@@@@ от @@@@@@@@@@@@@@@@@@@@@@@ (1) Й

 Й Продавец  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (2) Й
 Й Адрес  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (2а) Й
 Й @@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (2б) Й
 Й Грузоотправитель и его адрес  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (3) Й
 Й Грузополучатель и его адрес  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (4) Й
 Й К платежно-расчетному документу  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (5) Й
 Й Покупатель  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (6) Й
 Й Адрес  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (6а) Й
 Й @@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (6б) Й
.if Dopol
.fields
  Nazn
!  Dollarah
.endfields
 Й Дополнение (условия оплаты по договору (контракту), способ отправления и т.п.) Й
 Й @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Й
! И Составлен в  Д@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Д И
.end
.fields
  Dollar
.endfields
.{ CheckEnter FeeSignersMember_Schfrees_Dir
.begin
  NumSigner++;
  arrFIO_Dir      [NumSigner] := Signer_FIO_Director;
  arrPosition_Dir [NumSigner] := Signer_Position_Director;
  if (Signer_Dover_Director <> '')
    arrDover_Dir[NumSigner] := '(' + Signer_Dover_Director + ')';
end.
.}
.begin
  NumSigner := 0;
end.
.{ CheckEnter FeeSignersMember_Schfrees_Buh
.begin
  NumSigner++;
  arrFIO_Buh      [NumSigner] := Signer_FIO_MainBuh;
  arrPosition_Buh [NumSigner] := Signer_Position_MainBuh;
  if (Signer_Dover_MainBuh <> '')
    arrDover_Buh[NumSigner] := '(' + Signer_Dover_MainBuh + ')';
end.
.}
.{CheckEnter SchfKatSopr
.{CheckEnter SchfSpSopr
.{CheckEnter SchfSpSoprNalog
.} // SchfSpSoprNalog
.} // SchfSpSopr
.} // SchfKatSopr

 Ш                                                                                                                          Валюта: @@@@@@@@@@@@@@@@@@@  Ш
 Ш┌────────────────────────┬─────────┬──────────┬────────────┬───────────────┬───────────┬──────┬──────────────┬───────────────┬─────────────┬─────────┐ Ш
 Ш│ Наименование товара    │ Единица │Количество│   Цена     │   Стоимость   │В том числе│Нало- │ Сумма налога │   Стоимость   │   Страна    │  Номер  │ Ш
 Ш│(описание выполненных   │ измере- │          │ (тариф) за │ товаров (ра-  │   акциз   │говая │              │ товаров (ра-  │происхождения│ таможен-│ Ш
 Ш│ работ, оказанных       │   ния   │          │ единицу из-│ бот, услуг),  │           │ставка│              │ бот, услуг),  │             │ ной дек-│ Ш
 Ш│ услуг), имущественного │         │          │ мерения    │ имущественных │           │      │              │ имущественных │             │ ларации │ Ш
 Ш│ права                  │         │          │            │  прав, всего  │           │      │              │  прав, всего  │             │         │ Ш
 Ш│                        │         │          │            │  без налога   │           │      │              │с учетом налога│             │         │ Ш
 Ш├────────────────────────┼─────────┼──────────┼────────────┼───────────────┼───────────┼──────┼──────────────┼───────────────┼─────────────┼─────────┤ Ш
 Ш│          1             │     2   │     3    │      4     │       5       │     6     │   7  │       8      │       9       │      10     │    11   │ Ш
 Ш├────────────────────────┼─────────┼──────────┼────────────┼───────────────┼───────────┼──────┼──────────────┼───────────────┼─────────────┼─────────┤ Ш
.{CheckEnter SpSchf
.fields
  #f_(#SpName)
  #f_(if (SpPrMC = 3, '', SpOtpEd))
  if (SpPrMC = 101 or SpPrMC = 102, '-',
    if (SpPrMC = 3, '0.0', if (abs(SpKol) >= dMinKol, string(SpKol, 0, Kol_Pr), '-')))
#ifdef _RoundInDoc_
  if (SpPrMC = 3 or #isPrnPrice, 0.0, SpPrNoNds)
#else
  if (SpPrMC = 3 or #isPrnPrice, 0.0, SpSumNoNDS / SpKol)
#end
  SpSumNoNDS
  SpAkciz
  if (SpPrMC = 101, '-',
    if (SpPrMC = 102, if (SpPerc = -1, '-', String(SpPerc, 2, 0) + '/' + String(100 + SpPerc, 3, 0)),
      if (SpExistNDS or Abs(SpPerc) >= 0.01,
          String(SpPerc, if (SpPerc >= 10, 2, 1), 0) + ' %', '-')))
  if (SpPrMC = 101, '-',
    if (SpPrMC = 102, if (SpPerc = -1, '-', DoubleToStr(SpNDS, '\2p[|-]3666666666666666666.88')),
      if (SpExistNDS or Abs(SpPerc) >= 0.01,
          DoubleToStr(SpNDS, '\2p[|-]3666666666666666666.88'), '-')))
  SpSumma
  #f_(GTDCountry)
  #f_(GTDNomer)
.endfields
 Ш│@@@@@@@@@@@@@@@@@@@@@@@@│@~@@@@@@@│&#&&&&&&&&│&#&&&&&&&.&&│&#&&&&&&&&&&.&&│&#&&&&&&.&&│@~#@@@│&#&&&&&&&&&.&&│&#&&&&&&&&&&.&&│@~@@@@@@@@@@@│@~@@@@@@@│ Ш
.} // SpSchf
.{CheckEnter KazSt
.}
.{CheckEnter NalogFinSchf
.} // NalogFinSchf
.if ItogoGroup       // итого по группе. Если true, то не печатать Итого
.end
.fields
 if (((SubTip=16) and wCountry=0),'',
  if (#isPrnValue
  ,  DoubleToStr(ItSumNoNDS, '\2p[|-]3666666666666666666.88'), ''))
   ItNDS
   ItSumma
.endfields
 Ш├────────────────────────┴─────────┴──────────┴────────────┴───────────────┴───────────┴──────┼──────────────┼───────────────┼─────────────┴─────────┘ Ш
 Ш│  Всего к оплате                                           &#&&&&&&&&&&.&&                   │&#&&&&&&&&&.&&│&#&&&&&&&&&&.&&│                         Ш
 Ш└─────────────────────────────────────────────────────────────────────────────────────────────┴──────────────┴───────────────┘                         Ш
.begin
  NumSigner  := 0;
  KolSigners := if(KolSigners_Director >= KolSigners_MainBuh, KolSigners_Director, KolSigners_MainBuh);
end.
.{?internal; not is2004
.fields
   Director
   Main_Buh
.endfields

        Ш
       Руководитель организации                     @@@@@@@@@@@@@@@@@@@@@@@@@@ Главный бухгалтер                 ^
       (индивидуальный предприниматель)                                        (реквизиты свидетельства о
                                                                                государственной регистрации
                                                                                индивидуального предпринимателя)

       М.П.


       Выдал                                                                    (подпись ответственного лица от продавца)



       Примечания. Первый экземпляр - покупателю, второй экземпляр - продавцу.
        Ш
.}
.{?internal; is2004
.fields
   Director
   Main_Buh
.endfields

        Ш
       Руководитель организации     _____________    @@@@@@@@@@@@@@@@@@@@@@@@@@   Главный бухгалтер  _____________    ^
                                      (подпись)               (Ф.И.О.)                                 (подпись)           (Ф.И.О.)

 Ш
.{?internal; (KolSigners_Director > 0 or KolSigners_MainBuh > 0)
 Ш       За руководителя организации                                               За главного бухгалтера
 Ш
.}
.{While (NumSigner < KolSigners)
.begin
  NumSigner++;
  IsDirector := if(KolSigners_Director >= NumSigner, true, false);
  IsBuh := if(KolSigners_MainBuh >= NumSigner, true, false);
end.
.{?internal; (isDirector and isBuh)
.fields
  arrPosition_Dir[NumSigner]
  arrFIO_Dir     [NumSigner]
  arrPosition_Buh[NumSigner]
  arrFIO_Buh     [NumSigner]
  arrDover_Dir   [NumSigner]
  arrDover_Buh   [NumSigner]
.endfields
 Ш        @@@@@@@@@@@@@@@@@@@@@@@@ _______________   @@@@@@@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@@@@@@ _____________   @@@@@@@@@@@@@@@@@@@@@@@@@@
                                      (подпись)              (Ф.И.О.)                                      (подпись)              (Ф.И.О.)
                               @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 Ш
.}
.{?internal; (isDirector and not isBuh)
.fields
  arrPosition_Dir[NumSigner]
  arrFIO_Dir     [NumSigner]
  arrDover_Dir   [NumSigner]
.endfields
 Ш        @@@@@@@@@@@@@@@@@@@@@@@@ _______________   @@@@@@@@@@@@@@@@@@@@@@@@@@
                                      (подпись)              (Ф.И.О.)
                               @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 Ш
.}
.{?internal; (not isDirector and isBuh)
.fields
  arrPosition_Buh[NumSigner]
  arrFIO_Buh     [NumSigner]
  arrDover_Buh   [NumSigner]
.endfields
 Ш                                                                                  @@@@@@@@@@@@@@@@@@@@ _____________   @@@@@@@@@@@@@@@@@@@@@@@@@@
                                                                                                          (подпись)              (Ф.И.О.)
                                                                                                     @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 Ш
.}
.}
 Ш       Индивидуальный предприниматель _____________  __________________________  ______________________________________________________________________
                                        (подпись)             (Ф.И.О.)                   (реквизиты свидетельства о государственной регистрации
                                                                                                      индивидуального предпринимателя)



       Примечание. Первый экземпляр - покупателю, второй экземпляр - продавцу.
        Ш
.}

.} // Schf
.endform

!--------------------------------------------------------------------------------------------------------------------
#ifdef __CentrOtv__
!--------------------------------------------------------------------------------------------------------------------
#doc
Счет-фактура (формат A4, с учетом подразделений)
#end
.linkform 'Schfrees_73' prototype is 'Schfrees'
.NameInList 'Счет-фактура (формат A4, с учетом подразделений)'
.Group 'Дополнительные бланки (с 11.05.2006)'
.Group 'Country' subGroup 'Russia'
.set filler '-'
!-------------------------------------------------------------------
.create view vSpSchf
from
  SpSchf,
  KatParty,
  FPCO OtvPodr
where
((
      cSpSchf          == SpSchf.nRec
  and nSchFact         == SchFact.nRec
  and SchFact.cOtvPodr == OtvPodr.NRec
));
!-------------------------------------------------------------------
.var
  strGruzFrom, strGruzTo: string;
  strDirector, strMain_Buh, strPodr: string;
  StrPrim1, StrPrim2 : String;
  EmptyField : string;
  is2004 : boolean;

  NumSigner  : word;
  KolSigners : word;
  arrFIO_Dir      : array[1..10] of string;
  arrPosition_Dir : array[1..10] of string;
  arrDover_Dir    : array[1..10] of string;
  arrFIO_Buh      : array[1..10] of string;
  arrPosition_Buh : array[1..10] of string;
  arrDover_Buh    : array[1..10] of string;
  isDirector      : boolean;
  isBuh           : boolean;
  wTipUser        : word;
.endvar
.begin
  is2004 := (ppPrintParam and 64) <> 0;
  EmptyField := if(wCountry=0,'-','');
end.
!-------------------------------------------------------------------
.if SetDateRange
.end
.{CheckEnter Schf
.if HeaderGroup
.end
.begin
  if (SubTip = 16)
  {
    strGruzFrom := '';
    strGruzTo   := '';
    strPodr     := '';
  }
  else
  {
    if (vSpSchf.GetFirst SchFact = 0)
      wTipUser := SchFact.TipUser;

    if (vSpSchf.GetFirst OtvPodr = 0)
    {
      strGruzFrom := if (Direct = 1 and wTipUser <> 7228 and wTipUser <> 7229, vSpSchf.OtvPodr.Name, GruzFrom);
      strGruzTo   := if (Direct = 2, vSpSchf.OtvPodr.Name, GruzTo);
      strPodr     := if (Direct = 1, vSpSchf.OtvPodr.Name, '');
    }
    else
    {
      strGruzFrom := GruzFrom;
      strGruzTo   := GruzTo;
      strPodr     := '';
    }
  }

  strDirector := Director;
  strMain_Buh := Main_Buh;

  for (NumSigner := 1; NumSigner <= 10; NumSigner++)
  {
    arrFIO_Dir      [NumSigner] := '';
    arrPosition_Dir [NumSigner] := '';
    arrDover_Dir    [NumSigner] := '';
  }

  for (NumSigner := 1; NumSigner <= 10; NumSigner++)
  {
    arrFIO_Buh      [NumSigner] := '';
    arrPosition_Buh [NumSigner] := '';
    arrDover_Buh    [NumSigner] := '';
  }

  NumSigner := 0;
end.
.fields
  NSF
  if (longint(dFact)<>0, DateToStr(dFact, '"DD" Mon YYYY г.'), '')

  if (Direct = 1,
      #f_(MyOrgName),
      #f_(OrgName))

  if (Direct = 1,
      #f_(MyOrgAddr),
      #f_(OrgAddr))

  if (Direct = 1, UnnORInn, OrgUnnORInn) + if (is2004, '/КПП', '') + ' продавца'
  if (Direct = 1,
      #f_(MyOrgINN + if (is2004 and (trim(MyOrgKPP) <> ''), ' / ' + MyOrgKPP, '')),
      #f_(OrgINN   + if (is2004 and (trim(OrgKPP)   <> ''), ' / ' + OrgKPP  , '')))

  #f_(strGruzFrom)
  #f_(strGruzTo)

  #f_(PlatNo_Date)

  if (Direct <> 1,
      #f_(MyOrgName),
      #f_(OrgName))

  if (Direct <> 1,
      #f_(MyOrgAddr),
      #f_(OrgAddr))

  if (Direct <> 1, UnnORInn, OrgUnnORInn) + if (is2004, '/КПП', '') + ' покупателя'
  if (Direct <> 1,
      #f_(MyOrgINN + if (is2004 and (trim(MyOrgKPP) <> ''), ' / ' + MyOrgKPP, '')),
      #f_(OrgINN   + if (is2004 and (trim(OrgKPP)   <> ''), ' / ' + OrgKPP  , '')))

!  Nazn
!  Dollarah
.endfields
.{?internal; is2004
 Ш                                                                                                                                        Приложение № 1 Ш
 Ш                                                                                                                     к Правилам ведения журналов учета Ш
 Ш                                                                                                              полученных и выставленных счетов-фактур, Ш
 Ш                                                                                                               книг покупок и книг продаж при расчетах Ш
 Ш                                                                                                                   по налогу на добавленную стоимость, Ш
 Ш                                                                                                             утвержденным постановлением Правительства Ш
 Ш                                                                                                       Российской Федерации от 2 декабря 2000 г. № 914 Ш
 Ш                                                                                                  (в ред. Постановлений Правительства РФ от 15.03.2001 Ш
 Ш                                                                                                       № 189, от 27.07.2002 № 575, от 16.02.2004 № 84, Ш
 Ш                                                                                                             от 11.05.2006 № 283, от 26.05.2009 № 451) Ш
.}

 Й                 Счет-фактура № @~@@@@@@@@@@@@@@@@@@@@@@@@ от @@@@@@@@@@@@@@@@@@@@@@@ (1) Й

 Й Продавец  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (2) Й
 Й Адрес  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (2а) Й
 Й @@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (2б) Й
 Й Грузоотправитель и его адрес  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (3) Й
 Й Грузополучатель и его адрес  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (4) Й
 Й К платежно-расчетному документу  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (5) Й
 Й Покупатель  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (6) Й
 Й Адрес  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (6а) Й
 Й @@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (6б) Й
.if Dopol
.fields
  Nazn
!  Dollarah
.endfields
 Й Дополнение (условия оплаты по договору (контракту), способ отправления и т.п.) Й
 Й @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Й
! И Составлен в  Д@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Д И
.end
.fields
  Dollar
.endfields
.{ CheckEnter FeeSignersMember_Schfrees_Dir
.begin
  NumSigner++;
  arrFIO_Dir      [NumSigner] := Signer_FIO_Director;
  arrPosition_Dir [NumSigner] := Signer_Position_Director;
  if (Signer_Dover_Director <> '')
    arrDover_Dir[NumSigner] := '(' + Signer_Dover_Director + ')';
end.
.}
.begin
  NumSigner := 0;
end.
.{ CheckEnter FeeSignersMember_Schfrees_Buh
.begin
  NumSigner++;
  arrFIO_Buh      [NumSigner] := Signer_FIO_MainBuh;
  arrPosition_Buh [NumSigner] := Signer_Position_MainBuh;
  if (Signer_Dover_MainBuh <> '')
    arrDover_Buh[NumSigner] := '(' + Signer_Dover_MainBuh + ')';
end.
.}
.{CheckEnter SchfKatSopr
.{CheckEnter SchfSpSopr
.{CheckEnter SchfSpSoprNalog
.} // SchfSpSoprNalog
.} // SchfSpSopr
.} // SchfKatSopr

 Ш                                                                                                                          Валюта: @@@@@@@@@@@@@@@@@@@  Ш
 Ш┌────────────────────────┬─────────┬──────────┬────────────┬───────────────┬───────────┬──────┬──────────────┬───────────────┬─────────────┬─────────┐ Ш
 Ш│ Наименование товара    │ Единица │Количество│   Цена     │   Стоимость   │В том числе│Нало- │ Сумма налога │   Стоимость   │   Страна    │  Номер  │ Ш
 Ш│(описание выполненных   │ измере- │          │ (тариф) за │ товаров (ра-  │   акциз   │говая │              │ товаров (ра-  │происхождения│ таможен-│ Ш
 Ш│ работ, оказанных       │   ния   │          │ единицу из-│ бот, услуг),  │           │ставка│              │ бот, услуг),  │             │ ной дек-│ Ш
 Ш│ услуг), имущественного │         │          │ мерения    │ имущественных │           │      │              │ имущественных │             │ ларации │ Ш
 Ш│ права                  │         │          │            │ прав, всего   │           │      │              │ прав, всего   │             │         │ Ш
 Ш│                        │         │          │            │  без налога   │           │      │              │  с учетом     │             │         │ Ш
 Ш│                        │         │          │            │               │           │      │              │   налога      │             │         │ Ш
 Ш├────────────────────────┼─────────┼──────────┼────────────┼───────────────┼───────────┼──────┼──────────────┼───────────────┼─────────────┼─────────┤ Ш
 Ш│          1             │     2   │     3    │      4     │       5       │     6     │   7  │       8      │       9       │      10     │    11   │ Ш
 Ш├────────────────────────┼─────────┼──────────┼────────────┼───────────────┼───────────┼──────┼──────────────┼───────────────┼─────────────┼─────────┤ Ш
.{CheckEnter SpSchf
.fields
  #f_(#SpName)
  #f_(if (SpPrMC = 3, '', SpOtpEd))
  if (SpPrMC = 101 or SpPrMC = 102, '-',
    if (SpPrMC = 3, '0.0', if (abs(SpKol) >= dMinKol, string(SpKol, 0, Kol_Pr), '-')))
#ifdef _RoundInDoc_
  if (SpPrMC = 3 or #isPrnPrice, 0.0, SpPrNoNds)
#else
  if (SpPrMC = 3 or #isPrnPrice, 0.0, SpSumNoNDS / SpKol)
#end
  SpSumNoNDS
  SpAkciz
  if (SpPrMC = 101, '-',
    if (SpPrMC = 102, if (SpPerc = -1, '-', String(SpPerc, 2, 0) + '/' + String(100 + SpPerc, 3, 0)),
      if (SpExistNDS or Abs(SpPerc) >= 0.01,
          String(SpPerc, if (SpPerc >= 10, 2, 1), 0) + ' %', '-')))
  if (SpPrMC = 101, '-',
    if (SpPrMC = 102, if (SpPerc = -1, '-', DoubleToStr(SpNDS, '\2p[|-]3666666666666666666.88')),
      if (SpExistNDS or Abs(SpPerc) >= 0.01,
          DoubleToStr(SpNDS, '\2p[|-]3666666666666666666.88'), '-')))
  SpSumma
!  SpSaleTax //налог с продаж
   #f_(GTDCountry)
   #f_(GTDNomer)
.endfields
 Ш│@@@@@@@@@@@@@@@@@@@@@@@@│@~@@@@@@@│&#&&&&&&&&│&#&&&&&&&.&&│&#&&&&&&&&&&.&&│&#&&&&&&.&&│@~#@@@│&#&&&&&&&&&.&&│&#&&&&&&&&&&.&&│@~@@@@@@@@@@@│@~@@@@@@@│ Ш
.} // SpSchf
.{CheckEnter KazSt
.}
.{CheckEnter NalogFinSchf
.} // NalogFinSchf
.if ItogoGroup       // итого по группе. Если true, то не печатать Итого
.end
.fields
  if (((SubTip=16) and wCountry=0),'',
   if (#isPrnValue
   , DoubleToStr(ItSumNoNDS, '\2p[|-]3666666666666666666.88'), ''))
  ItNDS
  ItSumma
.endfields
 Ш├────────────────────────┴─────────┴──────────┴────────────┴───────────────┴───────────┴──────┼──────────────┼───────────────┼─────────────┴─────────┘ Ш
 Ш│  Всего к оплате                                           &#&&&&&&&&&&.&&                   │&#&&&&&&&&&.&&│&#&&&&&&&&&&.&&│                         Ш
 Ш└─────────────────────────────────────────────────────────────────────────────────────────────┴──────────────┴───────────────┘                         Ш
.begin
  NumSigner  := 0;
  KolSigners := if(KolSigners_Director >= KolSigners_MainBuh, KolSigners_Director, KolSigners_MainBuh);
end.
.{?internal; not is2004
.fields
  strPodr
  strPodr
  strDirector
  strMain_Buh
.endfields

        Ш
       Руководитель организации                     @@@@@@@@@@@@@@@@@@@@@@@@@@ Главный бухгалтер                 ^
       (индивидуальный предприниматель)             @@@@@@@@@@@@@@@@@@@@@@@@@@ (реквизиты свидетельства о        ^
                                                                                государственной регистрации
                                                                                индивидуального предпринимателя)

       М.П.


       Выдал                                                                    (подпись ответственного лица от продавца)



       Примечания. Первый экземпляр - покупателю, второй экземпляр - продавцу.
        Ш
.}
.{?internal; is2004
.fields
  strPodr
  strPodr
  strDirector
  strMain_Buh
.endfields
 Ш
                                                      @@@@@@@@@@@@@@@@@@@@@@@@@@                                       ^
       Руководитель организации     _____________     @@@@@@@@@@@@@@@@@@@@@@@@@@  Главный бухгалтер   ______________   ^
                                      (подпись)               (Ф.И.О.)                                   (подпись)             (Ф.И.О.)

        Ш
.{?internal; (KolSigners_Director > 0 or KolSigners_MainBuh > 0)
 Ш       За руководителя организации                                               За главного бухгалтера
 Ш
.}
.{While (NumSigner < KolSigners)
.begin
  NumSigner++;
  IsDirector := if(KolSigners_Director >= NumSigner, true, false);
  IsBuh := if(KolSigners_MainBuh >= NumSigner, true, false);
end.
.{?internal; (isDirector and isBuh)
.fields
  arrPosition_Dir[NumSigner]
  arrFIO_Dir     [NumSigner]
  arrPosition_Buh[NumSigner]
  arrFIO_Buh     [NumSigner]
  arrDover_Dir   [NumSigner]
  arrDover_Buh   [NumSigner]
.endfields
 Ш        @@@@@@@@@@@@@@@@@@@@@@@@ _______________   @@@@@@@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@@@@@@ _____________   @@@@@@@@@@@@@@@@@@@@@@@@@@
                                      (подпись)              (Ф.И.О.)                                      (подпись)              (Ф.И.О.)
                               @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 Ш
.}
.{?internal; (isDirector and not isBuh)
.fields
  arrPosition_Dir[NumSigner]
  arrFIO_Dir     [NumSigner]
  arrDover_Dir   [NumSigner]
.endfields
 Ш        @@@@@@@@@@@@@@@@@@@@@@@@ _______________   @@@@@@@@@@@@@@@@@@@@@@@@@@
                                      (подпись)              (Ф.И.О.)
                               @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 Ш
.}
.{?internal; (not isDirector and isBuh)
.fields
  arrPosition_Buh[NumSigner]
  arrFIO_Buh     [NumSigner]
  arrDover_Buh   [NumSigner]
.endfields
 Ш                                                                                  @@@@@@@@@@@@@@@@@@@@ _____________   @@@@@@@@@@@@@@@@@@@@@@@@@@
                                                                                                          (подпись)              (Ф.И.О.)
                                                                                                     @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 Ш
.}
.}
 Ш       Индивидуальный предприниматель  _____________  _________________________   _____________________________________________________________________
                                         (подпись)           (Ф.И.О.)                    (реквизиты свидетельства о государственной регистрации
                                                                                                     индивидуального предпринимателя)



       Примечание. Первый экземпляр - покупателю, второй экземпляр - продавцу.
        Ш
.}

.} // Schf
.endform

!--------------------------------------------------------------------------------------------------------------------
#end
!--------------------------------------------------------------------------------------------------------------------
#doc
Счет-фактура (расчетная ставка)
#end
.linkform 'Schfrees_75' prototype is 'Schfrees'
.NameInList 'Счет-фактура (расчетная ставка)'
.Group 'Дополнительные бланки (с 11.05.2006)'
.Group 'Country' subGroup 'Russia'
.set filler '-'
!-------------------------------------------------------------------
.create view vSchf
from
 SchFact
where
((
 nSchFact == SchFact.nRec
));
!-------------------------------------------------------------------
.var
  StrPrim1, StrPrim2 : String;
  is2004 : boolean;
  EmptyField : string;

  NumSigner  : word;
  KolSigners : word;
  arrFIO_Dir      : array[1..10] of string;
  arrPosition_Dir : array[1..10] of string;
  arrDover_Dir    : array[1..10] of string;
  arrFIO_Buh      : array[1..10] of string;
  arrPosition_Buh : array[1..10] of string;
  arrDover_Buh    : array[1..10] of string;
  isDirector      : boolean;
  isBuh           : boolean;
  wTipUser        : word;
.endvar
.begin
  is2004 := (ppPrintParam and 64) <> 0;
  EmptyField := if(wCountry=0,'-','');
end.
!-------------------------------------------------------------------
.if SetDateRange
.end
.{CheckEnter Schf
.if HeaderGroup
.end
.begin
  if (vSchf.GetFirst SchFact = 0)
    wTipUser := SchFact.TipUser;

  for (NumSigner := 1; NumSigner <= 10; NumSigner++)
  {
    arrFIO_Dir      [NumSigner] := '';
    arrPosition_Dir [NumSigner] := '';
    arrDover_Dir    [NumSigner] := '';
  }

  for (NumSigner := 1; NumSigner <= 10; NumSigner++)
  {
    arrFIO_Buh      [NumSigner] := '';
    arrPosition_Buh [NumSigner] := '';
    arrDover_Buh    [NumSigner] := '';
  }

  NumSigner := 0;
end.
.fields
  NSF
  if (longint(dFact)<>0, DateToStr(dFact, '"DD" Mon YYYY г.'), '')

  if (Direct = 1,
      #f_(MyOrgName),
      #f_(OrgName)
  )
.endfields
.{?internal; is2004
 Ш                                                                                                                                        Приложение № 1 Ш
 Ш                                                                                                                     к Правилам ведения журналов учета Ш
 Ш                                                                                                              полученных и выставленных счетов-фактур, Ш
 Ш                                                                                                               книг покупок и книг продаж при расчетах Ш
 Ш                                                                                                                   по налогу на добавленную стоимость, Ш
 Ш                                                                                                             утвержденным постановлением Правительства Ш
 Ш                                                                                                       Российской Федерации от 2 декабря 2000 г. № 914 Ш
 Ш                                                                                                  (в ред. Постановлений Правительства РФ от 15.03.2001 Ш
 Ш                                                                                                       № 189, от 27.07.2002 № 575, от 16.02.2004 № 84, Ш
 Ш                                                                                                             от 11.05.2006 № 283, от 26.05.2009 № 451) Ш
.}
 Й                 Счет-фактура № @~@@@@@@@@@@@@@@@@@@@@@@@@ от @@@@@@@@@@@@@@@@@@@@@@@@ (1) Й

 Й Продавец  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (2) Й
.{?internal; (Trim(if (Direct = 1, MyPostAddr, PostAddr)) <> '')
.fields
  if (Direct = 1,
      #f_(MyOrgAddr),
      #f_(OrgAddr))

  if (Direct = 1,
      #f_(MyPostAddr),
      #f_(PostAddr))

.endfields
 Й Адрес юридический  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (2а) Й
 Й       почтовый     @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Й
.}
.{?internal; (Trim(if (Direct = 1, MyPostAddr, PostAddr)) = '')
.fields
  if (Direct = 1,
      #f_(MyOrgAddr),
      #f_(OrgAddr))

.endfields
 Й Адрес  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (2а) Й
.}
.fields
  if (Direct = 1, UnnORInn, OrgUnnORInn) + if (is2004, '/КПП', '') + ' продавца'
  if (Direct = 1,
      #f_(MyOrgINN + if (is2004 and (trim(MyOrgKPP) <> ''), ' / ' + MyOrgKPP, '')),
      #f_(OrgINN   + if (is2004 and (trim(OrgKPP)   <> ''), ' / ' + OrgKPP  , '')))

  #f_(GruzFrom)
  #f_(GruzTo)

  #f_(PlatNo_Date)

  if (Direct <> 1,
      #f_(MyOrgName),
      #f_(OrgName))

.endfields
 Й @@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (2б) Й
 Й Грузоотправитель и его адрес  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (3) Й
 Й Грузополучатель и его адрес  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (4) Й
 Й К платежно-расчетному документу  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (5) Й
 Й Покупатель  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (6) Й
.{?internal; (Trim(if (Direct <> 1, MyPostAddr, PostAddr)) <> '')
.fields
  if (Direct <> 1,
      #f_(MyOrgAddr),
      #f_(OrgAddr))

  if (Direct <> 1,
      #f_(MyPostAddr),
      #f_(PostAddr))

.endfields
 Й Адрес юридический  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (6а) Й
 Й       почтовый     @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Й
.}
.{?internal; (Trim(if (Direct <> 1, MyPostAddr, PostAddr)) = '')
.fields
  if (Direct <> 1,
      #f_(MyOrgAddr),
      #f_(OrgAddr))
.endfields
 Й Адрес  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (6а) Й
.}
.fields
  if (Direct <> 1, UnnORInn, OrgUnnORInn) + if (is2004, '/КПП', '') + ' покупателя'
  if (Direct <> 1,
      #f_(MyOrgINN + if (is2004 and (trim(MyOrgKPP) <> ''), ' / ' + MyOrgKPP, '')),
      #f_(OrgINN   + if (is2004 and (trim(OrgKPP)   <> ''), ' / ' + OrgKPP  , '')))
.endfields
 Й @@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (6б) Й
.if Dopol
.fields
  Nazn
!  Dollarah
.endfields
 Й Дополнение (условия оплаты по договору (контракту), способ отправления и т.п.) Й
 Й @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Й
! И Составлен в  Д@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Д И
.end
.fields
  Dollar
.endfields
.{ CheckEnter FeeSignersMember_Schfrees_Dir
.begin
  NumSigner++;
  arrFIO_Dir      [NumSigner] := Signer_FIO_Director;
  arrPosition_Dir [NumSigner] := Signer_Position_Director;
  if (Signer_Dover_Director <> '')
    arrDover_Dir[NumSigner] := '(' + Signer_Dover_Director + ')';
end.
.}
.begin
  NumSigner := 0;
end.
.{ CheckEnter FeeSignersMember_Schfrees_Buh
.begin
  NumSigner++;
  arrFIO_Buh      [NumSigner] := Signer_FIO_MainBuh;
  arrPosition_Buh [NumSigner] := Signer_Position_MainBuh;
  if (Signer_Dover_MainBuh <> '')
    arrDover_Buh[NumSigner] := '(' + Signer_Dover_MainBuh + ')';
end.
.}
.{CheckEnter SchfKatSopr
.{CheckEnter SchfSpSopr
.{CheckEnter SchfSpSoprNalog
.} // SchfSpSoprNalog
.} // SchfSpSopr
.} // SchfKatSopr

 Ш                                                                                                                          Валюта: @@@@@@@@@@@@@@@@@@@  Ш
 Ш┌────────────────────────┬─────────┬──────────┬────────────┬───────────────┬───────────┬──────┬──────────────┬───────────────┬─────────────┬─────────┐ Ш
 Ш│ Наименование товара    │ Единица │Количество│   Цена     │   Стоимость   │В том числе│Нало- │ Сумма налога │   Стоимость   │   Страна    │  Номер  │ Ш
 Ш│(описание выполненных   │ измере- │          │ (тариф) за │ товаров (ра-  │   акциз   │говая │              │ товаров (ра-  │происхождения│ таможен-│ Ш
 Ш│ работ, оказанных       │   ния   │          │ единицу из-│ бот, услуг),  │           │ставка│              │ бот, услуг),  │             │ ной дек-│ Ш
 Ш│ услуг), имущественного │         │          │ мерения    │ имущественных │           │      │              │ имущественных │             │ ларации │ Ш
 Ш│ права                  │         │          │            │  прав, всего  │           │      │              │  прав, всего  │             │         │ Ш
 Ш│                        │         │          │            │  без налога   │           │      │              │   с учетом    │             │         │ Ш
 Ш│                        │         │          │            │               │           │      │              │    налога     │             │         │ Ш
 Ш├────────────────────────┼─────────┼──────────┼────────────┼───────────────┼───────────┼──────┼──────────────┼───────────────┼─────────────┼─────────┤ Ш
 Ш│          1             │     2   │     3    │      4     │       5       │     6     │   7  │       8      │       9       │      10     │    11   │ Ш
 Ш├────────────────────────┼─────────┼──────────┼────────────┼───────────────┼───────────┼──────┼──────────────┼───────────────┼─────────────┼─────────┤ Ш
.{CheckEnter SpSchf
.fields
  #f_(#SpName)
  #f_(if (SpPrMC = 3, '', SpOtpEd))
  if (SpPrMC = 101 or SpPrMC = 102, '-',
    if (SpPrMC = 3, '0.0', if (abs(SpKol) >= dMinKol, String(SpKol, 0, Kol_Pr), '-')))
#ifdef _RoundInDoc_
  if (SpPrMC = 3 or #isPrnPrice, 0.0, SpPrNoNds)
#else
  if (SpPrMC = 3 or #isPrnPrice, 0.0, SpSumNoNDS / SpKol)
#end
  SpSumNoNDS
  SpAkciz
  if (SpPrMC = 101, '-',
    if (SpPrMC = 102, if (SpPerc = -1, '-', String(SpPerc, 2, 0) + '/' + String(100 + SpPerc, 3, 0)),
      if (SpExistNDS or Abs(SpPerc) >= 0.01,
          String(SpPerc, 2, 0) + '/' + String(100 + SpPerc, 3, 0), '-')))
  if (SpPrMC = 101, '-',
    if (SpPrMC = 102, if (SpPerc = -1, '-', DoubleToStr(SpNDS, '\2p[|-]3666666666666666666.88')),
      if (SpExistNDS or Abs(SpPerc) >= 0.01,
          DoubleToStr(SpNDS, '\2p[|-]3666666666666666666.88'), '-')))
  SpSumma
!  SpSaleTax //налог с продаж
  #f_(GTDCountry)
  #f_(GTDNomer)
.endfields
 Ш│@@@@@@@@@@@@@@@@@@@@@@@@│@~@@@@@@@│&#&&&&&&&&│&#&&&&&&&.&&│&#&&&&&&&&&&.&&│&#&&&&&&.&&│@~#@@@│&#&&&&&&&&&.&&│&#&&&&&&&&&&.&&│@~@@@@@@@@@@@│@~@@@@@@@│ Ш
.} // SpSchf
.{CheckEnter KazSt
.}
.{CheckEnter NalogFinSchf
.} // NalogFinSchf
.if ItogoGroup       // итого по группе. Если true, то не печатать Итого
.end
.fields
 if (((SubTip=16) and wCountry=0),'',
  if (#isPrnValue
  , DoubleToStr(ItSumNoNDS, '\2p[|-]3666666666666666666.88'), ''))
  ItNDS
  ItSumma
.endfields
 Ш├────────────────────────┴─────────┴──────────┴────────────┴───────────────┴───────────┴──────┼──────────────┼───────────────┼─────────────┴─────────┘ Ш
 Ш│  Всего к оплате                                           &#&&&&&&&&&&.&&                   │&#&&&&&&&&&.&&│&#&&&&&&&&&&.&&│                         Ш
 Ш└─────────────────────────────────────────────────────────────────────────────────────────────┴──────────────┴───────────────┘                         Ш
.begin
  NumSigner  := 0;
  KolSigners := if(KolSigners_Director >= KolSigners_MainBuh, KolSigners_Director, KolSigners_MainBuh);
end.
.{?internal; not is2004
.fields
   Director
   Main_Buh
.endfields

        Ш
       Руководитель организации                     @@@@@@@@@@@@@@@@@@@@@@@@@@ Главный бухгалтер                 ^
       (индивидуальный предприниматель)                                        (реквизиты свидетельства о
                                                                                государственной регистрации
                                                                                индивидуального предпринимателя)

       М.П.


       Выдал                                                                    (подпись ответственного лица от продавца)



       Примечания. Первый экземпляр - покупателю, второй экземпляр - продавцу.
        Ш
.}
.{?internal; is2004
.fields
   Director
   Main_Buh
.endfields

        Ш
       Руководитель организации    ______________    @@@@@@@@@@@@@@@@@@@@@@@@@@   Главный бухгалтер  _______________   ^
                                      (подпись)              (Ф.И.О.)                                   (подпись)              (Ф.И.О.)

        Ш
.{?internal; (KolSigners_Director > 0 or KolSigners_MainBuh > 0)
 Ш       За руководителя организации                                               За главного бухгалтера
 Ш
.}
.{While (NumSigner < KolSigners)
.begin
  NumSigner++;
  IsDirector := if(KolSigners_Director >= NumSigner, true, false);
  IsBuh := if(KolSigners_MainBuh >= NumSigner, true, false);
end.
.{?internal; (isDirector and isBuh)
.fields
  arrPosition_Dir[NumSigner]
  arrFIO_Dir     [NumSigner]
  arrPosition_Buh[NumSigner]
  arrFIO_Buh     [NumSigner]
  arrDover_Dir   [NumSigner]
  arrDover_Buh   [NumSigner]
.endfields
 Ш        @@@@@@@@@@@@@@@@@@@@@@@@ _______________   @@@@@@@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@@@@@@ _____________   @@@@@@@@@@@@@@@@@@@@@@@@@@
                                      (подпись)              (Ф.И.О.)                                      (подпись)              (Ф.И.О.)
                               @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 Ш
.}
.{?internal; (isDirector and not isBuh)
.fields
  arrPosition_Dir[NumSigner]
  arrFIO_Dir     [NumSigner]
  arrDover_Dir   [NumSigner]
.endfields
 Ш        @@@@@@@@@@@@@@@@@@@@@@@@ _______________   @@@@@@@@@@@@@@@@@@@@@@@@@@
                                      (подпись)              (Ф.И.О.)
                               @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 Ш
.}
.{?internal; (not isDirector and isBuh)
.fields
  arrPosition_Buh[NumSigner]
  arrFIO_Buh     [NumSigner]
  arrDover_Buh   [NumSigner]
.endfields
 Ш                                                                                  @@@@@@@@@@@@@@@@@@@@ _____________   @@@@@@@@@@@@@@@@@@@@@@@@@@
                                                                                                          (подпись)              (Ф.И.О.)
                                                                                                     @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 Ш
.}
.}
 Ш       Индивидуальный предприниматель _____________  __________________________   _____________________________________________________________________
                                        (подпись)            (Ф.И.О.)                   (реквизиты свидетельства о государственной регистрации
                                                                                                  индивидуального предпринимателя)



       Примечание. Первый экземпляр - покупателю, второй экземпляр - продавцу.
        Ш
.}

.} // Schf
.endform
!--------------------------------------------------------------------------------------------------------------------
#doc
Счет-фактура (формат A4 с почтовым адресом)
#end
.linkform 'Schfrees_76' prototype is 'Schfrees'
.NameInList 'Счет-фактура (формат A4 с почтовым адресом)'
.Group 'Дополнительные бланки (с 11.05.2006)'
.Group 'Country' subGroup 'Russia'
.set filler '-'
!-------------------------------------------------------------------
.create view vSchf
from
  SchFact
where
((
  nSchFact == SchFact.nRec
));
!-------------------------------------------------------------------
.var
  StrPrim1, StrPrim2 : String;
  is2004 : boolean;
  EmptyField : string;

  NumSigner  : word;
  KolSigners : word;
  arrFIO_Dir      : array[1..10] of string;
  arrPosition_Dir : array[1..10] of string;
  arrDover_Dir    : array[1..10] of string;
  arrFIO_Buh      : array[1..10] of string;
  arrPosition_Buh : array[1..10] of string;
  arrDover_Buh    : array[1..10] of string;
  isDirector      : boolean;
  isBuh           : boolean;
  wTipUser        : word;
.endvar
.begin
  is2004 := (ppPrintParam and 64) <> 0;
  EmptyField := if(wCountry=0,'-','');
end.
!-------------------------------------------------------------------
.if SetDateRange
.end
.{CheckEnter Schf
.if HeaderGroup
.end
.begin
  if (vSchf.GetFirst SchFact = 0)
    wTipUser := SchFact.TipUser;

  for (NumSigner := 1; NumSigner <= 10; NumSigner++)
  {
    arrFIO_Dir      [NumSigner] := '';
    arrPosition_Dir [NumSigner] := '';
    arrDover_Dir    [NumSigner] := '';
  }

  for (NumSigner := 1; NumSigner <= 10; NumSigner++)
  {
    arrFIO_Buh      [NumSigner] := '';
    arrPosition_Buh [NumSigner] := '';
    arrDover_Buh    [NumSigner] := '';
  }

  NumSigner := 0;
end.
.fields
  NSF
  if (longint(dFact)<>0, DateToStr(dFact, '"DD" Mon YYYY г.'), '')

  if (Direct = 1,
      #f_(MyOrgName),
      #f_(OrgName))

.endfields
.{?internal; is2004
 Ш                                                                                                                                        Приложение № 1 Ш
 Ш                                                                                                                     к Правилам ведения журналов учета Ш
 Ш                                                                                                              полученных и выставленных счетов-фактур, Ш
 Ш                                                                                                               книг покупок и книг продаж при расчетах Ш
 Ш                                                                                                                   по налогу на добавленную стоимость, Ш
 Ш                                                                                                             утвержденным постановлением Правительства Ш
 Ш                                                                                                       Российской Федерации от 2 декабря 2000 г. № 914 Ш
 Ш                                                                                                  (в ред. Постановлений Правительства РФ от 15.03.2001 Ш
 Ш                                                                                                       № 189, от 27.07.2002 № 575, от 16.02.2004 № 84, Ш
 Ш                                                                                                             от 11.05.2006 № 283, от 26.05.2009 № 451) Ш
.}
 Й                 Счет-фактура № @~@@@@@@@@@@@@@@@@@@@@@@@@ от @@@@@@@@@@@@@@@@@@@@@@@@ (1) Й

 Й Продавец  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (2) Й
.{?internal; (Trim(if (Direct = 1, MyPostAddr, PostAddr)) <> '')
.fields
  if (Direct = 1,
      #f_(MyOrgAddr),
      #f_(OrgAddr))

  if (Direct = 1,
      #f_(MyPostAddr),
      #f_(PostAddr))
.endfields
 Й Адрес юридический  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (2а) Й
 Й       почтовый     @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Й
.}
.{?internal; (Trim(if (Direct = 1, MyPostAddr, PostAddr)) = '')
.fields
  if (Direct = 1,
      #f_(MyOrgAddr),
      #f_(OrgAddr))
.endfields
 Й Адрес  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (2а) Й
.}
.fields
  if (Direct = 1, UnnORInn, OrgUnnORInn) + if (is2004, '/КПП', '') + ' продавца'
  if (Direct = 1,
      #f_(MyOrgINN + if (is2004 and (trim(MyOrgKPP) <> ''), ' / ' + MyOrgKPP, '')),
      #f_(OrgINN   + if (is2004 and (trim(OrgKPP)   <> ''), ' / ' + OrgKPP  , '')))

  #f_(GruzFrom)
  #f_(GruzTo)
  #f_(PlatNo_Date)
  if (Direct <> 1,
      #f_(MyOrgName),
      #f_(OrgName))
.endfields
 Й @@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (2б) Й
 Й Грузоотправитель и его адрес  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (3) Й
 Й Грузополучатель и его адрес  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (4) Й
 Й К платежно-расчетному документу  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (5) Й
 Й Покупатель  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (6) Й
.{?internal; (Trim(if (Direct <> 1, MyPostAddr, PostAddr)) <> '')
.fields
  if (Direct <> 1,
      #f_(MyOrgAddr),
      #f_(OrgAddr))

  if (Direct <> 1,
      #f_(MyPostAddr),
      #f_(PostAddr))
.endfields
 Й Адрес юридический  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (6а) Й
 Й       почтовый     @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Й
.}
.{?internal; (Trim(if (Direct <> 1, MyPostAddr, PostAddr)) = '')
.fields
  if (Direct <> 1,
      #f_(MyOrgAddr),
      #f_(OrgAddr))
.endfields
 Й Адрес  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (6а) Й
.}
.fields
  if (Direct <> 1, UnnORInn, OrgUnnORInn) + if (is2004, '/КПП', '') + ' покупателя'
  if (Direct <> 1,
      #f_(MyOrgINN + if (is2004 and (trim(MyOrgKPP) <> ''), ' / ' + MyOrgKPP, '')),
      #f_(OrgINN   + if (is2004 and (trim(OrgKPP)   <> ''), ' / ' + OrgKPP  , '')))
.endfields
 Й @@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ (6б) Й
.if Dopol
.fields
  Nazn
!  Dollarah
.endfields
 Й Дополнение (условия оплаты по договору (контракту), способ отправления и т.п.) Й
 Й @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Й
! И Составлен в  Д@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Д И
.end
.fields
  Dollar
.endfields
.{ CheckEnter FeeSignersMember_Schfrees_Dir
.begin
  NumSigner++;
  arrFIO_Dir      [NumSigner] := Signer_FIO_Director;
  arrPosition_Dir [NumSigner] := Signer_Position_Director;
  if (Signer_Dover_Director <> '')
    arrDover_Dir[NumSigner] := '(' + Signer_Dover_Director + ')';
end.
.}
.begin
  NumSigner := 0;
end.
.{ CheckEnter FeeSignersMember_Schfrees_Buh
.begin
  NumSigner++;
  arrFIO_Buh      [NumSigner] := Signer_FIO_MainBuh;
  arrPosition_Buh [NumSigner] := Signer_Position_MainBuh;
  if (Signer_Dover_MainBuh <> '')
    arrDover_Buh[NumSigner] := '(' + Signer_Dover_MainBuh + ')';
end.
.}
.{CheckEnter SchfKatSopr
.{CheckEnter SchfSpSopr
.{CheckEnter SchfSpSoprNalog
.} // SchfSpSoprNalog
.} // SchfSpSopr
.} // SchfKatSopr

 Ш                                                                                                                          Валюта: @@@@@@@@@@@@@@@@@@@  Ш
 Ш┌────────────────────────┬─────────┬──────────┬────────────┬───────────────┬───────────┬──────┬──────────────┬───────────────┬─────────────┬─────────┐ Ш
 Ш│ Наименование товара    │ Единица │Количество│   Цена     │   Стоимость   │В том числе│Нало- │ Сумма налога │   Стоимость   │   Страна    │  Номер  │ Ш
 Ш│(описание выполненных   │ измере- │          │ (тариф) за │ товаров (ра-  │   акциз   │говая │              │ товаров (ра-  │происхождения│ таможен-│ Ш
 Ш│ работ, оказанных       │   ния   │          │ единицу из-│ бот, услуг),  │           │ставка│              │ бот, услуг),  │             │ ной дек-│ Ш
 Ш│ услуг), имущественного │         │          │ мерения    │ имущественных │           │      │              │ имущественных │             │ ларации │ Ш
 Ш│ права                  │         │          │            │  прав, всего  │           │      │              │  прав, всего  │             │         │ Ш
 Ш│                        │         │          │            │  без налога   │           │      │              │с учетом налога│             │         │ Ш
 Ш├────────────────────────┼─────────┼──────────┼────────────┼───────────────┼───────────┼──────┼──────────────┼───────────────┼─────────────┼─────────┤ Ш
 Ш│          1             │     2   │     3    │      4     │       5       │     6     │   7  │       8      │       9       │      10     │    11   │ Ш
 Ш├────────────────────────┼─────────┼──────────┼────────────┼───────────────┼───────────┼──────┼──────────────┼───────────────┼─────────────┼─────────┤ Ш
.{CheckEnter SpSchf
.fields
  #f_(#SpName)
  #f_(if (SpPrMC = 3, '', SpOtpEd))
  if (SpPrMC = 101 or SpPrMC = 102, '-',
    if (SpPrMC = 3, '0.0', if(abs(SpKol) >= dMinKol, string(SpKol, 0, Kol_Pr), '-')))
#ifdef _RoundInDoc_
  if (SpPrMC = 3 or #isPrnPrice, 0.0, SpPrNoNds)
#else
  if (SpPrMC = 3 or #isPrnPrice, 0.0, SpSumNoNDS / SpKol)
#end
  SpSumNoNDS
  SpAkciz
  if (SpPrMC = 101, '-',
    if (SpPrMC = 102, if (SpPerc = -1, '-', String(SpPerc, 2, 0) + '/' + String(100 + SpPerc, 3, 0)),
      if (SpExistNDS or Abs(SpPerc) >= 0.01,
          String(SpPerc, if (SpPerc >= 10, 2, 1), 0) + ' %', '-')))
  if (SpPrMC = 101, '-',
    if (SpPrMC = 102, if (SpPerc = -1, '-', DoubleToStr(SpNDS, '\2p[|-]3666666666666666666.88')),
      if (SpExistNDS or Abs(SpPerc) >= 0.01,
          DoubleToStr(SpNDS, '\2p[|-]3666666666666666666.88'), '-')))
  SpSumma
!  SpSaleTax //налог с продаж
  #f_(GTDCountry)
  #f_(GTDNomer)
.endfields
 Ш│@@@@@@@@@@@@@@@@@@@@@@@@│@~@@@@@@@│&#&&&&&&&&│&#&&&&&&&.&&│&#&&&&&&&&&&.&&│&#&&&&&&.&&│@~#@@@│&#&&&&&&&&&.&&│&#&&&&&&&&&&.&&│@~@@@@@@@@@@@│@~@@@@@@@│ Ш
.} // SpSchf
.{CheckEnter KazSt
.}
.{CheckEnter NalogFinSchf
.} // NalogFinSchf
.if ItogoGroup       // итого по группе. Если true, то не печатать Итого
.end
.fields
 if (((SubTip=16) and wCountry=0),'',
  if (#isPrnValue
  , DoubleToStr(ItSumNoNDS, '\2p[|-]3666666666666666666.88'), ''))
  ItNDS
  ItSumma
.endfields
 Ш├────────────────────────┴─────────┴──────────┴────────────┴───────────────┴───────────┴──────┼──────────────┼───────────────┼─────────────┴─────────┘ Ш
 Ш│  Всего к оплате                                           &#&&&&&&&&&&.&&                   │&#&&&&&&&&&.&&│&#&&&&&&&&&&.&&│                         Ш
 Ш└─────────────────────────────────────────────────────────────────────────────────────────────┴──────────────┴───────────────┘                         Ш
.begin
  NumSigner  := 0;
  KolSigners := if(KolSigners_Director >= KolSigners_MainBuh, KolSigners_Director, KolSigners_MainBuh);
end.
.{?internal; not is2004
.fields
   Director
   Main_Buh
.endfields

        Ш
       Руководитель организации                     @@@@@@@@@@@@@@@@@@@@@@@@@@ Главный бухгалтер                 ^
       (индивидуальный предприниматель)                                        (реквизиты свидетельства о
                                                                                государственной регистрации
                                                                                индивидуального предпринимателя)

       М.П.


       Выдал                                                                    (подпись ответственного лица от продавца)



       Примечания. Первый экземпляр - покупателю, второй экземпляр - продавцу.
        Ш
.}
.{?internal; is2004
.fields
   Director
   Main_Buh
.endfields

        Ш
       Руководитель организации    _______________   @@@@@@@@@@@@@@@@@@@@@@@@@@  Главный бухгалтер  _____________    ^
                                      (подпись)              (Ф.И.О.)                                  (подпись)             (Ф.И.О.)

        Ш
.{?internal; (KolSigners_Director > 0 or KolSigners_MainBuh > 0)
 Ш       За руководителя организации                                               За главного бухгалтера
 Ш
.}
.{While (NumSigner < KolSigners)
.begin
  NumSigner++;
  IsDirector := if(KolSigners_Director >= NumSigner, true, false);
  IsBuh := if(KolSigners_MainBuh >= NumSigner, true, false);
end.
.{?internal; (isDirector and isBuh)
.fields
  arrPosition_Dir[NumSigner]
  arrFIO_Dir     [NumSigner]
  arrPosition_Buh[NumSigner]
  arrFIO_Buh     [NumSigner]
  arrDover_Dir   [NumSigner]
  arrDover_Buh   [NumSigner]
.endfields
 Ш        @@@@@@@@@@@@@@@@@@@@@@@@ _______________   @@@@@@@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@@@@@@ _____________   @@@@@@@@@@@@@@@@@@@@@@@@@@
                                      (подпись)              (Ф.И.О.)                                      (подпись)              (Ф.И.О.)
                               @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 Ш
.}
.{?internal; (isDirector and not isBuh)
.fields
  arrPosition_Dir[NumSigner]
  arrFIO_Dir     [NumSigner]
  arrDover_Dir   [NumSigner]
.endfields
 Ш        @@@@@@@@@@@@@@@@@@@@@@@@ _______________   @@@@@@@@@@@@@@@@@@@@@@@@@@
                                      (подпись)              (Ф.И.О.)
                               @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 Ш
.}
.{?internal; (not isDirector and isBuh)
.fields
  arrPosition_Buh[NumSigner]
  arrFIO_Buh     [NumSigner]
  arrDover_Buh   [NumSigner]
.endfields
 Ш                                                                                  @@@@@@@@@@@@@@@@@@@@ _____________   @@@@@@@@@@@@@@@@@@@@@@@@@@
                                                                                                          (подпись)              (Ф.И.О.)
                                                                                                     @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 Ш
.}
.}
 Ш       Индивидуальный предприниматель _____________  __________________________  ______________________________________________________________________
                                        (подпись)             (Ф.И.О.)                   (реквизиты свидетельства о государственной регистрации
                                                                                                      индивидуального предпринимателя)



       Примечание. Первый экземпляр - покупателю, второй экземпляр - продавцу.
        Ш
.}

.} // Schf
.endform
