/*
 ╔═══════════════════════════════════════════════════════════════════════════╗
 ║                     (c) 06/21/2004 корпорация ГАЛАКТИКА                   ║
 ║ Проект        : ГАЛАКТИКА                                                 ║
 ║ Система       : Оперативный контур                                        ║
 ║ Версия        : 7.11                                                      ║
 ║ Назначение    : Поставщик данных для регистрации СФ                       ║
 ║ Ответственный : Полежай Алексей Геннадьевич                               ║
 ╚═══════════════════════════════════════════════════════════════════════════╝
*/
#ifndef __SCHREGISTERPROVIDER_VIH
#define __SCHREGISTERPROVIDER_VIH

#ifdef ComponentVersion
#component "L_SF"
#end

#doc
структура для хранения/передачи общей информации по документу
#end
type
  TSchAbstactDocument = record
    cDocument : comp;
    wType     : word;
    dateDoc   : date;
    wIsReg    : word;
    DataReg   : date;
    NoSvidReg : string[20];
  end;

#doc
структура для регистрации СФ
#end
type
  TSchRegUKS = record
    wTiDk: word;
    cDoc : comp;
    cSF  : comp;
    dReg : date;
    Mode : word;
    UKSInfo : TSchAbstactDocument;
  end;

const
  SFREGMODE_DELAYEDUKS: word = 1;
end;

#doc
Методы для регистрации СФ по выбранным объектам строительства
#end
ObjInterface ISchRegisterProvider;

  #doc
  Установка параметров
  #end
  function getID: word;

  #doc
  Поиск зарегистрированного количества
  #end
  function isValidPos(cPos: comp; var kol: double): boolean;

  #doc
  Установка зарегистрированного количества
  #end
  procedure processBookRecord(cBookPrZk: comp; cSpSchF: comp);

  #doc
  Установка параметров регистрации по объекту строительства
  #end
  function getTopMostDocument(var recDoc: TSchAbstactDocument): boolean;

  #doc
  Установка объекта строительства, по которому будет идти регистрация
  #end
  function loadTopMostDocument(cDoc: comp): boolean;
#ifndef GAL9_1
end;

#doc
Методы для регистрации СФ по выбранным объектам строительства
#end
ObjInterface ISchRegisterProvider2;
#end

  #doc
  Поиск количества к регистрации/сторинированию
  #end
  Function GetKolRegSpSchF( _wTiDk: word;
                            _cDoc : comp;
                            _cSF  : comp;
                            _cPos : comp;
                            var kol: double ): boolean;

  #doc
  Установка количества к регистрации/сторинированию
  #end
  Procedure processBookRecord_2( cBookPrZk: comp;
                                 _wTiDk: word;
                                 _cDoc : comp;
                                 _cSF  : comp;
                                 _cPos : comp;
                                 _wMode : word
                               );
end;

VipInterface DelayedUKSRegistration implements ISchRegisterProvider
#ifndef GAL9_1
 , ISchRegisterProvider2
#end
  LICENSED
  (
  #include DelayedUKSRegistration.lih
  ) Parameters (pModeRegSf: word)
;

#end // __SCHREGISTERPROVIDER_VIH
