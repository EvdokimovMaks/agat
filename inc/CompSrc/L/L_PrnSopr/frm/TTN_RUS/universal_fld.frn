!Поля для универсального передаточного документа (universal.rtf)
.fields
  Ean13ToEanGnivcTTF(GenerateBarCodeEx(coKatSopr, накладная_нрек))
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetSchFactNum (накладная_нрек), ' ')
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetSchFactDate(накладная_нрек), ' ')
  //продавец
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetOrgFullName(oPrnSoprFun.GetSchFactOrgNRec(СчФакт_НРек, 0), 8, 0, Дата), (oPrnSoprFun.GetOrgFullName(накладная_нрек, 0, 1) + oPrnSoprFun.GetOrgFullName(накладная_нрек, 0, 2)))
  LTrim(LTrim(if (СчФакт_НРек <> 0, oPrnSoprFun.GetSchFactOrgAddr(СчФакт_НРек, 0), #AdrFieldsUr(Поставщик,Поставщик_СТАРАНА_КОД)), ','), ' ')

  if (СчФакт_НРек <> 0, '1', '2')

  if (СчФакт_НРек <> 0, oPrnSoprFun.GetSchFactOrgUNN(СчФакт_НРек, 0), (ПоставщикУНН + ' / ' + ПоставщикКПП))
  //грузоотправитель
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetOrgFullName(oPrnSoprFun.GetSchFactOrgNRec(СчФакт_НРек, 2), 8, 0, Дата), (oPrnSoprFun.GetOrgFullName(накладная_нрек, 1, 1) + oPrnSoprFun.GetOrgFullName(накладная_нрек, 1, 2)))
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetSchFactOrgAddr(СчФакт_НРек, 2), #AdrFields(Грузоотправитель,Грузоотправитель_СТАРАНА_КОД))
  //грузополучатель
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetOrgFullName(oPrnSoprFun.GetSchFactOrgNRec(СчФакт_НРек, 3), 8, 0, Дата), (oPrnSoprFun.GetOrgFullName(накладная_нрек, 2, 1) + oPrnSoprFun.GetOrgFullName(накладная_нрек, 2, 2)))
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetSchFactOrgAddr(СчФакт_НРек, 3), #AdrFields(Грузополучатель,Грузополучатель_СТАРАНА_КОД))

  oPrnSoprFun.FindPlat(СчФакт_НРек)

  //покупатель
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetOrgFullName(oPrnSoprFun.GetSchFactOrgNRec(СчФакт_НРек, 1), 8, 0, Дата), (oPrnSoprFun.GetOrgFullName(накладная_нрек, 3, 1) + oPrnSoprFun.GetOrgFullName(накладная_нрек, 3, 2)))
  LTrim(LTrim(if (СчФакт_НРек <> 0, oPrnSoprFun.GetSchFactOrgAddr(СчФакт_НРек, 1), #AdrFieldsUr(Получатель,Получатель_СТАРАНА_КОД)), ','), ' ')
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetSchFactOrgUNN(СчФакт_НРек, 1), (ПолучательУНН + ' / ' + ГрузополучательКПП))   //ПИР 101.58197

  //Валюта: наименование, код
  if (oPrnSoprFun.GetValName(Валюта_нрек) = '', sGetTune('NDE.NAMERUBL'), oPrnSoprFun.GetValName(Валюта_нрек))
  if (oPrnSoprFun.GetValCode(Валюта_нрек) = '', sGetTune('NDE.RUBLISO') , oPrnSoprFun.GetValCode(Валюта_нрек))

  Nom
  КодМЦ
  Название
  CodeOtpEd
  ОтпЕд
  DoubleToStr(КолФ, Kol_Pr)
  DoubleToStr(oPrnSoprFun.GetDPriceMC(спецификацияМЦ_нрек, 0, Признак_МЦ, ЦНацСН, ЦНацБН, ЦНакСН, ЦНакБН), Cena_PrU)
  DoubleToStr(СтНацБН0 , Cena_PrU)
  if (СчФакт_НРек = 0, '-', if (ЦАкцизНак <> 0, DoubleToStr(ЦАкцизНак, Cena_PrU), 'Без акциза'))
  if (СчФакт_НРек = 0, '-', if (ПризнакНДС = word(0), sGetTune('Doc.SD.AbbrField.NoNDSStZero')
                          , if (ставка_первого_налога = 0, sGetTune('Doc.SD.AbbrField.NDSStZero'), DoubleToStr(ставка_первого_налога, NDS_St) + '%')))
  if (ПризнакНДС = word(0), sGetTune('Doc.SD.AbbrField.NoNDSSummZero'), if (СтНДСНац = 0, sGetTune('Doc.SD.AbbrField.NDSSummZero'), DoubleToStr(СтНДСНац, Cena_PrU)))
  DoubleToStr(СтНацСН , Cena_PrU)
  if (СчФакт_НРек = 0, '-', oPrnSoprFun.PrnSoprGTD(Признак_МЦ, СчФакт_НРек, спецификацияМЦ_нрек, 0))
  if (СчФакт_НРек = 0, '-', oPrnSoprFun.PrnSoprGTD(Признак_МЦ, СчФакт_НРек, спецификацияМЦ_нрек, 1))
  if (СчФакт_НРек = 0, '-', oPrnSoprFun.PrnSoprGTD(Признак_МЦ, СчФакт_НРек, спецификацияМЦ_нрек, 2))

  DoubleToStr(Sum1Itog, Cena_PrU)
  DoubleToStr(Sum2Itog, Cena_PrU)
  DoubleToStr(Sum3Itog, Cena_PrU)

  //количество листов
  if (Nom - 36 > 0 , DoubleToStr(Trunc((Nom - 36)/56) + 2, '666'),'1')

  if(sFIO1 <> '', sFIO1, Директор)
  oPrnSoprFun.GetGlBuhName(накладная_нрек, if(sFIO2 <> '', sFIO2, Главный_бухгалтер))
 // if (НомерДовер <>'' or LongInt(ДатаДовер) <> LongInt(0), 'По доверенности № ' + НомерДовер + DateToStr(ДатаДовер, 'от DD mon YYYYг.'), '')

  if (Номер_Договора  <> '', 'Договор № '      + Номер_Договора  + DateToStr(Дата_Договора , ' от DD/MM/YYYYг.' + '; '), '') +
  if (НарядЗаказНомер <> '', 'Заказ-наряд № '  + НарядЗаказНомер + DateToStr(НарядЗаказДата, ' от DD/MM/YYYYг.' + '; '), '') +
  if (Основание       <> '', 'Счет № '         + Основание       + DateToStr(ДатаОснования , ' от DD/MM/YYYYг.' + '; '), '') +
  if (НомерДовер      <> '', 'Доверенность № ' + НомерДовер      + DateToStr(ДатаДовер     , ' от DD/MM/YYYYг.'), '')

  отпуск_разрешил_должность
  отпуск_разрешил

  if (НомерДовер  <> '', ДовЛицоДолжность, '')
  if (НомерДовер  <> '', ДовЛицо, '')

  if (Дата_Отгрузки = Date(0,0,0), '', DateToStr(Дата_Отгрузки, 'DD'))
  if (Дата_Отгрузки = Date(0,0,0), '', DateToStr(Дата_Отгрузки, 'Mon'))
  if (Дата_Отгрузки = Date(0,0,0), '', DateToStr(Дата_Отгрузки, 'YY'))

  sPost3
  sFIO3

  if (НомерДовер  <> '', '', ДовЛицоДолжность)
  if (НомерДовер  <> '', '', ДовЛицо)

  if (СчФакт_НРек <> 0, oPrnSoprFun.GetOrgFullName(oPrnSoprFun.GetSchFactOrgNRec(СчФакт_НРек, 0), 8, 0, Дата), (oPrnSoprFun.GetOrgFullName(накладная_нрек, 0, 1) + oPrnSoprFun.GetOrgFullName(накладная_нрек, 0, 2)))
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetSchFactOrgUNN(СчФакт_НРек, 0), (', УНН: ' + ПоставщикУНН))
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetOrgFullName(oPrnSoprFun.GetSchFactOrgNRec(СчФакт_НРек, 1), 8, 0, Дата), (oPrnSoprFun.GetOrgFullName(накладная_нрек, 3, 1) + oPrnSoprFun.GetOrgFullName(накладная_нрек, 3, 2)))
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetSchFactOrgUNN(СчФакт_НРек, 1), (', УНН: ' + ПолучательУНН))

  Спецсимвол
.endfields
