//------------------------------------------------------------------------------
//                                                      (c) корпорация Галактика
// Галактика 9.10 - модуль "Заработная плата"
// Интерфейс формирования документов в ФСС
//------------------------------------------------------------------------------
const
  cn_Reestr    = 0;
  cn_Statement = 1;
end;

//------------------------------------------------------------------------------
// таблица в памяти, в которой хранится список докуметов для описи заявлений в ФСС
//------------------------------------------------------------------------------
table struct tp_Documents
(
  nRec      : comp
 ,cGroup    : comp        // ссылка на уровень группировки
 ,cDocum    : comp        // ссылка на документ-первоисточник
 ,isLeaf    : word
 ,sNum_Doc  : string      // номер документов
 ,sName_Doc : string      // название документа
 ,wPage_Doc : word        // количество страниц документа
)
with index
(
  IDX00 = nRec(unique, surrogate)
 ,IDX01 = cGroup
 ,IDX02 = cDocum + isLeaf
);

//------------------------------------------------------------------------------
// таблица в памяти, в которой хранится список найденных банковских реквизитов
// сотрудника
//------------------------------------------------------------------------------
table struct tp_BankDetail
(
  cRecipient  : comp      // ссылка на получателя
 ,sRecipient  : string    // наименование получателя
 ,cBank       : comp      // ссылка на банк
 ,sBank       : string    // наименование банка
 ,sBIK        : string    // БИК
 ,sLsSchet    : s20       // лицевой счет
 ,sSource     : string    // источник
 ,sNumCard    : string    // номер карты
)
with index
(
  IDX0 = cRecipient + cBank + sLsSchet
);
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
table struct tp_Statement
(
  cLsch      : comp
 ,DataN      : date
 ,NameOrgRef : comp  // Получатель
 ,BankRef    : comp  // Банк
 ,sLsSchet   : s20   // Номер лицевого счета
 ,sNumCard   : s20   // Номер карты
)
with index
(
  IDX01 = DataN
);
//------------------------------------------------------------------------------
// таблица в памяти, в которой хранится отклонения сотрудника в период болезни
//------------------------------------------------------------------------------
table struct tp_Otkl
(
  cRec      : comp,    // для заявлений - ссылка на Л/С, для рееестров - ссылка на SpPlBan.nRec
  cLschet   : comp,    // ссылка на Л/С
  npp       : word,    // номер п/п простоя
  dStart    : date,    // дата начала простоя
  dEnd      : date,    // дата окончания простоя
  dAver     : double   // среднедневной заработок
)
with Index
(
  IDX01 = cRec
);
//------------------------------------------------------------------------------
// таблица в памяти, в которой хранится данные об отпуске сотрудника
//------------------------------------------------------------------------------
Table struct tp_OtpTitle
(
  wNumOtp    : word
 ,sPrikNum   : string
 ,dPrikDate  : date
 ,dOtpDataN  : date
 ,dOtpDataOk : date
)
with Index
(
  IDX01 = wNumOtp
);
//----------------------------------------------
Table struct tpApplDoc
(
  nSpPlBan : comp,    // nRec SpplBan
  nPsnLink : comp,    // nRec родственника
  AgeY     : word,    // SERV1/2_AGE - возраст лет
  AgeM     : word,    // SERV1/2_MM - возраст мес
  nCode    : comp,    // SERV1/2_RELATION_CODE - nRec родственной связи
  FIO      : string,  // SERV1/2_FIO - ФИО родственника
  dDateB   : date,    // Дата заболевания родственника
  wSort    : word     // признак отсортированных данных
)
with Index
(
  IDX01 = nSpPlBan,
  IDX02 = nSpPlBan + dDateB,
  IDX03 = wSort,
  IDX04 = nSpPlBan + nPsnLink
);
