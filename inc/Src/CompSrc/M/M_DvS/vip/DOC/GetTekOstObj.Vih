/*
 ╔═══════════════════════════════════════════════════════════════════════════╗
 ║                     (c) 1994,99 корпорация ГАЛАКТИКА                      ║
 ║ Проект        : ГАЛАКТИКА                                                 ║
 ║ Система       : Оперативный контур                                        ║
 ║ Версия        : 5.50                                                      ║
 ║ Назначение    : Интерфейс просмотра текущих остатков по матценности       ║
 ║ Ответственный : Левченко Фндрей Александрович(Andrew)                     ║
 ║ Параметры     : есть                                                      ║
 ╚═══════════════════════════════════════════════════════════════════════════╝
*/


#ifndef _GETTEKOST_OBJ_VIH_
#define _GETTEKOST_OBJ_VIH_

#ifdef ComponentVersion
#component "M_Dvs"
#end
#include DebugObj.vih

const
  cnt_FlagBnd_AllTab = 0;
  cnt_FlagBnd_Pick   = 1;
end;

type StructInfoOst = record
  cMC    : comp;
  cParty      : comp;
  cPodr       : comp;
  cMol        : comp;

  Kol_SvOst   : Double;
  Kol_WasRasp : Double;    // Уже распределенное количество
  Kol_WrkRasp : Double;    // Распределяемое количество для текущего вызова интерфейса

  Pick        : word;
end;

ObjInterface oGetTekOst;
  Function KillAllTab : boolean;

  function SetFilter_Razrez(prRefKatPodr : comp; prRefMOL : comp; prFlag_SaveFilter : word) : boolean;
  Function SetFilter_MC(prRefMC : comp; prRefOtpEd : comp) : boolean;
  Function GetParFromDSK(var prRefPodr : comp; var prRefMol : comp; var prFlag_SaveFilter : word) : boolean;
  Function SaveParInDSK : boolean;
  Function SetDefaultFilter_Razrez : boolean;
  Function InitInter : boolean;
  Function InitInter_Default(prRefMC : comp; prRefOtpEd : comp) : boolean;

  Function Run_WndTekOst_OnePos(var prRefPodr : comp; var prRefMol : comp;
                                    var prRefMC : comp; var prRefOtpEd : comp; var prRefParty : comp; var prKolOst : double; FlagMode: Word; cPos: Comp) : longInt;
  Function Run_WndTekOst_SelPos : longInt;

  Procedure SetVidBrowse_Kol_WasRasp(prFlagVisible : boolean);
  Procedure SetVidBrowse_Kol_WrkRasp(prFlagVisible : boolean);

  Function SetKolRasp(prRefTmpTab : comp; prKol_WasRasp : double; prKol_WrkRasp : double) : boolean;

  Function StructInfoOst_GetFirst(prFlagBnd : word; var S_InfoOst : StructInfoOst) : comp;
  Function StructInfoOst_GetNext(prRefTmpTab : comp; prFlagBnd : word; var S_InfoOst : StructInfoOst) : comp;

  Function GetAverPrice_ForOnePos(prRefTmpTab : comp; var prPrice : double; var prPriceVal : double) : boolean;

  Function GetStrDsk_Deb : string;
  Procedure SetStrDsk_Deb(prStrDSK_Deb : string);
  Function GetNameObj : string;
  Procedure SetNameObj(prNameObj : string);
  Function LoadDebugObj(prDebugObj : oDebug) : boolean;
  Function GetModeDebug : boolean;
  Function SetModeDebug(prFlagDebug : boolean) : Boolean;
  Procedure SetStartVarDebug(prStrDSK_Deb : string; prNameObj : string);
  Function SetExtInfoDebug(prDebugObj : oDebug) : Boolean;
  Function RunWindow_Debug(prTypeWnd : word; prNameWnd : string; prDebStr : string) : Boolean;

  Procedure WrDeb_StructInfoOst(prStrTitle : string; S_InfoOst : StructInfoOst);

end;

VipInterface GetTekOstObject implements oGetTekOst
#ifdef ATL51
 Licensed (FREE)
#endif
 Parameters
 (
   ParRefMC       : Comp;
   ParRefOtpEd    : Comp;
   cPartyTekSaldo : Comp;
   cPodrTekSaldo  : Comp;
   cMOLTekSaldo   : Comp;
   KolTekSaldo    : Double
 );
#endif



