//------------------------------------------------------------------------------
//                                                      (c) корпорация Галактика
// Галактика 5.8 - Бухгалтерский контур
// Объект работы с таблицей BaseFin
//------------------------------------------------------------------------------

#ifndef _BFManager_Obj_
#define _BFManager_Obj_

#ifdef ComponentVersion
#Component "F_SoprHoz"
#end

#include FinTypes.vpp

#doc
Объект работы с таблицей BaseFin
#end
ObjInterface ObjBFManager;

  #doc
  Вставить запись
  #end
#ifdef Gal9_1
  Function InsByHan(var buf: #TBaseFinX): word;
#else
  Function InsByHan(var buf: #TBaseFinX): integer;
#end

  #doc
  Инициализация ссылок на договор, соглашение и ПКП в BaseFin'е
  #end
  Function SetDogovor(acBaseFin: comp; var DogInfo: TDogovorInfo): boolean;

  #doc
  Установить заданную сумму платежа
  #end
  Function SetSumma(acBaseFin: comp; var NewSum: TCurrency): boolean;

  #doc
  Разбивает сумму на заданную и формирует непривязанный остаток
  #end
  Function SplitSumma(cSource: comp; var Sum: TCurrency; var cDestination: comp; mode: word): boolean;

  #doc
  Поиск сумм BaseFin ни к чему не привязанных и без проводок
  #end
  Function CollectFreeSums(acDoc: comp; awTiDkGal: word): comp;

  #doc
  Выбор исполняемого ДО
  #end
  Function Get_BaseDoc(GetMulti: boolean; Dir: word; Vid: word; var PickDoc: comp; var PickStep: comp; var PickOrg: comp; var SumDolga: double): boolean;

  #doc
  Распределение платежа по ДО
  #end
  Function BaseFin_BaseDoc(var cFin: comp; myPlansNo: comp; var myOrg: comp; myDatR: Date; cSF: comp; var myDO: word): boolean;

  #doc
  Внешний просчет Сумовой разницы
  #end
  Function CalcSumRaznica(cRecBF, cRecBD: comp; dat: Date): boolean;
End;

ObjInterface ObjBFManagerEx1;
  #doc
  Группировка сумм BaseFin ни к чему не привязанных и без проводок, но в разрезе договоров
  #end
  Function CollectFreeSumsByDog(acDoc: comp; awTiDkGal: word): boolean;
end;

ObjInterface ObjBFManagerEx2;
  #doc
  Привязка ДО к хозоперации (без дробления) и пересчета существующих сумм,
  с запуском расчета налогов и авто распределения
  #end
  Function BaseDoc2BaseFin(cBaseFin, cBaseDoc : comp; bCreateFOB, bShowMess : boolean): boolean;
end;



#end
