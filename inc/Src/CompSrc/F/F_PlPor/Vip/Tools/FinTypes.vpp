//------------------------------------------------------------------------------
//                                                      (c) Корпорация ГАЛАКТИКА
//------------------------------------------------------------------------------
// Система       : ГАЛАКТИКА
// Проект        : Бухгалтерский контур
// Версия        : 8.0
// Назначение    : Описания различных типов
//------------------------------------------------------------------------------

#ifndef __FinTypes__vpp__
#define __FinTypes__vpp__

#include TSoprHoz.vih
#include TBaseFin.vih
#include TBaseDoc.vih

type TDocInfo = record
    ID : comp;
    SysType : word;
    UserType : word;
end;

type TCurrency = record
      NDESum   : TSumma;  // сумма в НДЕ
      ValSum   : TSumma;  // сумма в валюте
      cVal    : comp;     // валюта
      Rate : double;      // курс валюты
      dRate : date;       // дата курса
      RatePerc : double;  // процент к курсу
end;

type TDogovorInfo = record
  cDogovor : comp;    // ссылка на договор
  cAppDogovor : comp; // ссылка на приложение
  cCalPlan : comp;    // ссылка на кал. план
  dSum : TCurrency;   // сумма по договору
  aSum : TCurrency;   // сумма по приложению
  cSum : TCurrency;   // сумма по кал. плану
  cmd : LongInt;      // -1 - отвязать договор
end;

type TInfoDocument = record
    Descr       : string[20] ;    // "дескриптор к номеру документа"
    DesGr       : string[10] ;    // "код группы пользователей"
    NoDoc       : string[20] ;    // "Номер документа",
    TiDkGal     : word       ;    // "Тип документа системный",
    TiDk        : word       ;    // "Тип первичного документа",
    SysOper     : word       ;    // "Тип операции",
    cSoprDoc    : comp       ;    // "Ссылка на первичный документ",
    cSoprHoz    : comp       ;    // "Ссылка на первичный документ",
    cHozOper    : comp       ;    // "Ссылка на ТХО",
    dDoc        : date       ;    // "Дата документа"
    dBeg        : date       ;    // "Начало периода"
    dEnd        : date       ;    // "Конец периода"
    Summa       : double     ;    // "Сумма операции в НДЕ",
    SumVal      : double     ;    // "Сумма операции в валюте",
    cVal        : comp       ;    // "Код валюты операции",
    Kol         : double     ;    // "Количество по операции",
    Price       : double     ;    // "Цена",
    cEd         : comp       ;    // "Ссылка на единицу измерения",
    wDocSp      : word       ;    // "Тип спецификации",
    cDocSp      : comp       ;    // "Ссылка на спецификацию ДО",
    ModeDoc     : word       ;    // Параметры обработки документа
    wProtect    : word       ;    // Режим блокировки документа
    cOrg        : comp       ;    // Контрагент
    FilialNo    : longint    ;    // Номер филиала
    cFilKor     : comp       ;    // Филиал-корреспондент по операции
    Direct      : word       ;    // Направление документа: 0 - собственный, 1 - сторонний
    cStepDoc    : comp       ;    // Ссылка на этап ДО
    NamePl1     : string     ;    // Строка 1 назначения платежа
    NamePl2     : string     ;    // Строка 2 назначения платежа
    NamePl3     : string     ;    // Строка 3 назначения платежа
!word
    wPole1      : word;
    wPole2      : word;
    wPole3      : word;
    wPole4      : word;
    wPole5      : word;
!comp
    cPole1      : comp;
    cPole2      : comp;
    cPole3      : comp;
    cPole4      : comp;
    cPole5      : comp;
!double
    sPole1      : double;
    sPole2      : double;
    sPole3      : double;
    sPole4      : double;
    sPole5      : double;
end;

// Расширение №1 структуры TInfoDocument
type TInfoDocument1 = record
    cOrg      : comp; // Контрагент
    cPlat     : comp; // Плательщик
    cBankPlat : comp; // Банк плательщика
    cPol      : comp; // Получатель платежа
    cBankPol  : comp; // Банк получателя платежа
end;

// флаги режима корректировки атрибутов документа ( Function CorrectDoc )
Const
  cgCorrect_PickDO       = 1;
  cgCorrect_DelDO        = 2;
  cgCorrect_PickTXO      = 4;
  cgCorrect_DelTXO       = 8;
  cgCorrect_Summs        = 16;
  cgCorrect_Org          = 32;
  cgCorrect_TXO_DO       = 64;
  cgCorrect_BeforePickDO = 128;
  cgCorrect_AfterPickDO  = 256;
  cgCorrect_Dogovor      = 512;
  cgCorrect_Status       = 1024;
  cgCorrect_ReReadPlPor  = 2048;
End;
#end // __FinTypes__vpp__
