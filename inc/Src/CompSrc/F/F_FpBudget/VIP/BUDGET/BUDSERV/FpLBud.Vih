//------------------------------------------------------------------------------
//                                                      (c) корпорация Галактика
// Галактика 9.10 - модуль "Управление бюджетом"
// Визуальный интерфейс : "Редактирование списка бюджетов"
//------------------------------------------------------------------------------

#ifndef __FPLBUD_VIH__
#define __FPLBUD_VIH__

#include FpMt.Tbl

#ifdef  ComponentVersion
#component "F_FpBudget"
#endif //ComponentVersion

//------------------------------------------------------------------------------
#doc
Визуальный интерфейс : "Редактирование списка бюджетов"
<b>Внимание!</b> Интерфейс предназначен только для внутреннего использования
#end
#IntPrivate ObjInterface iEditListBudget;

//==============================================================================
//                                  INIT
//------------------------------------------------------------------------------
#doc
   Инициализация параметров интерфейса
#end
function InitParam(
  _wIntMode        : word;
  _wFldVisiblMode  : word;
  _wFldNoEditMode  : word;
  _sIntTitle       : string;
  _ListBudgetID    : LongInt
) : boolean;

//==============================================================================
//                                 FIELDS
//------------------------------------------------------------------------------
// установить интерфейс-владелец (для встраивания)
//------------------------------------------------------------------------------
#doc
   Установить владельца интерфейса
#end
procedure SetOwnerInterface(tOwnerInterface : string);
//------------------------------------------------------------------------------
#doc
   Установить область видимости
#end
function SetArea(_cArea : comp) : boolean;

//------------------------------------------------------------------------------
#doc
   Получить идентификатор маркера интерфейса
#end
function GetMarkerID : TPtr;

//------------------------------------------------------------------------------
#doc
   Получение буфера таблицы по NRec
#end
//------------------------------------------------------------------------------
function GetListBudgetBuffer : tListBudget;

//------------------------------------------------------------------------------
#doc
   Получить текущую справку
#end
function GetIHelp : #__TypeHelpContextID__;

//------------------------------------------------------------------------------
#doc
   Установить текущую справку
#end
function SetIHelp(_TypeHelpContextID : #__TypeHelpContextID__) : boolean;

//------------------------------------------------------------------------------
#doc
   Автоматический пересчет порядка
#end
//------------------------------------------------------------------------------
function NeedAutoRecalcOrder : boolean;
//------------------------------------------------------------------------------
#doc
   Дублирование Слэйва по Мастеру, если пуст, и наоборот
#end
//------------------------------------------------------------------------------
function NeedDuplicateBudget : boolean;

//------------------------------------------------------------------------------
#doc
   Установить мульти режим
#end
function SetMultiBudMode(_Value : boolean) : boolean;

//------------------------------------------------------------------------------
#doc
   Установить порядок ЦО
#end
procedure SetCOOrder;
//------------------------------------------------------------------------------
#doc
   Пересчитать порядок
#end
procedure ReCalcOrder;
//------------------------------------------------------------------------------
#doc
   Получить новый порядок
#end
//------------------------------------------------------------------------------
function GetNewOrder(_OldOrder : LongInt) : LongInt;

//------------------------------------------------------------------------------
#doc
   Синхронизация позиции
#end
procedure SynchPosition(tcRec : comp);
//------------------------------------------------------------------------------
#doc
   Синхронизация буфера
#end
procedure SynchBuffer(tListBudgetBuf : tListBudget);

//------------------------------------------------------------------------------
#doc
   Перечитывание полей интерфейса
#end
procedure MyReReadRecord;

//------------------------------------------------------------------------------
#doc
   Сбросить изменения в БД
#end
procedure MyUpdateTable;

//==============================================================================
//                                 EVENT
//******************************************************************************
//------------------------------------------------------------------------------
#doc
   Событие при изменении позиции
#end
Event procedure Event_PosChanges(_cRec : comp);

//------------------------------------------------------------------------------
#doc
   Событие при изменении буфера
#end
Event procedure Event_BufChanges(_Buff : TListBudget);

//------------------------------------------------------------------------------
#doc
  Событие при удалении записи
#end
Event function  Event_DeleteKatH(_cRec : comp) : boolean;

//------------------------------------------------------------------------------
#doc
  Событие при вызове Help
#end
Event procedure Event_GetHelpID (var _HelpID : #__TypeHelpContextID__ );

//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
end;

VipInterface EditListBudget implements iEditListBudget
#Licensed_Free
#ifdef  Atl51
Parameters (
  wIntMode        : word;    // режим запуска (cgiNo, cgiPick, ...) см.GLOCONST.INC
  wFldVisiblMode  : word;    // по битам из FpConst.inc какие поля показывать
  wFldNoEditMode  : word;    // по битам из FpConst.inc какие поля нельзя изменять
  sIntTitle       : string;  // титл интерфейса
  ListBudgetID    : LongInt; // дескриптор таблицы ListBudget, если 0 - интерфейс сам получает дескриптор
  cGetRec         : comp     // выбранная запись
)
#endif//Atl51
;

#endif// __FPLBUD_VIH__
