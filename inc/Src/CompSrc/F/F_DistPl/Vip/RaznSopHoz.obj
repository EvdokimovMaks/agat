//------------------------------------------------------------------------------
//                                                      (c) Корпорация ГАЛАКТИКА
//------------------------------------------------------------------------------
// Система       : ГАЛАКТИКА
// Проект        : Бухгалтерский контур
// Версия        : 8.0
// Назначение    : Интерфейс распределения суммы платежей по позициям накладных
// Ответсвенный  :
//------------------------------------------------------------------------------

#ifndef _RaznSopHoz_Obj_
#define _RaznSopHoz_Obj_

#ifdef ComponentVersion
#Component "F_DistPl"
#end

#include TDocument.vih // Свойства документов и их спецификаций

#doc
 Объект интерфейса распределения суммы платежей по позициям накладных
#end

objinterface ASoprHozSumDistr;

#doc
 Инициализация переменных интерфейса
#end
  function Init(cSHoz : comp; cxRasp : word) : boolean;

#doc
 Метод отмены распределения суммы по накладым из ДО
#end
  function _UndoDistrPos(cSoprHoz : comp) : boolean;                  // отменить распределение суммы по накладым из ДО

#doc
 Метод оплаты всех накладных по ДО
#end
  function _DoDistrSoprHoz(cSHoz : comp; cxRasp : word) : boolean;                   // оплата всех накладных по ДО

#doc
 Метод оплаты только одной накладной.
#end
  function _DoPayForKatSopr(cSHoz : comp; cKatSopr : comp) : boolean; // оплата только одной накладной.

#doc
 Расчет задолженности по позиции накладной
#end
  function _GetPosRest(cPos: comp; var dRest : double ) : boolean;    // задолженность по позиции

#doc
 Метод для регистрации СФ, которая привязана к soprhoz, по которому делаем init
#end
  procedure DoRegSchFact(mode : word ); //регистрация СФ которая привязана к soprhoz, по которому делаем init

#doc
 считает уже оплаченную сумму.
#end
  function GetOplatSum:double; // считает уже оплаченную сумму

end;
objinterface ASoprHozSumDistr_v1(ASoprHozSumDistr);

#doc
  ИНИЦИАЛИЗАЦИЯ встраиваемого окна по распределению платежа по ДО
#end
  procedure SetParams (_Document : TDocument);

#doc
  ПЕРЕРИСОВКА встраиваемого окна по распределению платежа по ДО
#end
  
  procedure Sync; // перерисовка ембедного окна

#doc
  Отменить распределение суммы по позициям из ДО
#end

  function _UndoDistrPosDO(cSoprHoz : comp) : boolean;                  // отменить распределение суммы по позициям из ДО
end;
objinterface ASHDistrBySpSopr;

#doc
 Метод оплаты только одной позиции накладной.
#end
  function _DoPayForSpSopr(cSHoz : comp; cKatSopr : comp; cSpSopr : comp) : boolean;

end;

#doc
 Объект распределения суммы платежей по позициям накладных для рекламаций
#end

ObjInterface ASoprHozSumDistrActRec;

#doc
 Метод отмены распределения суммы по накладным из ДО без отмены регистрации СФ
#end
  function _UndoDistrPosNotChangeSF(cSoprHoz : comp) : boolean;

end;

#doc
  Объект распределения по списку накладных
#end
ObjInterface ASHDistrByKS;

#doc
  Добавить накладную в список для распределения
#end
  Function AddKatSoprToDistr(_cKatSopr : comp) : boolean;

#doc
  Найти накладную в списке для распределения
#end
  Function FindeKatSoprToDistr(_cKatSopr : comp) : boolean;

#doc
  Сбросить все загруженные накладные
#end
  Function ResetDistrByKS : boolean;

#doc
  Режим распределения по списку накладных
#end
  Procedure InitDistrByKS;

#doc
  Подсчет кол-вва накладных по которым было распределение по данной хозоперайии
#end
  Function GetPaidKatSoprCount(_cSoprHoz : comp) : integer;

end;

#doc
 Объект распределения суммы платежей по позициям накладных по заданной схеме
#end

ObjInterface ASHDistrByCxRasp;

#doc
 Метод отмены распределения суммы по накладным из ДО без отмены регистрации СФ
#end
  function _DoPayForKatSoprByCxRasp(cSHoz : comp; cKatSopr : comp; cxRasp : word) : boolean;

end;

#doc
 Объект определения доступной для распределения суммы
#end

ObjInterface ASHCheckSumToDistr;

#doc
 Вернуть доступную к распределению сумму по накладной
#end
  Function GetSumToDistr(cKatSopr : comp) : double;

end;

#doc
 Объект определения доступной для распределения суммы по накладной с учетом корректировочных
#end

ObjInterface ASHCheckSumToDistr_v1;

#doc
 Получить сумму доступную к распределению по накладной с учетом корректировочных
#end
  Function GetAvailableSummToDistr(wDoTipMoney : comp; cKatSopr : comp; var Summa : TCurrency) : boolean;

end;


#doc
 Объект проверки доступности накладной для распределения
#end

ObjInterface ASHCheckKsToDistr;

#doc
 Есть ли у накладной не распределенные позиции
#end
  Function IsCanDistrKatSopr(cKatSopr : comp; wShTiDk : word) : boolean;

end;


#end
