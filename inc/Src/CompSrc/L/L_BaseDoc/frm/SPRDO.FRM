!╔═════════════════════════════════════════════════════════════════════╗
!║      Проект ГАЛАКТИКА (c) 1994,95 TOP SOFT Ltd., АО НОВЫЙ АТЛАНТ    ║
!║  Версия :     4.20                                                  ║
!║  Разработал:  Кондраль В.А.                                         ║
!║  Назначение:  Форма для получения справки по документу              ║
!║  Изменения:                                                         ║
!║  Применяется: также Склад\Накладная на внутреннее перемещение\      ║
!║                     Расширенная информащция\Резервирование          ║
!╚═════════════════════════════════════════════════════════════════════╝


#doc
Форма для получения справки по документу
#end
.set name='SprDo'
.hide
.fields
  BaseDoc_NRec
  Номер_ДО
  Дата_ДО
  Контрагент
.endfields
  ^
  ^^^
.{
.fields
  SpStep_NRec
  Название_МЦ
  Код_МЦ
  Единица_измерения
  Количество
  Масса
  Объем
.endfields
  ^
  ^^^^^^
.}
.fields
  Всего_масса
  Всего_Объем
.endfields
  ^^
.endform

!-------------------------------------------------------------------
#doc
Справка по ДО
#end
.linkform 'SprDo1' prototype SprDo
.NameInList 'Справка по ДО'
.Group 'Справка по ДО'

                 СПРАВКА ПО ТОВАРНОЙ ЧАСТИ ДОКУМЕНТА
───────────────────┬────────────┬─────────┬─────────┬───────────┬───────────
 Наименование МЦ   │ Ном.номер  │ Единица │  Кол-во │   Масса   │  Объем
───────────────────┴────────────┴─────────┴─────────┴───────────┴───────────
.{
.fields
  Название_МЦ Код_МЦ Единица_измерения Количество Масса Объем
.endfields
@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@ @@@@@@@@@ &&&&&.&&& &&&&&&&.&&& &&&&&&&.&&&
.}
────────────────────────────────────────────────────────────────────────────
.fields
Всего_масса Всего_Объем
.endfields
 Всего                                               &&&&&&&.&&& &&&&&&&.&&&

.endform

#doc
Протокол резервирования
#end
.linkform 'SprDo2' prototype SprDo
.NameInList 'Протокол резервирования'
.Group 'Протокол резервирования'
.fields
  Номер_ДО Дата_ДО Контрагент
.endfields
.var
Flag: boolean;
.endvar

.begin
Flag := FALSE;
end.

     ПРОТОКОЛ РЕЗЕРВИРОВАНИЯ по ДОКУМЕНТУ-ОСНОВАНИЮ № ^ от ^

 Контрагент : ^
───────────────────┬────────────┬─────────────┬─────────┬───────────┬───────────
 Наименование МЦ   │ Ном.номер  │   Партия    │  Кол-во │ Свободно  │ Дефицит
───────────────────┴────────────┴─────────────┴─────────┴───────────┴───────────
.{
.fields
  Название_МЦ Код_МЦ Единица_измерения Количество Масса Объем
.endfields
@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@ @@@@@@@@@@@@@ &&&&&.&&& &&&&&&&.&&& &&&&&&&.&&&
.begin
Flag := Flag OR (trim(Единица_измерения) = '');
end.
.}
────────────────────────────────────────────────────────────────────────────────
.fields
Всего_масса Всего_Объем
if(Flag AND (wGetTune('Reserv.OnlyWithParty') = 1), 'Резервирование позиций без партии запрещено настройкой!', '')
.endfields
 Всего: частично зарезервированных и незарезервированных позиций
                                                         &&&&&&&.&&& &&&&&&&.&&&

 ^
.endform
