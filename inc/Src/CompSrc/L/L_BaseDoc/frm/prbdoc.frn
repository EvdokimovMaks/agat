.function getFormatToStr : string;
begin
var kolZnak : byte;      kolZnak := 0;
var i       : byte;
var d       : double;

if  ( wGetTune('ROUND.SELL') = 0 )
  {
    Result := '\2p[|-]36`666`666`666`666`666`666.88';
    Exit;
  }

if ( sdoc = srub )
  d := doGetTune('ROUND.SELLDORUB')
else
  d := doGetTune('ROUND.SELLDOVAL');

Result := 'p[|-]36`666`666`666`666`666`666';

if (f_GetNZnaks(d) = 2)
  kolZnak := Pos('1', Substr( String(d), length(String(d))-1, length(String(d)) ) )
else
  kolZnak := f_GetNZnaks(d);

Result := '\' + String (kolZnak) + Result;

if (kolZnak > 0)
  {
    Result +='.';

    for (i :=0; i< kolZnak; i++)
      Result += '8';
  }
end.
