//********************************************************************************
//                                                        (c) корпорация Галактика
// Галактика 9.1 - Логистика
// ИГК
//********************************************************************************

#ifNdef _IGK_Dog_vih
#define _IGK_Dog_vih

#ifdef ComponentVersion
#component "L_DOGOVOR"
#end

ObjInterface ObjIGK_Dog;
  #doc
    Получить ИГК договора
  #end
  Function GetIGK(_cDogovor : comp) : string;

  #doc
    Существует ли ИГК договора
  #end
  Function IGKExist(_cDogovor : comp) : boolean;

  #doc
    Получить госконтракт договора
  #end
  Function GetDog(_cDogovor : comp) : string;

  #doc
    Получить ИГК + госконтракт договора
  #end
  Function GetFullIGK(_cDogovor : comp) : string;

  #doc
    Удалить ИГК договора
  #end
  Procedure DelIGK(_cDogovor : comp);

  #doc
    Возвращает ИГК договора,в котором использован тот же счет
  #end
  Function CheckSchet(_cBank, _cDogovor : comp) : string;

  #doc
    Молучить сегмент классификаиции с ИГК договора
  #end
  Function GetIGK_ClassSeg(_cDogovor : comp) : comp;
end;

ObjInterface ObjIGK_Dog_Ex;
  #doc
    Получить номер госконтракта
  #end
  Function GetDog_NoDoc(_cDogovor : comp) : string;

  #doc
    Получить дату госконтракта
  #end
  Function GetDog_DogD(_cDogovor : comp) : string;

  #doc
    Печать уведомления
  #end
  Procedure PrintNotification(_cDogovor : comp);

  #doc
    Совпадает ли счет со счетом в договора. TRUE - если совпадает или в договоре не заполнен
    Функция используется в платежах
  #end
  Function CompareDogSch(_cDogovor, _cBank : comp) : boolean;
end;

ObjInterface ObjIGK_Dog_Schet;

  #doc
    Используются ли госконтракты
  #end
  Function UseIGK : boolean;

  #doc
    Получить ссылку на ИГК привязанного к счету
  #end
  Function GetIGK_Schet(_cKatBank : comp) : comp;

  #doc
    Установить ссылку на ИГК к счету
  #end
  Function SetIGK_Schet(_cKatBank, _cClassSeg : comp) : boolean;

  #doc
    Получить наименование ИГК по ссылке
  #end
  Function GetIGK_By_Seg(_cClassSeg : comp) : string;

  #doc
    Получить номер госконтракта по ссылке на ИГК
  #end
  Function GetNo_By_Seg(_cClassSeg : comp) : string;

  #doc
    Получить дату госконтракта по ссылке на ИГК
  #end
  Function GetDate_By_Seg(_cClassSeg : comp) : date;

  #doc
    Получить ИГК + госконтракт + дату
  #end
  Function GetFullIGKByBank(_cBank : comp) : string;

  #doc
    Установить ИГК договора
  #end
  Function SetIGK_Dog(_cDogovor, _cClassSeg : comp) : boolean;

end;

ObjInterface ObjIGK_Dog_SchetV2(ObjIGK_Dog_Schet);

  #doc
    Определить, что это гособоронзаказ по ссылке на ИГК
  #end
  Function GetGosObZakaz(_cClassSeg : comp) : boolean;
end;

ObjInterface ObjIGK_Dog_DocSchem;

  #doc
    Связать с другим договором
  #end
  Function LinkDogToDog(_cDogBuy, _cDogSel : comp) : word;

  #doc
    Найти связь с другим договором
  #end
  Function FindLinkDogToDog(_cDogovor : comp; _TiDK : word) : string;

  #doc
    Существуют ли подчиненные по схеме связей договора (переданый договор должен быть с Direct 1, меняемые 2)
  #end
  Function ChildDogExist(_cDogovor : comp) : boolean;

  #doc
    Обновить ИГК и р\с в подчиненных договорах (переданый договор должен быть с Direct 1, меняемые 2)
  #end
  Procedure Update_IGK_Sch_ChildDog(_cDogovor : comp; bUpdIGK, bUpdSch : boolean);

end;

VipInterface iIGK_Dog implements ObjIGK_Dog, ObjIGK_Dog_Ex, ObjIGK_Dog_SchetV2, ObjIGK_Dog_DocSchem
  licensed(FREE)
  Parameters(wMode : word; cDog : comp)
/*
wMode - Режим запуска. cgiNo - редактирование, cgiPick - выбор в договоре, cgiPickExt - выбор ИГК вне договора
cDog  - ссылка на договор. Если wMode = cgiPickExt, то ссылка на запись в классификаторе
*/
;

#end
