#ifndef __SOPINMOV_VIH__
#define __SOPINMOV_VIH__

//базовый документ для накладных/актов складского учета
#include BaseSklDoc.vih

//удаление сопроводительного документа
#include delsopr.vih
#include GTekOst.vih
#include GetPrihNKL.vih

#ifdef ComponentVersion
#component "L_Sklad"
#end

#doc
Накладные на внутреннее перемещение
#end

ObjInterface SopInMovObj;
#doc
Резервирование по накладным на внутреннее перемещение
#end
Procedure MakeReservePub(cKatSopr_: comp; destance_ : boolean);

#doc
Формирование ордеров по накладным на внутреннее перемещение
#end
Function MakeMovePub(cKatSopr_: comp): boolean;

#doc
Выбор накладных на внутреннее перемещение
#end
Function PickSpSoprVnt(cKatSopr_: comp): boolean;

#doc
Пересчет цены в накладных на внутреннее перемещение
#end
Procedure RecalcPrices(typeSopr_: word; d1_, d2_: date);
end;

VipInterface SopInMov(BaseSklDoc)
  implements SopInMovObj, objBeforeDelSopr, IGetPrihPar,
             IGetTekOstPar, IGetTekOstPar5, IGetTekOstPar6, IGetTekOstPar7,
             IGetPrihNaklPar
  licensed
  (
    sklad,sklad2,stroy,mbp,sfo
  )
;
Public:
  Procedure InitVars;       // инициализация переменных
  Procedure DoneVars;       // уничтожение переменных
  Procedure ViewFieldSopr;  // показать/скрыть поля визуальных элементов
  Procedure ViewToolBar;    // показать/скрыть кнопки инструментальной панели
  Procedure HidePickButton; // показать/скрыть PickButton для полей по которым установлен фильтр
  Function  OtkatToOldState    (Mess: boolean; TW: word): boolean;  // Проверка сопроводительного документа на возможность редактирования
  Procedure CreateSoprKN;                                           // Создание корректирующей накладной
  Function  PickKatNotesBefore : boolean;                           // Вызывается до выбора статуса в документах
  Procedure PickKatNotesAfter  (pOldStatus: word; pOldNote: comp);  // Вызывается после выбора статуса в документах.
  Function  CopySoprDocBefore  : boolean;                           // Вызывается до начала операции копирования
  Procedure CopySoprDocAfter   (pNewDoc: comp; pNewMarker: TPtr);   // Вызывается после завершения операции копирования
  Function  PickHozOperBefore  : boolean;                           // Вызывается до выбора хозоперации в документах.
  Function  PickHozOperAfter   : boolean;                           // Вызывается после выбора хозоперации в документах.
  Function  PickFIOBefore      : boolean;                           // Вызывается до выбора исполнителя в документах
  Function  PickFIOAfter       (pNewPersons: comp): boolean;        // Вызывается после выбора исполнителя в документах
  Function  PickOtvPodrBefore  : boolean;                           // Вызывается до выбора центра ответственности в документах
  Function  PickOtvPodrAfter   (pNewOtvPodr: comp): boolean;        // Вызывается после выбора центра ответственности в документах
  Function  UnBindOtvPodrBefore: boolean;                           // Вызывается до отвязки центра ответственности в документах.
  Function  CheckHead          : boolean;                           // Проверка заполнения заголовка
  Procedure CheckSumma         (full: boolean);                     // Пересчет общих сумм по документу
end;

#end // __SOPINMOV_VIH__
