/*
 ╔═══════════════════════════════════════════════════════════════════════════╗
 ║                     (c) 1994,97 корпорация ГАЛАКТИКА                      ║
 ║ Проект        : ГАЛАКТИКА                                                 ║
 ║ Система       : Управление закупками                                      ║
 ║ Версия        : 5.00                                                      ║
 ║ Назначение    : Карточка складского учета                                 ║
 ║ Ответственный : Журбенко Юрий Иванович (YURI)                             ║
 ╚═══════════════════════════════════════════════════════════════════════════╝
*/
#doc
Карточка складского учета
#end
#include FeeSigners.frn
.set name = 'KartStor'
.NameInList 'Базовая форма'
.hide
.fields
 NameOrg
 TOVAR_NRec TOVAR_NAME TOVAR_BarKod
 TOVAR_Ed_Izm
 VDat V1 V2 V3 V4 V8
 SkladFltr // склад, если фильтр по складу
 MOLFltr   // МОЛ, если фильтр по МОЛ
 NameVal1
 NameVal2
 PriceR
 PriceV
 KolZn
 KolForm

 srPricekon : double
 kol      : double
 srPrice  : double
 srVPrice : double
 VhSumma  : double
 VhSummaV : double

 field0   // Nrec ордера
 field_m12
 field1   // номер ордера
 field2   // дата
 field3 : string  // вид операции
 field4   // тип операции
 field5   // номер наклад
 field6   // поставщик получат
 field6_MOL //поставщик получат МОЛ
 field7   // склад
 field8   // мол
 field9   // партия
 field10 : double // кол-во
 field11 : double // цена за един в НДЕ
 field12 : double //              в ВАЛ
 field13 : double // стоимостьдин в НДЕ
 field14 : double //              в ВАЛ
 ObjName :string

 ItogoPoOpers  : double
 ItogoSummaNDE : double // итого стоимость в НДЕ
 ItogoSummaVal : double // итого стоимость в ИнВалюте

 kolIsh      : double
 SrPriceIsh  : double
 srVPriceIsh : double
 IshSumma : double
 IshSummaV: double
 cSigner : comp
#FeeSignersFields
.endfields
 Организация ^
                      КАРТОЧКА СКЛАДСКОГО УЧЕТА

Nrec товара: ^
Наименование товара :  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
Номенклатурный номер: ^
Уч.единица измерения: ^

Фильтры:
  ^^
  ^
  ^
  ^
  ^
Склад ^ МОЛ ^
───────┬──────────┬──────────┬────────┬───┬──────┬─────────────┬─────────────┬────────────┬───────────────┬───────────┬──────────────────────────────┬───────────────────────────────────┬────────────────────┐
 NRec  │ Номер    │   Дата   │  Вид   │Тип│номер │ Поставщик   │   Склад     │    МОЛ     │    Партия     │ Количество│       Цена за единицу        │              Стоимость            │     Объект         │
       │          │          │        │опе│наклад│(получатель) │             │            │               │           ├──────────────┬───────────────┼──────────────────┬────────────────┤  строительства     │
 ордера│ ордера   │          │операции│рац│ ной  │             │             │            │               │           │    в НДЕ     │    в @@@@@@   │      в НДЕ       │    в @@@@@@    │                    │
───────┴──────────┴──────────┴────────┴───┴──────┴─────────────┴─────────────┴────────────┴───────────────┴───────────┴──────────────┴───────────────┴──────────────────┴────────────────┴────────────────────┘
Количество знаков для сумм НДЕ ^
Количество знаков для сумм валюты ^
Количество знаков для количества ^
Формат вывода количества ^
Цена на конец: ^
Входящий остаток:                                                                                          &&&&&&&&&&& &'&&&&&&&&&.&& &'&&&&&&&&.&&&& &'&&&&&&&&&&&&&.&& &'&&&&&&&&&.&&&&
.{
@@@@@@@ @@@@@@@ @@@@@@@@@@ @@@@@@@@@@ @@@@@@@@ @@@ @@@@@@ @@@@@@ @@@@@@@@@@@@@ @@@@@@@@@@@@@ @@@@@@@@@@@@ @@@@@@@@@@@@@@@ &&&&&&&&&&& &'&&&&&&&&&.&& &'&&&&&&&&.&&&& &'&&&&&&&&&&&&&.&& &'&&&&&&&&&.&&&& @@@@@@@@@@@@@@@@@@@@
.}
Итого по операциям:                                                                                        &&&&&&&&&&&                                &'&&&&&&&&&&&&&.&& &'&&&&&&&&&.&&&&
Исходящий остаток:                                                                                         &&&&&&&&&&& &'&&&&&&&&&.&& &'&&&&&&&&.&&&& &'&&&&&&&&&&&&&.&& &'&&&&&&&&&.&&&&
^
#FeeSignersBody(KartStor)
.endform


#doc
КАРТОЧКА СКЛАДСКОГО УЧЕТА
#end
.linkform 'KartStor_01' prototype is KartStor
.NameInList 'КАРТОЧКА СКЛАДСКОГО УЧЕТА'
.group 'common'
.group 'belform'
.group 'rusform'
#FeeSignersLinkVar
.fields
 CommonFormHeader
 NameOrg
 TOVAR_NAME TOVAR_BarKod
 TOVAR_Ed_Izm
.endfields
.p 50
.defo landscape
 ^
 ^
                       БКАРТОЧКА СКЛАДСКОГО УЧЕТА Б

 ЙНаименование товара : ^
Номенклатурный номер: ^
Уч.единица измерения: ^ Й
.{?Internal;VDat='1'
.fields
  V1
.endfields
 И   фильтр по датам : ^ И
.}// Internal
.{?Internal;V2<>'<по всем>'
.fields
  V2
.endfields
 И   фильтр по складу: ^ И
.}// Internal
.{?Internal;V3<>'<по всем>'
.fields
  V3
.endfields
 И   фильтр по МОЛ   : ^ И
.}// Internal
.{?Internal;V4<>'<по всем>'
.fields
  V4
.endfields
 И   фильтр по партии: ^ И
.}// Internal
.{?Internal;V8<>'<по всем>'
.fields
  V8
.endfields
 И   фильтр по дескриптору: ^ И
.}// Internal
.fields
 NameVal1
 NameVal2

 DoubleToStr(kol, KolForm)
 DoubleToStr(srPrice, PriceR)
 DoubleToStr(srVPrice, PriceV)
 DoubleToStr(VhSumma, PriceR)
 DoubleToStr(VhSummaV, PriceV)

 field1   //номер ордера
 field2   //дата
 field3   //вид операции
 field4   //тип операции
 field5   //номер наклад
 field6   //поставщик получат
 field7   //склад
 field8   //мол
 field9   //партия
 DoubleToStr(field10, KolForm) //кол-во
 DoubleToStr(field11, PriceR)  // цена за един в НДЕ
 DoubleToStr(field12, PriceV)  //              в ИнВАЛ
 DoubleToStr(field13, PriceR)  // стоимость    в НДЕ
 DoubleToStr(field14, PriceV)  //              в ИнВАЛ

 DoubleToStr(ItogoPoOpers, KolForm)  // итого по операциям
 DoubleToStr(ItogoSummaNDE, PriceR) // итого стоимость в НДЕ
 DoubleToStr(ItogoSummaVal, PriceV) // итого стоимость в ИнВалюте

 DoubleToStr(kolIsh, KolForm)
 DoubleToStr(SrPriceIsh, PriceR)
 DoubleToStr(srVPriceIsh, PriceV)
 DoubleToStr(IshSumma, PriceR)
 DoubleToStr(IshSummaV, PriceV)

! WhoStor AllDate AllKol
.endfields

 Ш───────┬──────────┬────────┬───┬──────┬─────────────┬─────────────┬────────────┬───────────────┬───────────┬──────────────────────────────┬───────────────────────────────────
 Номер │   Дата   │  Вид   │Тип│номер │ Поставщик   │   Склад     │    МОЛ     │    Партия     │ Количество│       Цена за единицу        │              Стоимость
       │          │        │опе│наклад│(получатель) │             │            │               │           ├──────────────┬───────────────┼──────────────────┬────────────────
 ордера│          │операции│рац│ ной  │             │             │            │               │           │    в НДЕ     │    в @@@@@@   │      в НДЕ       │    в @@@@@@
───────┴──────────┴────────┴───┴──────┴─────────────┴─────────────┴────────────┴───────────────┴───────────┴──────────────┴───────────────┴──────────────────┴────────────────
 Входящий остаток:                                                                              &&&&&&&&&&& &'&&&&&&&&&&&& &'&&&&&&&&&&&&& &'&&&&&&&&&&&&&&&& &'&&&&&&&&&&&&&&
.{
@@@@@@@ @@@@@@@@@@ @@@@@@@@ @@@ @@@@@@ @@@@@@@@@@@@@ @@@@@@@@@@@@@ @@@@@@@@@@@@ @@@@@@@@@@@@@@@ &&&&&&&&&&& &'&&&&&&&&&&&& &'&&&&&&&&&&&&& &'&&&&&&&&&&&&&&&& &'&&&&&&&&&&&&&&
.}

 Итого по операциям:                                                                            &&&&&&&&&&&                                &'&&&&&&&&&&&&&&&& &'&&&&&&&&&&&&&&
 Исходящий остаток:                                                                             &&&&&&&&&&& &'&&&&&&&&&&&& &'&&&&&&&&&&&&& &'&&&&&&&&&&&&&&&& &'&&&&&&&&&&&&&&
 Ш
#FeeSignersLinkInit(KartStor)

.{?internal; (cSigner<>0)
.{While (Номер_подписанта < Количество_Подписантов)
.begin
  Номер_подписанта := Номер_подписанта + 1;
end.
.fields
  Массив_Подписант_Должность [Номер_подписанта]
  Массив_Подписант_ФИО       [Номер_подписанта]
.endfields
 Ф@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Д   Д _____________________  Д   Д@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 Д                           (должность)                              (подпись)                             (расшифровка подписи) Р
.}
.}
.{?internal; (cSigner=0)
 Ф__________________________________________________________ Д   Д _____________________  Д   Д______________________________________________________________
 Д                           (должность)                              (подпись)                              (расшифровка подписи) Р
.}
.endform


#doc
КАРТОЧКА СКЛАДСКОГО УЧЕТА
#end
.linkform 'KartStor_01_NDE' prototype is KartStor
.NameInList 'КАРТОЧКА СКЛАДСКОГО УЧЕТА (НДЕ) '
.group 'common'
.group 'belform'
.group 'rusform'
#FeeSignersLinkVar
.fields
 CommonFormHeader
 NameOrg
 TOVAR_NAME TOVAR_BarKod
 TOVAR_Ed_Izm
.endfields
.DEFO PORTRAIT
 ^
 ^
                       БКАРТОЧКА СКЛАДСКОГО УЧЕТА Б

 ЙНаименование товара : ^
Номенклатурный номер: ^
Уч.единица измерения: ^ Й
.{?Internal;VDat='1'
.fields
  V1
.endfields
 И   фильтр по датам : ^ И
.}// Internal
.{?Internal;V2<>'<по всем>'
.fields
  V2
.endfields
 И   фильтр по складу: ^ И
.}// Internal
.{?Internal;V3<>'<по всем>'
.fields
  V3
.endfields
 И   фильтр по МОЛ   : ^ И
.}// Internal
.{?Internal;V4<>'<по всем>'
.fields
  V4
.endfields
 И   фильтр по партии: ^ И
.}// Internal
.{?Internal;V8<>'<по всем>'
.fields
  V8
.endfields
 И   фильтр по дескриптору: ^ И
.}// Internal
.fields

 DoubleToStr(kol, KolForm)
 DoubleToStr(srPrice, PriceR)
 DoubleToStr(VhSumma, PriceR)

 field1   //номер ордера
 field2   //дата
 field3   //вид операции
 field4   //тип операции
 field5   //номер наклад
 field6   //поставщик получат
 field7   //склад
 field8   //мол
 field9   //партия
 DoubleToStr(field10, KolForm) //кол-во
 DoubleToStr(field11, PriceR)  // цена за един в НДЕ
 DoubleToStr(field13, PriceR)  // стоимость    в НДЕ

 DoubleToStr(ItogoPoOpers, KolForm)  // итого по операциям
 DoubleToStr(ItogoSummaNDE, PriceR) // итого стоимость в НДЕ

 DoubleToStr(kolIsh, KolForm)
 DoubleToStr(SrPriceIsh, PriceR)
 DoubleToStr(IshSumma, PriceR)

! WhoStor AllDate AllKol
.endfields

 Ш
───────┬──────────┬────────┬──────┬─────────┬─────────────┬─────────────┬────────────┬───────────────┬─────────────┬────────────────────┬─────────────────────
 Номер │   Дата   │  Вид   │ Тип  │  Номер  │  Поставщик  │   Склад     │    МОЛ     │    Партия     │  Количество │  Цена за единицу,  │     Стоимость,
 ордера│          │операции│операц│накладной│(получатель) │             │            │               │             │        в НДЕ       │       в НДЕ
───────┴──────────┴────────┴──────┴─────────┴─────────────┴─────────────┴────────────┴───────────────┴─────────────┴────────────────────┴─────────────────────
 Входящий остаток:                                                                                    &&&&&&&&&&&&& &'&&&&&&&&&&&&&&&&&& &'&&&&&&&&&&&&&&&&&&&
.{
@@@@@@@ @@@@@@@@@@ @@@@@@@@ @@@@@@ @@@@@@@@@ @@@@@@@@@@@@@ @@@@@@@@@@@@@ @@@@@@@@@@@@ @@@@@@@@@@@@@@@ &&&&&&&&&&&&& &'&&&&&&&&&&&&&&&&&& &'&&&&&&&&&&&&&&&&&&&
.}

 Итого по операциям:                                                                                  &&&&&&&&&&&&&                      &'&&&&&&&&&&&&&&&&&&&
 Исходящий остаток:                                                                                   &&&&&&&&&&&&& &'&&&&&&&&&&&&&&&&&& &'&&&&&&&&&&&&&&&&&&&
 Ш
#FeeSignersLinkInit(KartStor)

.{?internal; (cSigner<>0)
.{While (Номер_подписанта < Количество_Подписантов)
.begin
  Номер_подписанта := Номер_подписанта + 1;
end.
.fields
  Массив_Подписант_Должность [Номер_подписанта]
  Массив_Подписант_ФИО       [Номер_подписанта]
.endfields
 Ф@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Д   Д _____________________  Д   Д@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 Д                         (должность)                              (подпись)                           (расшифровка подписи) Р
.}
.}
.{?internal; (cSigner=0)
 Ф______________________________________________________ Д   Д _____________________  Д   Д__________________________________________________________
 Д                         (должность)                              (подпись)                            (расшифровка подписи) Р
.}
.endform
