//------------------------------------------------------------------------------
//                                                      (c) корпорация Галактика
// Галактика 9.1 - модуль "Электронная отчетность"
// Описание данных: "Буфер данных журнала учета полученных и выставленных счетов-фактур"
//------------------------------------------------------------------------------

#ifndef __SFTR_JUBuffer_Inc__
#define __SFTR_JUBuffer_Inc__

//==============================================================================
//#region БУФЕР ДАННЫХ ЖУРНАЛА
//------------------------------------------------------------------------------
// Часть 1. Выставленные счета-фактуры
Type TSFTR_JUSetBuffer = record
  NumPP            : LongInt;  // 01. Порядковый номер записи

  IsCorrV          : boolean;  // Корректировочный СФ
  WithoutTax       : boolean;  // Признак "без НДС"
  WithoutTax_dec   : boolean;  // Признак "без НДС уменьшение"
  WithoutTax_inc   : boolean;  // Признак "без НДС увеличение"

  dPost            : date   ;  // 02. Дата выставления счета-фактуры
  KodOperation     : string ;  // 03. Код вида операции
  NSF              : string ;  // 04. Номер счета-фактуры
  dFact            : date   ;  // 04. Дата счета-фактуры
  nRevision        : string ;  // 05. Номер исправления счета-фактуры
  dRevision        : date   ;  // 05. Дата исправления счета-фактуры
  nSFCorrV         : string ;  // 06. Номер корректировочного счета-фактуры
  dFactCorrV       : date   ;  // 06. Дата корректировочного счета-фактуры
  nRevisionCorrV   : string ;  // 07. Номер исправления корректировочного счета-фактуры
  dRevisionCorrV   : date   ;  // 07. Дата исправления корректировочного счета-фактуры
  OrgName          : string ;  // 08. Наименование покупателя
  OrgINN           : string ;  // 09. ИНН покупателя
  OrgKPP           : string ;  // 09. КПП покупателя
  MedOrgINN        : string ;  // 11. ИНН продавца (из графы 9 части 2)
  MedOrgKPP        : string ;  // 11. КПП продавца (из графы 9 части 2)
  nMedSF           : string ;  // 12. Номер счета-фактуры, полученного от продавца (из графы 4 части 2)
  dMedSF           : date   ;  // 12. Дата счета-фактуры, полученного от продавца (из графы 4 части 2)
  Dollar           : string ;  // 13. Наименование валюты
  ISO_val          : string ;  // 13. Код валюты
  rSumma           : double ;  // 14. Стоимость товаров (работ, услуг), имущественных прав по счету-фактуре - всего //if(IsCorrV, 0, rSumma)
  rNDS             : double ;  // 15. В том числе, сумма НДС по счету-фактуре  //if(ISCORRV, 0, if(WITHOUTTAX, 'без НДС', RNDS) )
  rSumma_dec       : double ;  // 16. Разница стоимости с учетом НДС по корректировочному счету-фактуре уменьшение //if(IsCorrV, rSumma_dec, 0)
  rSumma_inc       : double ;  // 17. Разница стоимости с учетом НДС по корректировочному счету-фактуре увеличение //if(IsCorrV, rSumma_inc, 0)
  rNDS_dec         : double ;  // 18. Разница НДС по корректировочному счету-фактуре уменьшение //if(IsCorrV, if(rSumma_dec<>0, if(WithoutTax_dec, 0, rNDS_dec), 0), 0)
  rNDS_inc         : double ;  // 19. Разница НДС по корректировочному счету-фактуре увеличение //if(IsCorrV, if(rSumma_inc<>0, if(WithoutTax_inc, 0, rNDS_inc), 0), 0)
end; // Type

//------------------------------------------------------------------------------
// Часть 2. Полученные счета-фактуры
Type TSFTR_JUGetBuffer = record
  NumPP            : LongInt;  // 01. Порядковый номер записи

  IsCorrV          : boolean;  // Корректировочный СФ
  WithoutTax       : boolean;  // Признак "без НДС"
  WithoutTax_dec   : boolean;  // Признак "без НДС уменьшение"
  WithoutTax_inc   : boolean;  // Признак "без НДС увеличение"

  dPost            : date   ;  // 02. Дата получения счета-фактуры
  KodOperation     : string ;  // 03. Код вида операции
  NSF              : string ;  // 04. Номер счета-фактуры
  dFact            : date   ;  // 04. Дата счета-фактуры
  nRevision        : string ;  // 05. Номер исправления счета-фактуры
  dRevision        : date   ;  // 05. Дата исправления счета-фактуры
  nSFCorrV         : string ;  // 06. Номер корректировочного счета-фактуры
  dFactCorrV       : date   ;  // 06. Дата корректировочного счета-фактуры
  nRevisionCorrV   : string ;  // 07. Номер исправления корректировочного счета-фактуры
  dRevisionCorrV   : date   ;  // 07. Дата исправления корректировочного счета-фактуры
  OrgName          : string ;  // 08. Наименование продавца
  OrgINN           : string ;  // 09. ИНН продавца
  OrgKPP           : string ;  // 09. КПП продавца
  MedOrgINN        : string ;  // 11. ИНН субкомиссионера (субагента)
  MedOrgKPP        : string ;  // 11. КПП субкомиссионера (субагента)
  Code_VS          : string ;  // 12. Код вида сделки
  Dollar           : string ;  // 13. Наименование валюты
  ISO_val          : string ;  // 13. Код валюты
  rSumma           : double ;  // 14. Стоимость товаров (работ, услуг), имущественных прав по счету-фактуре - всего //if(IsCorrV, 0, rSumma)
  rNDS             : double ;  // 15. В том числе, сумма НДС по счету-фактуре  //if(ISCORRV, 0, if(WITHOUTTAX, 'без НДС', RNDS) )
  rSumma_dec       : double ;  // 16. Разница стоимости с учетом НДС по корректировочному счету-фактуре уменьшение //if(IsCorrV, rSumma_dec, 0)
  rSumma_inc       : double ;  // 17. Разница стоимости с учетом НДС по корректировочному счету-фактуре увеличение //if(IsCorrV, rSumma_inc, 0)
  rNDS_dec         : double ;  // 18. Разница НДС по корректировочному счету-фактуре уменьшение //if(IsCorrV, if(rSumma_dec<>0, if(WithoutTax_dec, 0, rNDS_dec), 0), 0)
  rNDS_inc         : double ;  // 19. Разница НДС по корректировочному счету-фактуре увеличение //if(IsCorrV, if(rSumma_inc<>0, if(WithoutTax_inc, 0, rNDS_inc), 0), 0)
end; // Type
//#endregion БУФЕР ДАННЫХ ЖУРНАЛА
//******************************************************************************


//==============================================================================
//#region БУФЕР ДАННЫХ ЖУРНАЛА (доп поля со ссылками)
//------------------------------------------------------------------------------
// Часть 1. Выставленные счета-фактуры
Type TSFTR_JUSetBuffer01 = record
  NumPP            : LongInt;  // 01. Порядковый номер записи

  IsCorrV          : boolean;  // Корректировочный СФ
  WithoutTax       : boolean;  // Признак "без НДС"
  WithoutTax_dec   : boolean;  // Признак "без НДС уменьшение"
  WithoutTax_inc   : boolean;  // Признак "без НДС увеличение"

  dPost            : date   ;  // 02. Дата выставления счета-фактуры
  KodOperation     : string ;  // 03. Код вида операции
  NSF              : string ;  // 04. Номер счета-фактуры
  dFact            : date   ;  // 04. Дата счета-фактуры
  nRevision        : string ;  // 05. Номер исправления счета-фактуры
  dRevision        : date   ;  // 05. Дата исправления счета-фактуры
  nSFCorrV         : string ;  // 06. Номер корректировочного счета-фактуры
  dFactCorrV       : date   ;  // 06. Дата корректировочного счета-фактуры
  nRevisionCorrV   : string ;  // 07. Номер исправления корректировочного счета-фактуры
  dRevisionCorrV   : date   ;  // 07. Дата исправления корректировочного счета-фактуры
  OrgName          : string ;  // 08. Наименование покупателя
  OrgINN           : string ;  // 09. ИНН покупателя
  OrgKPP           : string ;  // 09. КПП покупателя
  MedOrgINN        : string ;  // 11. ИНН продавца (из графы 9 части 2)
  MedOrgKPP        : string ;  // 11. КПП продавца (из графы 9 части 2)
  nMedSF           : string ;  // 12. Номер счета-фактуры, полученного от продавца (из графы 4 части 2)
  dMedSF           : date   ;  // 12. Дата счета-фактуры, полученного от продавца (из графы 4 части 2)
  Dollar           : string ;  // 13. Наименование валюты
  ISO_val          : string ;  // 13. Код валюты
  rSumma           : double ;  // 14. Стоимость товаров (работ, услуг), имущественных прав по счету-фактуре - всего //if(IsCorrV, 0, rSumma)
  rNDS             : double ;  // 15. В том числе, сумма НДС по счету-фактуре  //if(ISCORRV, 0, if(WITHOUTTAX, 'без НДС', RNDS) )
  rSumma_dec       : double ;  // 16. Разница стоимости с учетом НДС по корректировочному счету-фактуре уменьшение //if(IsCorrV, rSumma_dec, 0)
  rSumma_inc       : double ;  // 17. Разница стоимости с учетом НДС по корректировочному счету-фактуре увеличение //if(IsCorrV, rSumma_inc, 0)
  rNDS_dec         : double ;  // 18. Разница НДС по корректировочному счету-фактуре уменьшение //if(IsCorrV, if(rSumma_dec<>0, if(WithoutTax_dec, 0, rNDS_dec), 0), 0)
  rNDS_inc         : double ;  // 19. Разница НДС по корректировочному счету-фактуре увеличение //if(IsCorrV, if(rSumma_inc<>0, if(WithoutTax_inc, 0, rNDS_inc), 0), 0)

  cSF              : comp   ;  // ссылка на СФ
  cRevision        : comp   ;  // ссылка на исправление СФ
  cSFCorrV         : comp   ;  // ссылка на корректировочный СФ
  cRevisionCorrV   : comp   ;  // ссылка на исправление корректировочного СФ
  cMedSF           : comp   ;  // ссылка на СФ посредника

  cOrg             : comp   ;  // ссылка на контрагента
  cMedOrg          : comp   ;  // ссылка на посредника
end; // Type

//------------------------------------------------------------------------------
// Часть 2. Полученные счета-фактуры
Type TSFTR_JUGetBuffer01 = record
  NumPP            : LongInt;  // 01. Порядковый номер записи

  IsCorrV          : boolean;  // Корректировочный СФ
  WithoutTax       : boolean;  // Признак "без НДС"
  WithoutTax_dec   : boolean;  // Признак "без НДС уменьшение"
  WithoutTax_inc   : boolean;  // Признак "без НДС увеличение"

  dPost            : date   ;  // 02. Дата получения счета-фактуры
  KodOperation     : string ;  // 03. Код вида операции
  NSF              : string ;  // 04. Номер счета-фактуры
  dFact            : date   ;  // 04. Дата счета-фактуры
  nRevision        : string ;  // 05. Номер исправления счета-фактуры
  dRevision        : date   ;  // 05. Дата исправления счета-фактуры
  nSFCorrV         : string ;  // 06. Номер корректировочного счета-фактуры
  dFactCorrV       : date   ;  // 06. Дата корректировочного счета-фактуры
  nRevisionCorrV   : string ;  // 07. Номер исправления корректировочного счета-фактуры
  dRevisionCorrV   : date   ;  // 07. Дата исправления корректировочного счета-фактуры
  OrgName          : string ;  // 08. Наименование продавца
  OrgINN           : string ;  // 09. ИНН продавца
  OrgKPP           : string ;  // 09. КПП продавца
  MedOrgINN        : string ;  // 11. ИНН субкомиссионера (субагента)
  MedOrgKPP        : string ;  // 11. КПП субкомиссионера (субагента)
  Code_VS          : string ;  // 12. Код вида сделки
  Dollar           : string ;  // 13. Наименование валюты
  ISO_val          : string ;  // 13. Код валюты
  rSumma           : double ;  // 14. Стоимость товаров (работ, услуг), имущественных прав по счету-фактуре - всего //if(IsCorrV, 0, rSumma)
  rNDS             : double ;  // 15. В том числе, сумма НДС по счету-фактуре  //if(ISCORRV, 0, if(WITHOUTTAX, 'без НДС', RNDS) )
  rSumma_dec       : double ;  // 16. Разница стоимости с учетом НДС по корректировочному счету-фактуре уменьшение //if(IsCorrV, rSumma_dec, 0)
  rSumma_inc       : double ;  // 17. Разница стоимости с учетом НДС по корректировочному счету-фактуре увеличение //if(IsCorrV, rSumma_inc, 0)
  rNDS_dec         : double ;  // 18. Разница НДС по корректировочному счету-фактуре уменьшение //if(IsCorrV, if(rSumma_dec<>0, if(WithoutTax_dec, 0, rNDS_dec), 0), 0)
  rNDS_inc         : double ;  // 19. Разница НДС по корректировочному счету-фактуре увеличение //if(IsCorrV, if(rSumma_inc<>0, if(WithoutTax_inc, 0, rNDS_inc), 0), 0)

  cSF              : comp   ;  // ссылка на СФ
  cRevision        : comp   ;  // ссылка на исправление СФ
  cSFCorrV         : comp   ;  // ссылка на корректировочный СФ
  cRevisionCorrV   : comp   ;  // ссылка на исправление корректировочного СФ
  cMedSF           : comp   ;  // ссылка на СФ посредника

  cOrg             : comp   ;  // ссылка на контрагента
  cMedOrg          : comp   ;  // ссылка на посредника
end; // Type
//#endregion БУФЕР ДАННЫХ КНИГИ (доп поля со ссылками)
//******************************************************************************

#endif//__SFTR_JUBuffer_Inc__
