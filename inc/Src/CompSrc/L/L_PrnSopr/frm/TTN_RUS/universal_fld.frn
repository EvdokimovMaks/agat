!Поля для универсального передаточного документа (universal.rtf)
.fields
  Ean13ToEanGnivcTTF(GenerateBarCodeEx(coKatSopr, накладная_нрек))
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetSchFactNum (накладная_нрек), ' ')
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetSchFactDate(накладная_нрек), ' ')
  '@'
  //продавец
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetOrgFullName(oPrnSoprFun.GetSchFactOrgNRec(СчФакт_НРек, 0), 8, 0, Дата), (oPrnSoprFun.GetOrgFullName(накладная_нрек, 0, 1) + oPrnSoprFun.GetOrgFullName(накладная_нрек, 0, 2)))
  LTrim(LTrim(if (СчФакт_НРек <> 0, oPrnSoprFun.GetSchFactOrgAddr(СчФакт_НРек, 0), #AdrFieldsUr(Поставщик,Поставщик_СТАРАНА_КОД)), ','), ' ')

  if (СчФакт_НРек <> 0, '1', '2')

  if (СчФакт_НРек <> 0, oPrnSoprFun.GetSchFactOrgUNN(СчФакт_НРек, 0), (ПоставщикУНН + ' / ' + ПоставщикКПП))
  //грузоотправитель
  if (СчФакт_НРек <> 0, if (Признак_МЦ <> 2, if(oPrnSoprFun.GetSchFactOrgNRec(СчФакт_НРек, 0) <> oPrnSoprFun.GetSchFactOrgNRec(СчФакт_НРек, 2),
                                                                                                 oPrnSoprFun.GetOrgFullName(oPrnSoprFun.GetSchFactOrgNRec(СчФакт_НРек, 2), 8, 0, Дата), 'он же'), '-'),
                        if (Признак_МЦ <> 2, (oPrnSoprFun.GetOrgFullName(накладная_нрек, 1, 1) + oPrnSoprFun.GetOrgFullName(накладная_нрек, 1, 2)), '-'))
  if (СчФакт_НРек <> 0, if (Признак_МЦ <> 2, if(oPrnSoprFun.GetSchFactOrgNRec(СчФакт_НРек, 0) <> oPrnSoprFun.GetSchFactOrgNRec(СчФакт_НРек, 2),
                                                                                                 oPrnSoprFun.GetSchFactOrgAddr(СчФакт_НРек, 2), ''), ''),
                        if (Признак_МЦ <> 2, #AdrFields(Грузоотправитель,Грузоотправитель_СТАРАНА_КОД), ''))
  //грузополучатель
  if (СчФакт_НРек <> 0, if (Признак_МЦ <> 2, oPrnSoprFun.GetOrgFullName(oPrnSoprFun.GetSchFactOrgNRec(СчФакт_НРек, 3), 8, 0, Дата), '-'),
                        if (Признак_МЦ <> 2, (oPrnSoprFun.GetOrgFullName(накладная_нрек, 2, 1) + oPrnSoprFun.GetOrgFullName(накладная_нрек, 2, 2)), '-'))
  if (СчФакт_НРек <> 0, if (Признак_МЦ <> 2, oPrnSoprFun.GetSchFactOrgAddr(СчФакт_НРек, 3), ''),
                        if (Признак_МЦ <> 2, #AdrFields(Грузополучатель,Грузополучатель_СТАРАНА_КОД), ''))

  if (oPrnSoprFun.FindPlat(СчФакт_НРек)<>'', oPrnSoprFun.FindPlat(СчФакт_НРек), '№ - от -')

  //покупатель
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetOrgFullName(oPrnSoprFun.GetSchFactOrgNRec(СчФакт_НРек, 1), 8, 0, Дата), (oPrnSoprFun.GetOrgFullName(накладная_нрек, 3, 1) + oPrnSoprFun.GetOrgFullName(накладная_нрек, 3, 2)))
  LTrim(LTrim(if (СчФакт_НРек <> 0, oPrnSoprFun.GetSchFactOrgAddr(СчФакт_НРек, 1), #AdrFieldsUr(Получатель,Получатель_СТАРАНА_КОД)), ','), ' ')
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetSchFactOrgUNN(СчФакт_НРек, 1), (ПолучательУНН + ' / ' + ГрузополучательКПП))   //ПИР 101.58197

  //Валюта: наименование, код
  oPrnSoprFun.GetValName(Валюта_нрек)
  oPrnSoprFun.GetValCode(Валюта_нрек)
  oPrnSoprFun.GetFullIGKEx(накладная_нрек, СчФакт_НРек)

  Nom
  КодМЦ
  Название
  CodeOtpEd
  ОтпЕд
  DoubleToStr(КолФ, Kol_Pr)
  DoubleToStr(oPrnSoprFun.GetDPriceMC(спецификацияМЦ_нрек, 0, Признак_МЦ, ЦНацСН, ЦНацБН, ЦНакСН, ЦНакБН), Cena_PrU)
  DoubleToStr(СтНацБН0 , Cena_PrU)
  if (СчФакт_НРек = 0, 'Без акциза', if (ЦАкцизНак <> 0, DoubleToStr(ЦАкцизНак, Cena_PrU), 'Без акциза'))
  if (СчФакт_НРек = 0, '18%', if (ПризнакНДС = word(0), sGetTune('Doc.SD.AbbrField.NoNDSStZero')
                          , if (ставка_первого_налога = 0, sGetTune('Doc.SD.AbbrField.NDSStZero'), DoubleToStr(ставка_первого_налога, NDS_St) + '%')))
  if (ПризнакНДС = word(0), sGetTune('Doc.SD.AbbrField.NoNDSSummZero'), if (СтНДСНац = 0, sGetTune('Doc.SD.AbbrField.NDSSummZero'), DoubleToStr(СтНДСНац, Cena_PrU)))
  DoubleToStr(СтНацСН , Cena_PrU)
  if (СчФакт_НРек = 0, '-', oPrnSoprFun.PrnSoprGTD(Признак_МЦ, СчФакт_НРек, спецификацияМЦ_нрек, 0))
  if (СчФакт_НРек = 0, '-', oPrnSoprFun.PrnSoprGTD(Признак_МЦ, СчФакт_НРек, спецификацияМЦ_нрек, 1))
  if (СчФакт_НРек = 0, '-', oPrnSoprFun.PrnSoprGTD(Признак_МЦ, СчФакт_НРек, спецификацияМЦ_нрек, 2))

  DoubleToStr(Sum1Itog, Cena_PrU)
  DoubleToStr(Sum2Itog, Cena_PrU)
  DoubleToStr(Sum3Itog, Cena_PrU)

  //количество листов
  if (Nom - 36 > 0 , DoubleToStr(Trunc((Nom - 36)/56) + 2, '666'),'1')

  if (oPrnSoprFun.Check_IP(накладная_нрек, 1), '',if(sFIO1 <> '', sFIO1, Директор))
  oPrnSoprFun.GetGlBuhName(накладная_нрек, if(sFIO2 <> '', sFIO2, Главный_бухгалтер))
 // if (НомерДовер <>'' or LongInt(ДатаДовер) <> LongInt(0), 'По доверенности № ' + НомерДовер + DateToStr(ДатаДовер, 'от DD mon YYYYг.'), '')
  if (oPrnSoprFun.Check_IP(накладная_нрек, 1), if(sFIO1 <> '', sFIO1, Директор),'')         //Руководитель для ИП
  if (oPrnSoprFun.Check_IP(накладная_нрек, 1), oPrnSoprFun.Write_IP(накладная_нрек, 1),'')  //Атрибут "Реквизиты ИП"

  if (Номер_Договора  <> '', 'Договор № '      + Номер_Договора  + DateToStr(Дата_Договора , ' от DD/MM/YYYYг.' + '; '), '')// +
 // if (НарядЗаказНомер <> '', 'Заказ-наряд № '  + НарядЗаказНомер + DateToStr(НарядЗаказДата, ' от DD/MM/YYYYг.' + '; '), '') +
 // if (Основание       <> '', 'Счет № '         + Основание       + DateToStr(ДатаОснования , ' от DD/MM/YYYYг.' + '; '), '') +
 // if (НомерДовер      <> '', 'Доверенность № ' + НомерДовер      + DateToStr(ДатаДовер     , ' от DD/MM/YYYYг.'), '')

  if(sPost4 <> '', sPost4, отпуск_разрешил_должность)
  if(sFIO4  <> '', sFIO4 , отпуск_разрешил)

  if (НомерДовер  <> '', ДовЛицоДолжность, '')
  if (НомерДовер  <> '', ДовЛицо, '')

  if (Дата_Отгрузки = Date(0,0,0), '', DateToStr(Дата_Отгрузки, 'DD'))
  if (Дата_Отгрузки = Date(0,0,0), '', DateToStr(Дата_Отгрузки, 'Mon'))
  if (Дата_Отгрузки = Date(0,0,0), '', DateToStr(Дата_Отгрузки, 'YY'))

  sPost3
  sFIO3

  if (НомерДовер  <> '', '', ДовЛицоДолжность)
  if (НомерДовер  <> '', '', ДовЛицо)

  if (СчФакт_НРек <> 0, oPrnSoprFun.GetOrgFullName(oPrnSoprFun.GetSchFactOrgNRec(СчФакт_НРек, 0), 8, 0, Дата), (oPrnSoprFun.GetOrgFullName(накладная_нрек, 0, 1) + oPrnSoprFun.GetOrgFullName(накладная_нрек, 0, 2)))
  if (СчФакт_НРек <> 0, ', ИНН/КПП: ' + oPrnSoprFun.GetSchFactOrgUNN(СчФакт_НРек, 0), (', ИНН/КПП: ' + ПоставщикУНН + ' / ' + ПоставщикКПП))
  if (СчФакт_НРек <> 0, oPrnSoprFun.GetOrgFullName(oPrnSoprFun.GetSchFactOrgNRec(СчФакт_НРек, 1), 8, 0, Дата), (oPrnSoprFun.GetOrgFullName(накладная_нрек, 3, 1) + oPrnSoprFun.GetOrgFullName(накладная_нрек, 3, 2)))
  if (СчФакт_НРек <> 0, ', ИНН/КПП: ' + oPrnSoprFun.GetSchFactOrgUNN(СчФакт_НРек, 3), (', ИНН/КПП: ' + ПолучательУНН + ' / ' + ГрузополучательКПП))

  Спецсимвол
.endfields
